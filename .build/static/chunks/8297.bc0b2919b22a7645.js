"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8297],{88297:function(e,a,t){t.r(a),t.d(a,{SwapManagement:function(){return Q}});var s=t(15444),r=t(89300),l=t(48001),i=t(41084),n=t(59335),d=t(31587),c=t(1946),o=t(70362),m=t(33485),x=t(66124),u=t(55404),h=t(16629),p=t(62492),g=t(23572),b=t(79582),f=t(28576),j=t(42154);let y=(0,j.Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var N=t(91117),k=t(90185),v=t(35798),w=t(6524),C=t(86250),z=t(43691),S=t(4805),D=t(50828),T=t(19484),Z=t(77248);let P=(0,j.Z)("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);var q=t(81178),E=t(81471),R=t(2422),A=t(74678),K=t(67012),F=t(39090),O=t(10839);let M=null,_=null;async function $(){if(!M){let e=await Promise.all([t.e(6863),t.e(7290)]).then(t.bind(t,7290));M=e.Html5Qrcode,_=e.Html5QrcodeScannerState}return{Html5Qrcode:M,Html5QrcodeScannerState:_}}function Q({userId:e,type:a,highlightedSwapId:t}){let[j,Q]=(0,r.useState)([]),[V,G]=(0,r.useState)(!0),[B,H]=(0,r.useState)([]),[I,L]=(0,r.useState)(!1),[U,J]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(!1),[W,ee]=(0,r.useState)(!1),[ea,et]=(0,r.useState)(null),[es,er]=(0,r.useState)("delivery_point"),[el,ei]=(0,r.useState)(""),[en,ed]=(0,r.useState)(""),[ec,eo]=(0,r.useState)(""),[em,ex]=(0,r.useState)(""),[eu,eh]=(0,r.useState)(""),[ep,eg]=(0,r.useState)([]),[eb,ef]=(0,r.useState)(!1),ej=(0,r.useRef)(null),[ey,eN]=(0,r.useState)(!1),[ek,ev]=(0,r.useState)(!1),[ew,eC]=(0,r.useState)(""),[ez,eS]=(0,r.useState)(""),[eD,eT]=(0,r.useState)(!1),[eZ,eP]=(0,r.useState)(""),eq=(0,r.useRef)(null),eE="qr-reader-container",[eR,eA]=(0,r.useState)("qr"),[eK,eF]=(0,r.useState)(""),[eO,eM]=(0,r.useState)(""),[e_,e$]=(0,r.useState)(!1),[eQ,eV]=(0,r.useState)(!1),[eG,eB]=(0,r.useState)(!1),[eH,eI]=(0,r.useState)(!1),[eL,eU]=(0,r.useState)(""),[eJ,eX]=(0,r.useState)(null),[eY,eW]=(0,r.useState)(null),[e0,e1]=(0,r.useState)(!1),e2=(0,r.useRef)(null),e5=(0,r.useRef)(null),[e4,e3]=(0,r.useState)(null),[e6,e8]=(0,r.useState)(!1),[e7,e9]=(0,r.useState)(""),[ae,aa]=(0,r.useState)(!1),[at,as]=(0,r.useState)([]),[ar,al]=(0,r.useState)(!1),[ai,an]=(0,r.useState)(""),[ad,ac]=(0,r.useState)(""),[ao,am]=(0,r.useState)(null),[ax,au]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&(ab(),af())},[a,e]),(0,r.useEffect)(()=>()=>{if(eq.current){try{eq.current.getState()===_.SCANNING&&eq.current.stop().catch(()=>{})}catch{}eq.current=null}},[]),(0,r.useEffect)(()=>{{let e=localStorage.getItem("hasSeenSwapGuide");I&&!e&&eN(!0)}},[I]);let ah=()=>{localStorage.setItem("hasSeenSwapGuide","true"),eN(!1)},ap=async()=>{if(ea&&e7){ev(!0),eC("");try{let e=await fetch("/api/swap-requests",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ea.id,action:"propose_price",proposedPrice:parseInt(e7)})}),a=await e.json();if(!e.ok)throw Error(a.error||"Fiyat g\xf6nderilemedi");await ab(),e8(!1),e9(""),a.priceAgreed?eS(`ðŸ¤ ${a.agreedPrice} Valor fiyatÄ±nda anlaÅŸtÄ±nÄ±z! TakasÄ± baÅŸlatabilirsiniz.`):eS("Fiyat \xf6neriniz g\xf6nderildi. KarÅŸÄ± tarafÄ±n onayÄ± bekleniyor.")}catch(e){eC(e.message)}finally{ev(!1)}}},ag=async e=>{ev(!0),eC("");try{let a=await fetch("/api/swap-requests",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"confirm_swap"})}),t=await a.json();if(!a.ok)throw Error(t.error||"Takas baÅŸlatÄ±lamadÄ±");await ab(),eS(`âœ… Takas onaylandÄ±! QR Kod: ${t.qrCode?.slice(0,20)}... DoÄŸrulama: ${t.verificationCode}`)}catch(e){eC(e.message)}finally{ev(!1)}},ab=async()=>{if((0,O.s9)()){eC("Ä°nternet baÄŸlantÄ±nÄ±z yok"),G(!1);return}G(!0),eC("");try{let[e,a]=await Promise.all([(0,O.DV)("/api/swap-requests?type=received",{timeout:12e3}),(0,O.DV)("/api/swap-requests?type=sent",{timeout:12e3})]),t=[],s=[];if(e.ok&&e.data){let a=e.data;t=Array.isArray(a)?a:a.requests||[]}if(a.ok&&a.data){let e=a.data;s=Array.isArray(e)?e:e.requests||[]}let r=[...t,...s].reduce((e,a)=>(e.find(e=>e.id===a.id)||e.push(a),e),[]);r.sort((e,a)=>new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime()),Q(r),e.ok||a.ok||eC(e.error||a.error||"Teklifler y\xfcklenemedi")}catch(e){console.error("Swap requests fetch error:",e),eC("Teklifler y\xfcklenirken bir hata oluÅŸtu")}finally{G(!1)}},af=async()=>{try{let e=await fetch("/api/delivery-points"),a=await e.json(),t=Array.isArray(a)?a:a.points||[];H(t)}catch(e){console.error("Delivery points fetch error:",e)}},aj=async e=>{al(!0);try{let a=await fetch(`/api/swap-requests/negotiate?swapId=${e}`),t=await a.json();a.ok&&as(t.history||[])}catch(e){console.error("Negotiation history fetch error:",e)}finally{al(!1)}},ay=async e=>{et(e),aa(!0),an(""),ac(""),await aj(e.id)},aN=async()=>{if(ea&&ai){ev(!0),eC("");try{let e=await fetch("/api/swap-requests/negotiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapId:ea.id,action:"counter",proposedPrice:parseInt(ai),message:ad||void 0})}),a=await e.json();if(!e.ok)throw Error(a.error||"KarÅŸÄ± teklif g\xf6nderilemedi");eS(a.message),an(""),ac(""),await aj(ea.id),await ab()}catch(e){eC(e.message)}finally{ev(!1)}}},ak=async()=>{if(ea){ev(!0),eC("");try{let e=await fetch("/api/swap-requests/negotiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapId:ea.id,action:"accept"})}),a=await e.json();if(!e.ok)throw Error(a.error||"Fiyat kabul edilemedi");eS(a.message),aa(!1),await ab()}catch(e){eC(e.message)}finally{ev(!1)}}},av=async e=>{try{let a=await fetch(`/api/swap-requests/dispute?swapId=${e}`),t=await a.json();a.ok&&am(t.disputeWindow)}catch(e){console.error("Dispute window fetch error:",e)}},aw=async e=>{et(e),au(!0),await av(e.id)},aC=async e=>{ev(!0),eC("");try{if(!(await fetch("/api/swap-requests",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"rejected"})})).ok)throw Error("Reddedilemedi");await ab(),eS("Takas teklifi reddedildi")}catch(e){eC(e.message)}finally{ev(!1)}},az=async()=>{if(ea){if(!eJ){eC("Paketleme fotoÄŸrafÄ± zorunludur");return}ev(!0),eC("");try{let e=await fetch("/api/swap-requests/delivery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:ea.id,deliveryMethod:es,deliveryPointId:"delivery_point"===es?el:null,customLocation:"custom_location"===es?en:null,packagingPhoto:eJ})}),a=await e.json();if(!e.ok)throw Error(a.error||"Teslimat ayarlanamadÄ±");await ab(),L(!1),eX(null),eS("QR kod oluÅŸturuldu! AlÄ±cÄ± bu kodu tarayarak \xfcr\xfcn\xfc teslim alabilir."),j.find(e=>e.id===ea.id)&&(et({...ea,qrCode:a.qrCode}),J(!0))}catch(e){eC(e.message)}finally{ev(!1)}}},aS=(0,r.useCallback)(async e=>{let a=e.toUpperCase();(a.startsWith("TAKAS-")||a.length>10)&&(eo(a),e$(!1),await aq(),setTimeout(()=>{aD(a)},300))},[]),aD=async e=>{ev(!0),eC("");try{let a=await fetch("/api/swap-requests/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrCode:e,action:"scan_qr"})}),t=await a.json();if(!a.ok)throw Error(t.error||"QR kod taranamadÄ±");aq(),eM(e),t.alreadyScanned?eA("verify"):(await ab(),eA("verify"),eS("\uD83D\uDCE7 QR tarandÄ±! Email adresinize 6 haneli doÄŸrulama kodu g\xf6nderildi."))}catch(e){eC(e.message)}finally{ev(!1)}},aT=async()=>{if(ea){eV(!0),eC("");try{let e=await fetch("/api/swap-requests/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"send_code_email",swapRequestId:ea.id})}),a=await e.json();if(!e.ok)throw Error(a.error||"Email g\xf6nderilemedi");eB(!0),eS(a.message||"âœ… DoÄŸrulama kodu alÄ±cÄ±ya email ile g\xf6nderildi!"),await ab()}catch(e){eC(e.message)}finally{eV(!1)}}},aZ=async()=>{if(ea&&eL){if(6!==eL.length){eC("DoÄŸrulama kodu 6 haneli olmalÄ±dÄ±r");return}ev(!0),eC("");try{if(!eY){eC("\xdcr\xfcn\xfcn teslim sonrasÄ± en az 1 fotoÄŸrafÄ±nÄ± y\xfckleyin"),ev(!1);return}let e=await fetch("/api/swap-requests/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrCode:ea.qrCode,verificationCode:eL.trim(),receiverPhotos:[eY]})}),a=await e.json();if(!e.ok)throw Error(a.error||"DoÄŸrulama baÅŸarÄ±sÄ±z");eI(!1),eU(""),eW(null),eS("\uD83C\uDF89 Teslimat baÅŸarÄ±yla tamamlandÄ±!"),await ab()}catch(e){eC(e.message)}finally{ev(!1)}}},aP=async()=>{eP(""),e$(!0),eT(!0);try{if(await $(),eq.current){try{eq.current.getState()===_.SCANNING&&await eq.current.stop()}catch{}eq.current=null}await new Promise(e=>setTimeout(e,300));let e=document.getElementById(eE);if(!e){eP("QR tarayÄ±cÄ± y\xfcklenemedi. L\xfctfen sayfayÄ± yenileyin."),e$(!1),eT(!1);return}if(null===e.offsetParent){eP("QR tarayÄ±cÄ± g\xf6r\xfcn\xfcr deÄŸil. L\xfctfen sayfayÄ± yenileyin."),e$(!1),eT(!1);return}eq.current=new M(eE);let a=await M.getCameras();if(!a||0===a.length){eP("Kamera bulunamadÄ±. L\xfctfen kamera eriÅŸimini kontrol edin."),e$(!1),eT(!1);return}console.log("Available cameras:",a.map(e=>e.label));let t=a[0].id,s=a.find(e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("arka")||e.label.toLowerCase().includes("environment")||e.label.toLowerCase().includes("rear")||e.label.toLowerCase().includes("0"));s?(t=s.id,console.log("Using back camera:",s.label)):a.length>1&&(t=a[a.length-1].id,console.log("Using last camera:",a[a.length-1].label));try{await eq.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},e=>{aS(e)},()=>{}),console.log("Camera started with facingMode: environment")}catch(e){console.log("facingMode failed, trying cameraId:",e),await eq.current.start(t,{fps:10,qrbox:{width:250,height:250},aspectRatio:1},e=>{aS(e)},()=>{}),console.log("Camera started with cameraId")}}catch(e){console.error("Camera start error:",e),eT(!1),e.message?.includes("Permission denied")||"NotAllowedError"===e.name?eP("âš ï¸ Kamera izni verilmedi. TarayÄ±cÄ± ayarlarÄ±ndan kamera iznini etkinleÅŸtirin veya manuel kod girin."):e.message?.includes("NotFoundError")||"NotFoundError"===e.name?eP("âš ï¸ Kamera bulunamadÄ±. Manuel kod giriÅŸi yapabilirsiniz."):e.message?.includes("NotReadableError")||"NotReadableError"===e.name?eP("âš ï¸ Kamera baÅŸka bir uygulama tarafÄ±ndan kullanÄ±lÄ±yor. DiÄŸer uygulamalarÄ± kapatÄ±p tekrar deneyin."):e.message?.includes("OverconstrainedError")||"OverconstrainedError"===e.name?eP("âš ï¸ Kamera ayarlarÄ± desteklenmiyor. Manuel kod giriÅŸi yapabilirsiniz."):eP(`Kamera baÅŸlatÄ±lamadÄ±: ${e.message||"Bilinmeyen hata"}. Manuel kod giriÅŸi yapabilirsiniz.`),e$(!1)}},aq=async()=>{if(e$(!1),eT(!1),eq.current){try{eq.current.getState()===_.SCANNING&&await eq.current.stop()}catch(e){console.log("Error stopping camera:",e)}eq.current=null}},aE=async(e,a)=>{let t=e.target.files?.[0];if(t){"dispute"===a?ef(!0):e1(!0);try{let e=new FileReader;e.onload=e=>{let t=e.target?.result;"packaging"===a?eX(t):"receiver"===a?eW(t):"dispute"===a&&ep.length<5&&eg(e=>[...e,t]),"dispute"===a?ef(!1):e1(!1)},e.readAsDataURL(t)}catch(e){console.error("Photo upload error:",e),eC("FotoÄŸraf y\xfcklenemedi"),"dispute"===a?ef(!1):e1(!1)}}},aR=async()=>{if(ec.trim()){ev(!0),eC("");try{let e=await fetch("/api/swap-requests/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrCode:ec.trim().toUpperCase(),action:"scan_qr"})}),a=await e.json();if(!e.ok)throw Error(a.error||"QR kod taranamadÄ±");aq(),eM(ec.trim().toUpperCase()),a.alreadyScanned?eA("verify"):(await ab(),eA("verify"),eS("\uD83D\uDCE7 QR tarandÄ±! Email adresinize 6 haneli doÄŸrulama kodu g\xf6nderildi."))}catch(e){eC(e.message)}finally{ev(!1)}}},aA=async()=>{if(!eK.trim()||6!==eK.length){eC("L\xfctfen 6 haneli doÄŸrulama kodunu girin");return}if(!eY){eC("L\xfctfen teslim fotoÄŸrafÄ± y\xfckleyin - dispute durumunda kanÄ±t olarak kullanÄ±lacak");return}ev(!0),eC("");try{let e=await fetch("/api/swap-requests/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrCode:eO||ec.trim().toUpperCase(),verificationCode:eK.trim(),receiverPhotos:[eY]})}),a=await e.json();if(!e.ok)throw Error(a.error||"DoÄŸrulama baÅŸarÄ±sÄ±z");await ab(),Y(!1),eo(""),eF(""),eM(""),eW(null),eA("qr"),eS("âœ… Teslimat tamamlandÄ±! 24 saat i\xe7inde sorun bildirmezseniz takas otomatik onaylanÄ±r.")}catch(e){eC(e.message)}finally{ev(!1)}},aK=async e=>{ev(!0),eC("");try{let a=await fetch("/api/swap-requests/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"confirm"})}),t=await a.json();if(!a.ok)throw Error(t.error||"Onay baÅŸarÄ±sÄ±z");await ab(),eS(`Takas tamamlandÄ±! SatÄ±cÄ±ya ${t.valorTransferred} Valor aktarÄ±ldÄ±.`)}catch(e){eC(e.message)}finally{ev(!1)}},aF=async()=>{if(ea&&em&&!(eu.length<20)){if(0===ep.length){eC("L\xfctfen en az 1 fotoÄŸraf y\xfckleyin - kanÄ±t olarak kullanÄ±lacak");return}ev(!0),eC("");try{let e=await fetch("/api/disputes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:ea.id,type:em,description:eu,evidence:ep})}),a=await e.json();if(!e.ok)throw Error(a.error||"Rapor oluÅŸturulamadÄ±");await ab(),ee(!1),ex(""),eh(""),eg([]),eS("Sorun raporu oluÅŸturuldu. Admin ekibimiz 24 saat i\xe7inde inceleyecek.")}catch(e){eC(e.message)}finally{ev(!1)}}},aO=j.filter(e=>"offers"===a?["pending","rejected"].includes(e.status):["accepted","awaiting_delivery","qr_scanned","delivered","completed","disputed","refunded"].includes(e.status)),aM=e=>new Date(e).toLocaleDateString("tr-TR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),a_=e=>({pending:{label:"Bekliyor",color:"bg-yellow-100 text-yellow-700"},accepted:{label:"Kabul Edildi",color:"bg-green-100 text-green-700"},rejected:{label:"Reddedildi",color:"bg-red-100 text-red-700"},awaiting_delivery:{label:"Teslimat Bekliyor",color:"bg-blue-100 text-blue-700"},qr_scanned:{label:"QR TarandÄ±",color:"bg-indigo-100 text-indigo-700"},delivered:{label:"Teslim Edildi",color:"bg-purple-100 text-purple-700"},completed:{label:"TamamlandÄ±",color:"bg-green-100 text-green-700"},disputed:{label:"Sorun Bildirildi",color:"bg-red-100 text-red-700"},refunded:{label:"Ä°ade Edildi",color:"bg-gray-100 text-gray-700"}})[e]||{label:e,color:"bg-gray-100 text-gray-700"},a$=e=>{let a=new Date(e).getTime()-Date.now();return a<=0?"S\xfcre doldu":`${Math.floor(a/36e5)} saat ${Math.floor(a%36e5/6e4)} dakika`};return V?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsx)(c.Z,{className:"w-8 h-8 animate-spin text-purple-600"})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(n.M,{children:[ew&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"p-4 rounded-xl bg-red-50 text-red-700 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),ew,(0,s.jsx)("button",{onClick:()=>eC(""),className:"ml-auto",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})})]}),ez&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"p-4 rounded-xl bg-green-50 text-green-700 flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),ez,(0,s.jsx)("button",{onClick:()=>eS(""),className:"ml-auto",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})})]})]}),"swaps"===a&&(0,s.jsxs)(R.z,{onClick:()=>Y(!0),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"QR Kod Tara - \xdcr\xfcn Teslim Al"]}),0===aO.length&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-8 text-center",children:[(0,s.jsx)(h.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:"offers"===a?"Aktif Teklifiniz Yok":"Aktif TakasÄ±nÄ±z Yok"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"offers"===a?"\xdcr\xfcnlerinize gelen teklifleri burada g\xf6rebilirsiniz.":"Kabul edilmiÅŸ ve devam eden takaslarÄ±nÄ±z burada g\xf6r\xfcnecek."}),(0,s.jsx)(i.default,{href:"/takas-firsatlari",children:(0,s.jsx)(R.z,{size:"sm",children:"Takas FÄ±rsatlarÄ±nÄ± G\xf6r"})})]}),aO.map(a=>{let r=a.owner.id===e,n=a.requester.id===e,c=a_(a.status),h=t===a.id;return(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`bg-white rounded-2xl shadow-sm overflow-hidden transition-all ${h?"ring-2 ring-frozen-500 ring-offset-2 animate-pulse":""}`,ref:e=>{h&&e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},300)},children:[(0,s.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.color}`,children:c.label}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:aM(a.createdAt)})]}),"delivered"===a.status&&a.deliveryConfirmDeadline&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-amber-600",children:[(0,s.jsx)(p.Z,{className:"w-3 h-3"}),"Onay s\xfcresi: ",a$(a.deliveryConfirmDeadline)]})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Ä°stenen \xdcr\xfcn"}),(0,s.jsxs)(i.default,{href:`/urun/${a.product.id}`,className:"flex items-center gap-3 group",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-gray-100 flex-shrink-0",children:(0,s.jsx)(l.default,{src:a.product.images[0]||"/images/placeholder.jpg",alt:a.product.title,width:64,height:64,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 group-hover:text-purple-600 line-clamp-1",children:a.product.title}),(0,s.jsxs)("p",{className:"text-sm text-purple-600 font-semibold",children:[a.product.valorPrice," Valor"]})]})]})]}),(0,s.jsx)(g.Z,{className:"w-5 h-5 text-gray-300"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"KarÅŸÄ±lÄ±ÄŸÄ±nda"}),a.offeredProduct?(0,s.jsxs)(i.default,{href:`/urun/${a.offeredProduct.id}`,className:"flex items-center gap-3 group",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-gray-100 flex-shrink-0",children:(0,s.jsx)(l.default,{src:a.offeredProduct.images[0]||"/images/placeholder.jpg",alt:a.offeredProduct.title,width:64,height:64,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 group-hover:text-purple-600 line-clamp-1",children:a.offeredProduct.title}),(0,s.jsxs)("p",{className:"text-sm text-purple-600 font-semibold",children:[a.offeredProduct.valorPrice," Valor"]})]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5 text-amber-500"}),(0,s.jsxs)("span",{className:"font-semibold text-amber-600",children:[a.product.valorPrice," Valor"]})]})]})]}),a.message&&(0,s.jsxs)("div",{className:"mt-3 p-3 rounded-xl bg-gray-50",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:['"',a.message,'"']}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["- ",(0,F.Gf)(a.requester)]})]}),a.deliveryMethod&&(0,s.jsx)("div",{className:"mt-3 p-3 rounded-xl bg-blue-50",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-blue-700",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"delivery_point"===a.deliveryMethod?a.deliveryPoint?.name||"Teslim NoktasÄ±":a.customLocation})]})})]}),(0,s.jsxs)("div",{className:"p-4 border-t bg-gray-50",children:[("pending"===a.status||"accepted"===a.status||"awaiting_delivery"===a.status)&&(0,s.jsxs)("div",{className:"mb-3 p-3 rounded-xl bg-amber-50 border border-amber-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(y,{className:"w-4 h-4 text-amber-600"}),(0,s.jsx)("span",{className:"text-sm font-medium text-amber-800",children:"Sistem Kesintisi Bilgisi"})]}),(0,s.jsx)("p",{className:"text-xs text-amber-700",children:"Takas tamamlandÄ±ÄŸÄ±nda sistem kesintisi alÄ±nacaktÄ±r:"}),(0,s.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[(0,s.jsxs)("div",{className:"bg-white/60 rounded-lg p-2 text-center",children:[(0,s.jsxs)("span",{className:"text-amber-600 font-semibold",children:[a.product.valorPrice," Valor"]}),(0,s.jsx)("p",{className:"text-gray-600",children:"\xdcr\xfcn DeÄŸeri"})]}),(0,s.jsxs)("div",{className:"bg-white/60 rounded-lg p-2 text-center",children:[(0,s.jsxs)("span",{className:"text-amber-600 font-semibold",children:["~%",a.product.valorPrice<=100?"5":a.product.valorPrice<=500?"4":a.product.valorPrice<=2e3?"3":"2"]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Kesinti OranÄ±"})]})]}),(0,s.jsxs)("p",{className:"text-[10px] text-amber-600 mt-2 flex items-center gap-1",children:[(0,s.jsx)(N.Z,{className:"w-3 h-3"}),"Takas sonrasÄ± satÄ±cÄ±ya net tutar aktarÄ±lÄ±r."]})]}),"pending"===a.status&&(0,s.jsxs)("div",{className:"mb-3 p-3 rounded-xl bg-blue-50 border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"PazarlÄ±k Durumu"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{className:`p-2 rounded-lg ${a.agreedPriceRequester?"bg-purple-100":"bg-gray-100"}`,children:[(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,F.Gf)(a.requester)," \xf6nerisi:"]}),(0,s.jsx)("p",{className:"font-semibold text-purple-700",children:null!==a.agreedPriceRequester?`${a.agreedPriceRequester} Valor`:"Hen\xfcz yok"})]}),(0,s.jsxs)("div",{className:`p-2 rounded-lg ${a.agreedPriceOwner?"bg-green-100":"bg-gray-100"}`,children:[(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,F.Gf)(a.owner)," \xf6nerisi:"]}),(0,s.jsx)("p",{className:"font-semibold text-green-700",children:null!==a.agreedPriceOwner?`${a.agreedPriceOwner} Valor`:"Hen\xfcz yok"})]})]}),"price_agreed"===a.negotiationStatus&&(0,s.jsx)("div",{className:"mt-2 p-2 rounded-lg bg-green-100 border border-green-300",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"font-medium",children:["Fiyat anlaÅŸmasÄ± saÄŸlandÄ±: ",a.pendingValorAmount||a.agreedPriceRequester," Valor"]})]})}),(0,s.jsxs)("button",{onClick:()=>ay(a),className:"mt-2 w-full flex items-center justify-center gap-2 py-2 text-sm text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"PazarlÄ±k Ge\xe7miÅŸini G\xf6r"]})]}),"pending"===a.status&&(0,s.jsxs)("div",{className:"space-y-2",children:["price_agreed"===a.negotiationStatus?(0,s.jsxs)(R.z,{onClick:()=>ag(a.id),disabled:ek,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"TakasÄ± BaÅŸlat (",a.pendingValorAmount||a.agreedPriceRequester," Valor)"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.z,{onClick:()=>{et(a),e9((r?a.agreedPriceOwner:a.agreedPriceRequester)?.toString()||a.product.valorPrice.toString()),e8(!0)},disabled:ek,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),(r?a.agreedPriceOwner:a.agreedPriceRequester)!==null?"FiyatÄ± DeÄŸiÅŸtir":"Fiyat \xd6ner"]}),r&&(0,s.jsxs)(R.z,{onClick:()=>aC(a.id),disabled:ek,variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-1"})," Reddet"]})]}),!r&&"price_agreed"!==a.negotiationStatus&&(0,s.jsx)("p",{className:"text-xs text-center text-gray-500",children:"PazarlÄ±k devam ediyor. KarÅŸÄ± tarafla aynÄ± fiyatÄ± girdiÄŸinizde anlaÅŸma saÄŸlanÄ±r."})]}),"accepted"===a.status&&a.qrCode&&r&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-green-50 border border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{className:"font-medium text-green-800",children:"Takas KodlarÄ± HazÄ±r!"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"bg-white p-2 rounded-lg border",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"QR Kod"}),(0,s.jsxs)("p",{className:"font-mono font-semibold text-xs break-all",children:[a.qrCode?.slice(0,20),"..."]})]}),(0,s.jsxs)("div",{className:"bg-white p-2 rounded-lg border",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"6 Haneli Kod"}),(0,s.jsx)("p",{className:"font-mono font-bold text-xl text-green-600 tracking-widest",children:a.deliveryVerificationCode})]})]}),(0,s.jsx)("p",{className:"text-xs text-green-700 mt-2",children:"\uD83D\uDCCD Teslim noktasÄ±nda bu kodlarÄ± alÄ±cÄ±ya g\xf6sterin."})]}),(0,s.jsxs)(R.z,{onClick:()=>{et(a),J(!0)},className:"w-full",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"QR Kodu B\xfcy\xfck G\xf6ster"]})]}),"accepted"===a.status&&a.qrCode&&n&&(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50 border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{className:"font-medium text-blue-800",children:"Takas OnaylandÄ±!"})]}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"SatÄ±cÄ± teslimat noktasÄ±nÄ± belirledi. BuluÅŸma zamanÄ±nÄ± mesaj \xfczerinden koordine edin."}),(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"â³ SatÄ±cÄ±dan QR kodunu teslim noktasÄ±nda alacaksÄ±nÄ±z."})]}),"accepted"===a.status&&!a.qrCode&&r&&(0,s.jsxs)(R.z,{onClick:()=>{et(a),L(!0)},className:"w-full bg-gradient-to-r from-purple-500 to-blue-500",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Teslimat NoktasÄ± Belirle & QR OluÅŸtur"]}),("awaiting_delivery"===a.status||"qr_scanned"===a.status)&&a.qrCode&&r&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(R.z,{onClick:()=>{et(a),J(!0)},className:"w-full",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"QR Kodu G\xf6ster"]}),"qr_scanned"===a.status&&(0,s.jsx)("p",{className:"text-sm text-center text-indigo-600",children:"âœ… AlÄ±cÄ± QR kodu taradÄ±. DoÄŸrulama kodu bekleniyor..."})]}),"awaiting_delivery"===a.status&&n&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50 border border-blue-200 text-center",children:[(0,s.jsx)(v.Z,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"SatÄ±cÄ±dan kod bekleniyor"}),(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"SatÄ±cÄ± \xfcr\xfcn\xfc bÄ±raktÄ±ÄŸÄ±nda size email ile 6 haneli kod g\xf6nderecek."})]}),(0,s.jsxs)(R.z,{onClick:()=>{et(a),eI(!0)},className:"w-full bg-gradient-to-r from-purple-500 to-blue-500",children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Kodu Gir & Teslim Al"]}),(0,s.jsx)("p",{className:"text-xs text-center text-gray-500",children:"Kodu email ile aldÄ±ysanÄ±z yukarÄ±daki butona tÄ±klayÄ±n"})]}),"qr_scanned"===a.status&&n&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-green-50 border border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{className:"font-medium text-green-800",children:"\uD83D\uDCE7 Kod Email ile G\xf6nderildi!"})]}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Email adresinize 6 haneli doÄŸrulama kodu g\xf6nderildi. \xdcr\xfcn\xfc kontrol edip kodu girin."})]}),(0,s.jsxs)(R.z,{onClick:()=>{et(a),eI(!0)},className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 py-6",children:[(0,s.jsx)(w.Z,{className:"w-5 h-5 mr-2"}),"Kodu Gir & Teslim Al"]})]}),"delivered"===a.status&&n&&!a.receiverConfirmed&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(R.z,{onClick:()=>aK(a.id),disabled:ek,className:"w-full bg-green-500 hover:bg-green-600",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"\xdcr\xfcn\xfc Onayla - TakasÄ± Tamamla"]}),(0,s.jsxs)(R.z,{onClick:()=>{et(a),ee(!0)},variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4 mr-2"}),"Sorun Bildir"]})]}),"delivered"===a.status&&r&&(0,s.jsx)("p",{className:"text-sm text-center text-purple-600",children:"AlÄ±cÄ± onayÄ± bekleniyor..."}),"delivered"===a.status&&(0,s.jsxs)("button",{onClick:()=>aw(a),className:"mt-2 w-full flex items-center justify-center gap-2 py-2 px-3 text-sm text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors border border-orange-200",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),"Ä°tiraz S\xfcresini G\xf6r"]}),"completed"===a.status&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Takas BaÅŸarÄ±yla TamamlandÄ±"})]}),"disputed"===a.status&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-amber-600",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Sorun inceleniyor..."})]})]})]},a.id)}),(0,s.jsx)(n.M,{children:I&&ea&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>L(!1),children:(0,s.jsx)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\uD83D\uDCCD Teslimat NoktasÄ± Belirle"}),(0,s.jsxs)("div",{className:"mb-6 p-4 rounded-xl bg-amber-50 border border-amber-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(z.Z,{className:"w-5 h-5 text-amber-600"}),(0,s.jsx)("span",{className:"font-medium text-amber-800",children:"Paketleme FotoÄŸrafÄ± (Zorunlu)"})]}),(0,s.jsx)("p",{className:"text-xs text-amber-700 mb-3",children:"\xdcr\xfcn\xfcn paketlenmiÅŸ halinin fotoÄŸrafÄ±nÄ± \xe7ekin. Bu, takas s\xfcrecinin g\xfcvenliÄŸi i\xe7in gereklidir."}),(0,s.jsx)("input",{ref:e2,type:"file",accept:"image/*",capture:"environment",onChange:e=>aE(e,"packaging"),className:"hidden"}),eJ?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.default,{src:eJ,alt:"Paketleme fotoÄŸrafÄ±",width:200,height:200,className:"w-full h-48 object-cover rounded-lg"}),(0,s.jsx)("button",{onClick:()=>eX(null),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"absolute bottom-2 left-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[(0,s.jsx)(x.Z,{className:"w-3 h-3"})," FotoÄŸraf y\xfcklendi"]})]}):(0,s.jsx)(R.z,{onClick:()=>e2.current?.click(),disabled:e0,variant:"outline",className:"w-full border-dashed border-2 border-amber-300 bg-amber-50 hover:bg-amber-100 h-32",children:e0?(0,s.jsx)(c.Z,{className:"w-6 h-6 animate-spin text-amber-600"}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(S.Z,{className:"w-8 h-8 text-amber-500 mx-auto mb-2"}),(0,s.jsx)("span",{className:"text-amber-700",children:"FotoÄŸraf \xc7ek / Y\xfckle"})]})})]}),(0,s.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,s.jsx)("button",{onClick:()=>er("delivery_point"),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${"delivery_point"===es?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(D.Z,{className:"w-5 h-5 text-purple-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"\uD83D\uDDFAï¸ Teslim NoktasÄ± Se\xe7"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Ä°zmir'deki g\xfcvenli teslim noktalarÄ±ndan birini se\xe7in"})]})]})}),(0,s.jsx)("button",{onClick:()=>er("custom_location"),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${"custom_location"===es?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(k.Z,{className:"w-5 h-5 text-purple-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"\uD83D\uDCCD \xd6zel BuluÅŸma NoktasÄ±"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"AlÄ±cÄ±yla mesajlaÅŸarak belirleyin"})]})]})})]}),"delivery_point"===es&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ä°l\xe7e ve Teslim NoktasÄ± Se\xe7in"}),(0,s.jsxs)("select",{value:el,onChange:e=>ei(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"",children:"\uD83D\uDCCD Teslim noktasÄ± se\xe7iniz..."}),Object.entries(B.reduce((e,a)=>{let t=a.district||"DiÄŸer";return e[t]||(e[t]=[]),e[t].push(a),e},{})).map(([e,a])=>(0,s.jsx)("optgroup",{label:`ðŸ“ ${e}`,children:a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))},e))]}),el&&(0,s.jsx)("div",{className:"mt-3 p-3 rounded-xl bg-purple-50 border border-purple-200",children:(()=>{let e=B.find(e=>e.id===el);return e?(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-purple-800",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-purple-600",children:e.district}),e.address&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.address})]})]}):null})()})]}),"custom_location"===es&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BuluÅŸma NoktasÄ±nÄ± YazÄ±n"}),(0,s.jsx)(K.g,{value:en,onChange:e=>ed(e.target.value),placeholder:"\xd6rn: Forum Bornova AVM, ana giriÅŸ \xf6n\xfc, saat 14:00",rows:3,className:"mb-2"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Ä°pucu: Saat ve detaylÄ± konum bilgisi verin"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(R.z,{variant:"outline",onClick:()=>{L(!1),eX(null)},className:"flex-1",children:"Ä°ptal"}),(0,s.jsx)(R.z,{onClick:az,disabled:ek||!eJ||"delivery_point"===es&&!el||"custom_location"===es&&!en,className:"flex-1 bg-gradient-to-r from-purple-500 to-blue-500",children:ek?(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"QR Kod OluÅŸtur"]})})]}),!eJ&&(0,s.jsx)("p",{className:"text-xs text-center text-amber-600 mt-3",children:"âš ï¸ Devam etmek i\xe7in paketleme fotoÄŸrafÄ± zorunludur"})]})})})}),(0,s.jsx)(n.M,{children:U&&ea?.qrCode&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>{J(!1),eB(!1)},children:(0,s.jsxs)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-sm w-full p-6 text-center max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Teslimat Kodu"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"\xdcr\xfcn\xfc teslim noktasÄ±na bÄ±raktÄ±ktan sonra alÄ±cÄ±ya kodu g\xf6nderin."}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl p-4 mb-4 text-white",children:[(0,s.jsx)("p",{className:"text-xs opacity-80 mb-1",children:"6 Haneli DoÄŸrulama Kodu:"}),(0,s.jsx)("p",{className:"text-3xl font-mono font-bold tracking-[0.3em]",children:ea.deliveryVerificationCode||"------"})]}),(0,s.jsx)(R.z,{onClick:aT,disabled:eQ||eG,className:`w-full mb-3 py-6 text-lg ${eG?"bg-green-500 hover:bg-green-500":"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600"}`,children:eQ?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 mr-2 animate-spin"}),"G\xf6nderiliyor..."]}):eG?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Kod Email ile G\xf6nderildi!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 mr-2"}),"\uD83D\uDCE7 Kodu AlÄ±cÄ±ya Email G\xf6nder"]})}),eG&&(0,s.jsx)("div",{className:"p-3 rounded-xl bg-green-50 border border-green-200 mb-4",children:(0,s.jsx)("p",{className:"text-sm text-green-700",children:"âœ… DoÄŸrulama kodu alÄ±cÄ±nÄ±n email adresine g\xf6nderildi!"})}),(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50 border border-blue-200 mb-4 text-left",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-blue-700 mb-2",children:"\uD83D\uDCCB NasÄ±l \xc7alÄ±ÅŸÄ±r?"}),(0,s.jsxs)("ol",{className:"text-xs text-blue-600 space-y-1 list-decimal list-inside",children:[(0,s.jsx)("li",{children:"\xdcr\xfcn\xfc teslim noktasÄ±na bÄ±rakÄ±n"}),(0,s.jsx)("li",{children:'"Kodu Email G\xf6nder" butonuna tÄ±klayÄ±n'}),(0,s.jsx)("li",{children:"AlÄ±cÄ± emailindeki kodu sisteme girer"}),(0,s.jsx)("li",{children:"Teslimat onaylanÄ±r, Valor puanÄ±nÄ±z aktarÄ±lÄ±r"})]})]}),(0,s.jsx)("div",{className:"p-3 rounded-xl bg-amber-50 border border-amber-200 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-amber-700",children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 inline mr-1"}),"Kod 24 saat ge\xe7erlidir. AlÄ±cÄ± \xfcr\xfcn\xfc kontrol ettikten sonra kodu girecek."]})}),(0,s.jsxs)("details",{className:"text-left mb-4",children:[(0,s.jsx)("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"\uD83D\uDD0D QR Kod (Alternatif Y\xf6ntem)"}),(0,s.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 rounded-xl",children:[(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(0,s.jsx)(l.default,{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(ea.qrCode)}`,alt:"QR Kod",width:150,height:150})}),(0,s.jsx)("p",{className:"text-xs font-mono text-gray-500 break-all text-center",children:ea.qrCode})]})]}),(0,s.jsx)(R.z,{onClick:()=>{J(!1),eB(!1)},variant:"outline",className:"w-full",children:"Kapat"})]})})}),(0,s.jsx)(n.M,{children:eH&&ea&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>{eI(!1),eU(""),eW(null),eC("")},children:(0,s.jsxs)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,s.jsx)(w.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"DoÄŸrulama Kodu Gir"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center mb-4",children:"SatÄ±cÄ±nÄ±n g\xf6nderdiÄŸi 6 haneli doÄŸrulama kodunu girin."}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl mb-4",children:[ea.product.images?.[0]&&(0,s.jsx)("div",{className:"relative w-14 h-14 rounded-lg overflow-hidden",children:(0,s.jsx)(l.default,{src:ea.product.images[0],alt:ea.product.title,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:ea.product.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["SatÄ±cÄ±: ",(0,F.Gf)(ea.owner)]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"6 Haneli DoÄŸrulama Kodu"}),(0,s.jsx)("input",{type:"text",value:eL,onChange:e=>eU(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"______",className:"w-full px-4 py-4 text-center text-3xl font-mono tracking-[0.5em] border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none",maxLength:6}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"Email adresinize g\xf6nderilen kodu girin"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCF8 \xdcr\xfcn FotoÄŸrafÄ± (Zorunlu)"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Teslim aldÄ±ÄŸÄ±nÄ±z \xfcr\xfcn\xfcn fotoÄŸrafÄ±nÄ± y\xfckleyin. Bu, olasÄ± anlaÅŸmazlÄ±klarda kanÄ±t olarak kullanÄ±lacaktÄ±r."}),eY?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"relative w-full aspect-video rounded-xl overflow-hidden bg-gray-100",children:(0,s.jsx)(l.default,{src:eY,alt:"Teslim fotoÄŸrafÄ±",fill:!0,className:"object-cover"})}),(0,s.jsx)("button",{onClick:()=>eW(null),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"file",ref:e5,onChange:async e=>{let a=e.target.files?.[0];if(a){e1(!0);try{let e=new FileReader;e.onload=e=>{eW(e.target?.result)},e.readAsDataURL(a)}catch(e){eC("FotoÄŸraf y\xfcklenemedi")}finally{e1(!1)}}},accept:"image/*",capture:"environment",className:"hidden"}),(0,s.jsxs)(R.z,{onClick:()=>e5.current?.click(),variant:"outline",className:"w-full py-8 border-dashed border-2",disabled:e0,children:[e0?(0,s.jsx)(c.Z,{className:"w-5 h-5 mr-2 animate-spin"}):(0,s.jsx)(z.Z,{className:"w-5 h-5 mr-2"}),"FotoÄŸraf \xc7ek / Y\xfckle"]})]})]}),(0,s.jsx)("div",{className:"p-3 rounded-xl bg-amber-50 border border-amber-200 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-amber-700",children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 inline mr-1"}),"Kodu girmeden \xf6nce \xfcr\xfcn\xfc fiziksel olarak kontrol edin. Kod girildikten sonra teslimat onaylanmÄ±ÅŸ sayÄ±lÄ±r."]})}),ew&&(0,s.jsx)("div",{className:"p-3 rounded-xl bg-red-50 border border-red-200 mb-4",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:ew})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R.z,{onClick:aZ,disabled:ek||6!==eL.length||!eY,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 py-6 text-lg",children:ek?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 mr-2 animate-spin"}),"Ä°ÅŸleniyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{className:"w-5 h-5 mr-2"}),"TeslimatÄ± Onayla"]})}),(0,s.jsx)(R.z,{onClick:()=>{eI(!1),eU(""),eW(null),eC("")},variant:"outline",className:"w-full",children:"Ä°ptal"})]})]})})}),(0,s.jsx)(n.M,{children:X&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>{aq(),Y(!1),eA("qr"),eF(""),eM("")},children:(0,s.jsxs)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${"qr"===eR?"bg-purple-500 text-white":"bg-green-500 text-white"}`,children:"qr"===eR?"1":"âœ“"}),(0,s.jsx)("div",{className:"w-8 h-1 bg-gray-200 rounded",children:(0,s.jsx)("div",{className:`h-full rounded transition-all ${"verify"===eR?"w-full bg-purple-500":"w-0"}`})}),(0,s.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${"verify"===eR?"bg-purple-500 text-white":"bg-gray-200 text-gray-500"}`,children:"2"})]}),"qr"===eR&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"QR Kod Tara"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center mb-4",children:"SatÄ±cÄ±nÄ±n size g\xf6nderdiÄŸi QR kodu tarayÄ±n. QR tarandÄ±ÄŸÄ±nda emailinize 6 haneli doÄŸrulama kodu gelecek."}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:`relative rounded-xl overflow-hidden bg-black ${eD?"block":"hidden"}`,children:[(0,s.jsx)("div",{id:eE,className:"w-full",style:{minHeight:"300px"}}),(0,s.jsx)("div",{className:"absolute bottom-4 left-0 right-0 text-center z-10",children:(0,s.jsx)("span",{className:"bg-black/70 text-white text-sm px-4 py-2 rounded-full inline-flex items-center gap-2",children:e_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}),"QR kod aranÄ±yor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-green-400"}),"QR kod bulundu!"]})})})]}),eD?(0,s.jsxs)(R.z,{variant:"outline",onClick:aq,className:"w-full mt-2",size:"sm",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-1"})," KamerayÄ± Kapat"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.z,{onClick:aP,className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 mb-3 py-6 text-lg",children:[(0,s.jsx)(z.Z,{className:"w-6 h-6 mr-2"}),"\uD83D\uDCF7 Kamera ile QR Tara"]}),(0,s.jsx)("p",{className:"text-xs text-center text-gray-500 mb-2",children:"KameranÄ±zÄ± QR koda doÄŸrultun, otomatik taranacak"}),eZ&&(0,s.jsx)("p",{className:"text-xs text-amber-600 text-center mb-2",children:eZ})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2 text-center",children:"veya QR kodu manuel girin:"}),(0,s.jsx)("input",{type:"text",value:ec,onChange:e=>eo(e.target.value.toUpperCase()),placeholder:"TAKAS-XXXXXX-XXXX",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 text-center font-mono text-lg uppercase mb-4"})]}),ew&&(0,s.jsx)("p",{className:"text-sm text-red-600 mb-4 text-center",children:ew}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(R.z,{variant:"outline",onClick:()=>{aq(),Y(!1),eo(""),eC(""),eP("")},className:"flex-1",children:"Ä°ptal"}),(0,s.jsx)(R.z,{onClick:aR,disabled:ek||!ec.trim(),className:"flex-1 bg-gradient-to-r from-purple-500 to-blue-500",children:ek?(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P,{className:"w-4 h-4 mr-2"}),"QR Tara"]})})]})]}),"verify"===eR&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-green-600"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Teslim Onayla"})]}),(0,s.jsx)("div",{className:"p-4 rounded-xl bg-green-50 border border-green-200 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-green-700 text-center",children:["âœ… QR kod baÅŸarÄ±yla tarandÄ±!",(0,s.jsx)("br",{}),"\uD83D\uDCE7 Email adresinize 6 haneli doÄŸrulama kodu g\xf6nderildi."]})}),(0,s.jsxs)("div",{className:"mb-4 p-4 rounded-xl bg-red-50 border-2 border-red-300",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(z.Z,{className:"w-5 h-5 text-red-600"}),(0,s.jsx)("span",{className:"font-bold text-red-800",children:"Teslim FotoÄŸrafÄ± (Zorunlu) *"})]}),(0,s.jsx)("p",{className:"text-xs text-red-700 mb-3",children:"âš ï¸ \xdcr\xfcn\xfc kontrol ettikten sonra fotoÄŸraf \xe7ekin. Bu fotoÄŸraf, dispute durumunda KRÄ°TÄ°K kanÄ±t olarak kullanÄ±lÄ±r!"}),(0,s.jsx)("input",{ref:e5,type:"file",accept:"image/*",capture:"environment",onChange:e=>aE(e,"receiver"),className:"hidden"}),eY?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.default,{src:eY,alt:"Teslim fotoÄŸrafÄ±",width:200,height:200,className:"w-full h-32 object-cover rounded-lg"}),(0,s.jsx)("button",{onClick:()=>eW(null),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"absolute bottom-2 left-2 bg-green-600 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1 shadow-lg",children:[(0,s.jsx)(x.Z,{className:"w-3 h-3"})," âœ… FotoÄŸraf HazÄ±r"]})]}):(0,s.jsx)(R.z,{onClick:()=>e5.current?.click(),disabled:e0,size:"sm",className:"w-full border-2 border-dashed border-red-400 bg-white hover:bg-red-50 text-red-600",children:e0?(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{className:"w-4 h-4 mr-2"}),"\uD83D\uDCF8 FotoÄŸraf \xc7ek (Zorunlu)"]})})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center mb-2",children:"Emailinizdeki 6 haneli kodu girin:"}),(0,s.jsx)("input",{type:"text",value:eK,onChange:e=>eF(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"w-full px-4 py-4 rounded-xl border-2 border-purple-300 focus:ring-2 focus:ring-purple-500 text-center font-mono text-3xl tracking-[0.5em] mb-4"}),(0,s.jsx)("div",{className:"p-3 rounded-xl bg-amber-50 border border-amber-200 mb-4",children:(0,s.jsx)("p",{className:"text-xs text-amber-700",children:"âš ï¸ Kodu girmeden \xf6nce \xfcr\xfcn\xfc mutlaka kontrol edin! Kod girildikten sonra teslimat onaylanmÄ±ÅŸ sayÄ±lÄ±r."})}),ew&&(0,s.jsx)("p",{className:"text-sm text-red-600 mb-4 text-center",children:ew}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(R.z,{variant:"outline",onClick:()=>{eA("qr"),eF(""),eW(null),eC("")},className:"flex-1",children:"Geri"}),(0,s.jsx)(R.z,{onClick:aA,disabled:ek||6!==eK.length||!eY,className:`flex-1 ${eY?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gray-400"}`,children:ek?(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}):eY?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"Teslim Al"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{className:"w-4 h-4 mr-2"}),"\xd6nce FotoÄŸraf Y\xfckle"]})})]})]})]})})}),(0,s.jsx)(n.M,{children:W&&ea&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>ee(!1),children:(0,s.jsx)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(C.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2 text-center",children:"Sorun Bildir"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-6 text-center",children:"\xdcr\xfcnle ilgili bir sorun mu var? L\xfctfen detaylarÄ± paylaÅŸÄ±n."}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sorun T\xfcr\xfc *"}),(0,s.jsxs)("select",{value:em,onChange:e=>ex(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"",children:"Se\xe7iniz..."}),(0,s.jsx)("option",{value:"not_as_described",children:"A\xe7Ä±klamayla uyuÅŸmuyor"}),(0,s.jsx)("option",{value:"defect",children:"ArÄ±za/Bozukluk var"}),(0,s.jsx)("option",{value:"damaged",children:"HasarlÄ±/KÄ±rÄ±k"}),(0,s.jsx)("option",{value:"missing_parts",children:"Eksik par\xe7a"}),(0,s.jsx)("option",{value:"other",children:"DiÄŸer"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DetaylÄ± A\xe7Ä±klama * (min. 20 karakter)"}),(0,s.jsx)(K.g,{value:eu,onChange:e=>eh(e.target.value),placeholder:"Sorunu detaylÄ± bir ÅŸekilde a\xe7Ä±klayÄ±n...",rows:3}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[eu.length,"/20 karakter"]})]}),(0,s.jsxs)("div",{className:"mb-4 p-4 rounded-xl bg-red-50 border-2 border-red-300",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(z.Z,{className:"w-5 h-5 text-red-600"}),(0,s.jsx)("span",{className:"font-bold text-red-800",children:"KanÄ±t FotoÄŸraflarÄ± (Zorunlu) *"})]}),(0,s.jsx)("p",{className:"text-xs text-red-700 mb-3",children:"\uD83D\uDCF8 Sorunu g\xf6steren fotoÄŸraflar y\xfckleyin. En az 1, en fazla 5 fotoÄŸraf."}),(0,s.jsx)("input",{ref:ej,type:"file",accept:"image/*",capture:"environment",onChange:e=>aE(e,"dispute"),className:"hidden"}),ep.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:ep.map((e,a)=>(0,s.jsxs)("div",{className:"relative aspect-square",children:[(0,s.jsx)(l.default,{src:e,alt:`KanÄ±t ${a+1}`,fill:!0,className:"object-cover rounded-lg"}),(0,s.jsx)("button",{onClick:()=>eg(e=>e.filter((e,t)=>t!==a)),className:"absolute -top-2 -right-2 bg-red-500 text-white p-1 rounded-full shadow-lg",children:(0,s.jsx)(m.Z,{className:"w-3 h-3"})})]},a))}),ep.length<5&&(0,s.jsx)(R.z,{onClick:()=>ej.current?.click(),disabled:eb,size:"sm",className:"w-full border-2 border-dashed border-red-400 bg-white hover:bg-red-50 text-red-600",children:eb?(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{className:"w-4 h-4 mr-2"}),0===ep.length?"\uD83D\uDCF8 FotoÄŸraf Ekle (Zorunlu)":`ðŸ“¸ FotoÄŸraf Ekle (${ep.length}/5)`]})}),ep.length>0&&(0,s.jsxs)("div",{className:"mt-2 bg-green-100 text-green-700 px-2 py-1 rounded-lg text-xs text-center",children:["âœ… ",ep.length," fotoÄŸraf y\xfcklendi"]})]}),(0,s.jsx)("div",{className:"p-3 rounded-xl bg-amber-50 border border-amber-200 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-amber-700",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 inline mr-1"}),"YanlÄ±ÅŸ veya asÄ±lsÄ±z raporlar g\xfcven puanÄ±nÄ±zÄ± d\xfcÅŸ\xfcrebilir."]})}),ew&&(0,s.jsx)("div",{className:"p-3 rounded-xl bg-red-50 border border-red-200 mb-4",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:ew})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(R.z,{variant:"outline",onClick:()=>{ee(!1),ex(""),eh(""),eg([]),eC("")},className:"flex-1",children:"Ä°ptal"}),(0,s.jsx)(R.z,{onClick:aF,disabled:ek||!em||eu.length<20||0===ep.length,className:`flex-1 ${ep.length>0?"bg-red-500 hover:bg-red-600":"bg-gray-400"}`,children:ek?(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}):"Rapor G\xf6nder"})]})]})})})}),(0,s.jsx)(n.M,{children:e6&&ea&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>e8(!1),children:(0,s.jsx)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:(0,s.jsx)(b.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Fiyat \xd6ner"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ea.product.title})]})]}),(0,s.jsx)("div",{className:"mb-4 p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"\xdcr\xfcn FiyatÄ±"}),(0,s.jsxs)("p",{className:"font-semibold text-purple-600 dark:text-purple-400",children:[ea.product.valorPrice," Valor"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"KarÅŸÄ± Taraf \xd6nerisi"}),(0,s.jsx)("p",{className:"font-semibold text-green-600 dark:text-green-400",children:ea.owner.id===e?null!==ea.agreedPriceRequester?`${ea.agreedPriceRequester} Valor`:"Hen\xfcz yok":null!==ea.agreedPriceOwner?`${ea.agreedPriceOwner} Valor`:"Hen\xfcz yok"})]})]})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sizin Fiyat \xd6neriniz (Valor)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",value:e7,onChange:e=>e9(e.target.value),min:"0",max:2*ea.product.valorPrice,className:"w-full px-4 py-3 pr-16 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 text-lg font-semibold",placeholder:"0"}),(0,s.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 font-medium",children:"Valor"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"\uD83D\uDCA1 KarÅŸÄ± tarafla aynÄ± fiyatÄ± girdiÄŸinizde anlaÅŸma saÄŸlanÄ±r."})]}),ew&&(0,s.jsx)("div",{className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200 text-sm text-red-700",children:ew}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(R.z,{variant:"outline",onClick:()=>{e8(!1),e9(""),eC("")},className:"flex-1",children:"Ä°ptal"}),(0,s.jsx)(R.z,{onClick:ap,disabled:ek||!e7||0>parseInt(e7),className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500",children:ek?(0,s.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.Z,{className:"w-4 h-4 mr-2"}),"Fiyat \xd6ner"]})})]})]})})})}),(0,s.jsx)(n.M,{children:ey&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4",onClick:ah,children:(0,s.jsx)(d.E.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white rounded-3xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center shadow-lg",children:(0,s.jsx)(h.Z,{className:"w-10 h-10 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83C\uDF89 Ä°lk TakasÄ±nÄ±z!"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Teslimat s\xfcrecini adÄ±m adÄ±m anlatalÄ±m"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4 p-4 rounded-2xl bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold shrink-0",children:"1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-blue-900",children:"\uD83D\uDCCD Teslim NoktasÄ± Se\xe7in"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"G\xfcvenli bir teslim noktasÄ± (AVM, polis yanÄ± vb.) veya kendi belirttiÄŸiniz bir konum se\xe7in."})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 rounded-2xl bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold shrink-0",children:"2"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-purple-900",children:"\uD83D\uDCF8 Paket FotoÄŸrafÄ± \xc7ekin"}),(0,s.jsx)("p",{className:"text-sm text-purple-700 mt-1",children:"\xdcr\xfcn\xfc vermeden \xf6nce paket halinde fotoÄŸrafÄ±nÄ± \xe7ekin. Bu, dispute durumunda kanÄ±t olacak."})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 rounded-2xl bg-gradient-to-r from-green-50 to-green-100 border border-green-200",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold shrink-0",children:"3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-green-900",children:"\uD83D\uDD10 QR Kod OluÅŸturun"}),(0,s.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Sistem size \xf6zel bir QR kod ve 6 haneli doÄŸrulama kodu \xfcretecek. Bu kodu SADECE teslim anÄ±nda paylaÅŸÄ±n."})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 rounded-2xl bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center text-white font-bold shrink-0",children:"4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-amber-900",children:"\uD83D\uDCF1 AlÄ±cÄ± QR Tarar"}),(0,s.jsxs)("p",{className:"text-sm text-amber-700 mt-1",children:["AlÄ±cÄ± QR kodu tarar â†’ Email'ine gelen 6 haneli kodu girer â†’ ",(0,s.jsx)("strong",{children:"Zorunlu fotoÄŸraf \xe7eker"})," â†’ Teslimat onaylanÄ±r."]})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 rounded-2xl bg-gradient-to-r from-red-50 to-red-100 border border-red-200",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-bold shrink-0",children:"5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-red-900",children:"â° 24 Saat Kontrol S\xfcresi"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:'Teslimat sonrasÄ± alÄ±cÄ± 24 saat i\xe7inde \xfcr\xfcn\xfc kontrol eder. Sorun varsa "Dispute" a\xe7abilir. Yoksa Valor otomatik aktarÄ±lÄ±r.'})]})]})]}),(0,s.jsx)("div",{className:"mt-6 p-4 rounded-2xl bg-gradient-to-r from-gray-100 to-gray-200 border border-gray-300",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(T.Z,{className:"w-6 h-6 text-gray-700 shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-800",children:"G\xfcvenlik Ä°pu\xe7larÄ±"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-600 mt-2 space-y-1",children:[(0,s.jsx)("li",{children:"âœ… Teslim noktasÄ±nda buluÅŸun"}),(0,s.jsx)("li",{children:"âœ… \xdcr\xfcn\xfc teslim etmeden \xf6nce fotoÄŸraflayÄ±n"}),(0,s.jsx)("li",{children:"âœ… QR kodu g\xf6stermeden \xf6nce \xfcr\xfcn\xfc inceletin"}),(0,s.jsx)("li",{children:"âœ… Sorun olursa 24 saat i\xe7inde dispute a\xe7Ä±n"})]})]})]})}),(0,s.jsx)(R.z,{onClick:ah,className:"w-full mt-6 bg-gradient-to-r from-orange-500 to-red-500 text-white py-4 text-lg font-bold shadow-lg",children:"AnladÄ±m, Devam Et! \uD83D\uDE80"})]})})})}),(0,s.jsx)(n.M,{children:ae&&ea&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>aa(!1),children:(0,s.jsx)(d.E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"\uD83D\uDCCA PazarlÄ±k Ge\xe7miÅŸi"}),(0,s.jsx)("button",{onClick:()=>aa(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,s.jsx)(m.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-2xl mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-white overflow-hidden",children:(0,s.jsx)(l.default,{src:ea.product.images[0]||"/placeholder.png",alt:ea.product.title,width:48,height:48,className:"object-cover w-full h-full"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:ea.product.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["BaÅŸlangÄ±\xe7: ",ea.product.valorPrice," Valor"]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-xl text-center",children:[(0,s.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"Sizin Teklifiniz"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-blue-700",children:[ea.agreedPriceRequester||"-"," V"]})]}),(0,s.jsxs)("div",{className:"p-3 bg-purple-50 rounded-xl text-center",children:[(0,s.jsx)("p",{className:"text-xs text-purple-600 mb-1",children:"KarÅŸÄ± Teklif"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-purple-700",children:[ea.agreedPriceOwner||"-"," V"]})]})]}),ea.maxCounterOffers&&(0,s.jsx)("div",{className:"p-3 bg-orange-50 rounded-xl mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-orange-700",children:"Kalan KarÅŸÄ± Teklif HakkÄ±"}),(0,s.jsxs)("span",{className:"font-bold text-orange-600",children:[(ea.maxCounterOffers||5)-(ea.counterOfferCount||0)," / ",ea.maxCounterOffers||5]})]})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700 mb-3",children:"PazarlÄ±k Ge\xe7miÅŸi"}),ar?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(E.Z,{className:"w-6 h-6 animate-spin text-purple-500"})}):0===at.length?(0,s.jsx)("p",{className:"text-center text-gray-500 py-4",children:"Hen\xfcz pazarlÄ±k yapÄ±lmamÄ±ÅŸ"}):(0,s.jsx)("div",{className:"space-y-3",children:at.map((e,a)=>(0,s.jsxs)("div",{className:`p-3 rounded-xl ${e.isCurrentUser?"bg-blue-50 border-l-4 border-blue-500":"bg-gray-50 border-l-4 border-gray-300"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("span",{className:`text-xs font-medium ${e.isCurrentUser?"text-blue-600":"text-gray-600"}`,children:[e.isCurrentUser?"Siz":"KarÅŸÄ± Taraf","propose"===e.actionType&&" â€¢ Teklif","counter"===e.actionType&&" â€¢ KarÅŸÄ± Teklif","accept"===e.actionType&&" â€¢ Kabul","reject"===e.actionType&&" â€¢ Red"]}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString("tr-TR")})]}),e.proposedPrice&&(0,s.jsxs)("p",{className:"font-bold text-gray-800",children:[e.proposedPrice," Valor",e.previousPrice&&(0,s.jsxs)("span",{className:"text-sm text-gray-400 ml-2",children:["(\xf6nceki: ",e.previousPrice,")"]})]}),e.message&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]},e.id))})]}),"price_agreed"!==ea.negotiationStatus&&"pending"===ea.status&&(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700 mb-3",children:"KarÅŸÄ± Teklif G\xf6nder"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(A.I,{type:"number",placeholder:"Teklif (Valor)",value:ai,onChange:e=>an(e.target.value),className:"bg-gray-50"}),(0,s.jsx)(K.g,{placeholder:"Mesaj (opsiyonel)",value:ad,onChange:e=>ac(e.target.value),className:"bg-gray-50",rows:2}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(R.z,{onClick:aN,disabled:!ai||ek,className:"flex-1 bg-gradient-to-r from-purple-500 to-blue-500",children:[ek?(0,s.jsx)(E.Z,{className:"w-4 h-4 animate-spin mr-2"}):null,"KarÅŸÄ± Teklif G\xf6nder"]}),ea.agreedPriceOwner&&(0,s.jsxs)(R.z,{onClick:ak,disabled:ek,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500",children:[ek?(0,s.jsx)(E.Z,{className:"w-4 h-4 animate-spin mr-2"}):null,ea.agreedPriceOwner," V Kabul Et"]})]})]})]}),"price_agreed"===ea.negotiationStatus&&(0,s.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-2xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-green-700",children:"Fiyat \xdczerinde AnlaÅŸÄ±ldÄ±!"}),(0,s.jsxs)("p",{className:"text-sm text-green-600",children:["AnlaÅŸÄ±lan Fiyat: ",ea.agreedPriceRequester," Valor"]})]})]})})]})})})}),(0,s.jsx)(n.M,{children:ax&&ea&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>au(!1),children:(0,s.jsx)(d.E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:"â° Ä°tiraz S\xfcresi"}),(0,s.jsx)("button",{onClick:()=>au(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,s.jsx)(m.Z,{className:"w-5 h-5"})})]}),ao?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:`p-6 rounded-2xl mb-6 ${ao.isActive?"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200":"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200"}`,children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:`text-sm mb-2 ${ao.isActive?"text-orange-600":"text-green-600"}`,children:ao.isActive?"Kalan Ä°tiraz S\xfcresi":"Ä°tiraz S\xfcresi Doldu"}),(0,s.jsx)("p",{className:`text-4xl font-bold ${ao.isActive?"text-orange-700":"text-green-700"}`,children:ao.isActive?`${ao.remainingHours} Saat`:"TamamlandÄ±"}),ao.endsAt&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["BitiÅŸ: ",new Date(ao.endsAt).toLocaleString("tr-TR")]})]})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,s.jsx)("span",{children:"BaÅŸlangÄ±\xe7"}),(0,s.jsxs)("span",{children:[ao.hoursTotal," Saat Toplam"]})]}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:`h-full rounded-full transition-all ${ao.isActive?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-green-500 to-emerald-500"}`,style:{width:`${100-ao.remainingHours/ao.hoursTotal*100}%`}})})]}),ea.riskTier&&(0,s.jsx)("div",{className:`p-4 rounded-xl mb-6 ${"low"===ea.riskTier?"bg-green-50":"medium"===ea.riskTier?"bg-yellow-50":"bg-red-50"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Risk Seviyesi"}),(0,s.jsx)("span",{className:`font-bold px-3 py-1 rounded-full text-sm ${"low"===ea.riskTier?"bg-green-200 text-green-700":"medium"===ea.riskTier?"bg-yellow-200 text-yellow-700":"bg-red-200 text-red-700"}`,children:"low"===ea.riskTier?"D\xfcÅŸ\xfck":"medium"===ea.riskTier?"Orta":"Y\xfcksek"})]})}),(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl mb-6",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCCB Ä°tiraz S\xfcresi Nedir?"}),(0,s.jsxs)("p",{className:"text-sm text-blue-700",children:["Teslimat sonrasÄ± ",ao.hoursTotal,' saat i\xe7inde \xfcr\xfcn\xfc kontrol edin. Sorun varsa "Ä°tiraz A\xe7" butonuna tÄ±klayÄ±n. S\xfcre dolduÄŸunda Valor otomatik olarak aktarÄ±lÄ±r.']})]}),ao.canOpenDispute&&(0,s.jsx)(R.z,{onClick:()=>{au(!1),ee(!0)},className:"w-full bg-gradient-to-r from-red-500 to-orange-500 text-white py-4 text-lg font-bold",children:"âš ï¸ Ä°tiraz A\xe7"}),ao.canAutoComplete&&(0,s.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x.Z,{className:"w-6 h-6 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-green-700",children:"Otomatik Tamamlanacak"}),(0,s.jsx)("p",{className:"text-sm text-green-600",children:"Ä°tiraz s\xfcresi dolduÄŸu i\xe7in takas otomatik tamamlanacak."})]})]})})]}):(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)(E.Z,{className:"w-8 h-8 animate-spin text-orange-500"})})]})})})})]})}},39090:function(e,a,t){t.d(a,{Gf:function(){return s}});function s(e){if(!e)return"Anonim";if(e.nickname&&e.nickname.trim())return e.nickname.trim();if(e.name&&e.name.trim()){let a=e.name.trim().split(" ").filter(e=>e.length>0);if(1===a.length)return a[0];if(a.length>=2){let e=a[0],t=a[a.length-1].charAt(0).toUpperCase();return`${e} ${t}.`}}if(e.email){let a=e.email.split("@")[0];return a.length>15?a.substring(0,15)+"...":a}return"Anonim"}},86250:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},91117:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},6524:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]])},35798:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},28576:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},50828:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]])},55404:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},81471:function(e,a,t){t.d(a,{Z:function(){return s}});let s=(0,t(42154).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}}]);