"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6953],{66953:function(e,t,a){a.r(t),a.d(t,{ReviewModal:function(){return p}});var i=a(15444),s=a(89300),r=a(33485),n=a(77248),l=a(79582),c=a(26298),o=a(59335),d=a(31587),m=a(65522),u=a(82717),x=a(2422);let h=[{id:"fast_delivery",tr:"Hızlı Teslimat",en:"Fast Delivery"},{id:"accurate_description",tr:"Doğru A\xe7ıklama",en:"Accurate Description"},{id:"good_communication",tr:"İyi İletişim",en:"Good Communication"},{id:"friendly",tr:"Samimi",en:"Friendly"},{id:"professional",tr:"Profesyonel",en:"Professional"},{id:"punctual",tr:"Dakik",en:"Punctual"}];function p({isOpen:e,onClose:t,swapId:a,otherUser:p,productTitle:g,onSuccess:y}){let{language:b}=(0,u.Z)(),[f,j]=(0,s.useState)(0),[v,w]=(0,s.useState)(0),[N,k]=(0,s.useState)(""),[S,C]=(0,s.useState)([]),[D,E]=(0,s.useState)(!1),[P,T]=(0,s.useState)(""),[z,R]=(0,s.useState)(!1),Z={tr:{title:"Değerlendirme Yap",rateExperience:"Deneyiminizi değerlendirin",selectTags:"Bu takası en iyi tanımlayan \xf6zellikleri se\xe7in",comment:"Yorum (isteğe bağlı)",commentPlaceholder:"Deneyiminizi paylaşın...",submit:"Değerlendirmeyi G\xf6nder",submitting:"G\xf6nderiliyor...",success:"Değerlendirmeniz kaydedildi!",error:"Bir hata oluştu",selectRating:"L\xfctfen bir puan se\xe7in",swapWith:"Takas:"},en:{title:"Leave a Review",rateExperience:"Rate your experience",selectTags:"Select tags that best describe this swap",comment:"Comment (optional)",commentPlaceholder:"Share your experience...",submit:"Submit Review",submitting:"Submitting...",success:"Your review has been saved!",error:"An error occurred",selectRating:"Please select a rating",swapWith:"Swap:"}},M=Z[b]||Z.tr,_=e=>{C(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},A=async()=>{if(0===f){T(M.selectRating);return}E(!0),T("");try{let e=await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:a,rating:f,comment:N.trim()||null,tags:S})});if(e.ok)R(!0),setTimeout(()=>{y?.(),t()},1500);else{let t=await e.json();T(t.error||M.error)}}catch{T(M.error)}finally{E(!1)}};return(0,i.jsx)(o.M,{children:e&&(0,i.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:(0,i.jsxs)(d.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:M.title}),(0,i.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition",children:(0,i.jsx)(r.Z,{className:"w-5 h-5 text-gray-500"})})]}),z?(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)(d.E.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(n.Z,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("p",{className:"text-lg font-medium text-gray-900",children:M.success})]}):(0,i.jsxs)("div",{className:"p-4 space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg",children:p.name?.charAt(0)||"?"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:p.name||"Kullanıcı"}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[M.swapWith," ",g]})]})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:M.rateExperience}),(0,i.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>(0,i.jsx)("button",{onClick:()=>j(e),onMouseEnter:()=>w(e),onMouseLeave:()=>w(0),className:"transition-transform hover:scale-110",children:(0,i.jsx)(l.Z,{className:(0,m.cn)("w-10 h-10 transition-colors",(v||f)>=e?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")})},e))}),(v||f)>0&&(0,i.jsx)("p",{className:"text-sm font-medium text-gray-700 mt-2",children:{1:{tr:"K\xf6t\xfc",en:"Poor"},2:{tr:"Fena Değil",en:"Fair"},3:{tr:"İyi",en:"Good"},4:{tr:"\xc7ok İyi",en:"Very Good"},5:{tr:"M\xfckemmel",en:"Excellent"}}[v||f]?.[b]||""})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:M.selectTags}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>(0,i.jsxs)("button",{onClick:()=>_(e.id),className:(0,m.cn)("px-3 py-1.5 rounded-full text-sm font-medium transition-all",S.includes(e.id)?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-600 border-2 border-transparent hover:bg-gray-200"),children:[S.includes(e.id)&&(0,i.jsx)(c.Z,{className:"w-3 h-3 inline mr-1"}),e[b]||e.tr]},e.id))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-gray-600 block mb-2",children:M.comment}),(0,i.jsx)("textarea",{value:N,onChange:e=>k(e.target.value),placeholder:M.commentPlaceholder,className:"w-full px-3 py-2 border rounded-lg resize-none h-24 focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:500}),(0,i.jsxs)("p",{className:"text-xs text-gray-400 text-right mt-1",children:[N.length,"/500"]})]}),P&&(0,i.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:P}),(0,i.jsx)(x.z,{onClick:A,disabled:D||0===f,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-medium hover:shadow-lg transition disabled:opacity-50",children:D?M.submitting:M.submit})]})]})})})}},26298:function(e,t,a){a.d(t,{Z:function(){return i}});let i=(0,a(42154).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]])}}]);