"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8715],{68715:function(e,t,r){r.r(t),r.d(t,{BadgeDisplay:function(){return y},BadgeSummary:function(){return p}});var a=r(15444),s=r(89300),i=r(59335),l=r(31587),n=r(28764),d=r(53492),c=r(79582),o=r(81059),g=r(66124);let x={bronze:{bg:"bg-orange-100",text:"text-orange-800",border:"border-orange-300"},silver:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300"},gold:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-400"},platinum:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-300"},diamond:{bg:"bg-cyan-100",text:"text-cyan-800",border:"border-cyan-300"}},m={swap:{tr:"Takas",en:"Swap"},trust:{tr:"G\xfcven",en:"Trust"},community:{tr:"Topluluk",en:"Community"},achievement:{tr:"Başarı",en:"Achievement"}};var h=r(82717);function y({userId:e,showAll:t=!0,onBadgeToggle:r,compact:y=!1}){let{language:p}=(0,h.Z)(),[u,b]=(0,s.useState)([]),[f,j]=(0,s.useState)(!0),[v,w]=(0,s.useState)("all"),[N,k]=(0,s.useState)(null);(0,s.useEffect)(()=>{$()},[e]);let $=async()=>{try{let t=await fetch(`/api/badges?userId=${e}`);if(t.ok){let e=await t.json();b(e)}}catch(e){console.error("Failed to fetch badges:",e)}finally{j(!1)}},S=async e=>{if(e.earned&&r)try{(await fetch("/api/badges",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({badgeId:e.id,isDisplayed:!e.isDisplayed})})).ok&&(b(t=>t.map(t=>t.id===e.id?{...t,isDisplayed:!t.isDisplayed}:t)),r(e.id,!e.isDisplayed))}catch(e){console.error("Failed to toggle badge:",e)}},z=u.filter(e=>(!!t||!!e.earned)&&("all"===v||e.category===v)&&(!!t||!e.isSecret||!!e.earned)),Z=u.filter(e=>e.earned).length,D=u.filter(e=>!e.isSecret||e.earned).length,E=["diamond","platinum","gold","silver","bronze"],A=[...z].sort((e,t)=>e.earned&&!t.earned?-1:!e.earned&&t.earned?1:E.indexOf(e.tier)-E.indexOf(t.tier));if(f)return(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6].map(e=>(0,a.jsx)("div",{className:"h-24 bg-gray-200 rounded-xl"},e))})]});if(y){let e=u.filter(e=>e.earned&&e.isDisplayed).slice(0,5);if(0===e.length){let e=u.filter(e=>e.earned).slice(0,3);return 0===e.length?null:(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.map(e=>(0,a.jsx)("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-lg border ${x[e.tier]?.bg||"bg-gray-100"} ${x[e.tier]?.border||"border-gray-300"}`,title:"en"===p&&e.nameEn||e.name,children:e.icon},e.id))})}return(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.map(e=>(0,a.jsx)("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-lg border ${x[e.tier]?.bg||"bg-gray-100"} ${x[e.tier]?.border||"border-gray-300"}`,title:"en"===p&&e.nameEn||e.name,children:e.icon},e.id))})}return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5 text-frozen-500"}),(0,a.jsx)("h3",{className:"font-bold text-gray-800",children:"en"===p?"Badges":"Rozetler"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",Z,"/",D,")"]})]}),Z>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["+",u.filter(e=>e.earned).reduce((e,t)=>e+t.valorReward,0)," Valor"]})]})]}),t&&(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:["all","swap","trust","community","achievement"].map(e=>(0,a.jsx)("button",{onClick:()=>w(e),className:`px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${v===e?"bg-frozen-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"all"===e?"en"===p?"All":"T\xfcm\xfc":("en"===p?m[e]?.en:m[e]?.tr)||e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:(0,a.jsx)(i.M,{children:A.map((e,t)=>{let s=x[e.tier]||x.bronze;return(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:.05*t},onClick:()=>k(N===e.id?null:e.id),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all ${e.earned?`${s.bg} ${s.border} hover:shadow-md`:"bg-gray-50 border-gray-200 opacity-60"}`,children:[e.earned&&(0,a.jsx)("div",{className:`absolute -top-2 -right-2 w-5 h-5 rounded-full ${s.bg} ${s.border} border flex items-center justify-center`,children:(0,a.jsx)(c.Z,{className:`w-3 h-3 ${s.text}`})}),!e.earned&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-3 h-3 text-gray-500"})}),e.earned&&r&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e)},className:`absolute top-1 left-1 w-5 h-5 rounded-full flex items-center justify-center transition-colors ${e.isDisplayed?"bg-green-500 text-white":"bg-gray-200 text-gray-400 hover:bg-gray-300"}`,children:(0,a.jsx)(g.Z,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:`text-3xl mb-2 ${e.earned?"":"grayscale"}`,children:e.icon}),(0,a.jsx)("h4",{className:`text-sm font-semibold ${e.earned?s.text:"text-gray-500"}`,children:"en"===p&&e.nameEn||e.name}),e.valorReward>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["+",e.valorReward," Valor"]})]}),(0,a.jsx)(i.M,{children:N===e.id&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"en"===p&&e.descriptionEn||e.description}),e.earnedAt&&(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-2",children:["✓ ",new Date(e.earnedAt).toLocaleDateString("tr-TR")]})]})})]},e.id)})})}),0===A.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"en"===p?"No badges yet":"Hen\xfcz rozet yok"})]})]})}function p({userId:e}){return(0,a.jsx)(y,{userId:e,compact:!0,showAll:!1})}},81059:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(42154).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},53492:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(42154).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])}}]);