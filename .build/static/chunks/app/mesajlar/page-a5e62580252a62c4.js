(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2084],{34427:function(e,t,r){Promise.resolve().then(r.bind(r,48885))},48885:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(15444),a=r(89300),s=r(75762),i=r(79047),l=r(48001),o=r(41084),c=r(59335),u=r(31587),d=r(1946),m=r(30199),f=r(16629),h=r(4693),p=r(40563),x=r(98155),g=r(81178),y=r(70362),b=r(39090),k=r(10839),v=r(32611),j=r(82717);function w(){let{data:e,status:t}=(0,s.useSession)(),r=(0,i.useRouter)(),w=(0,i.useSearchParams)(),{t:N}=(0,j.Z)(),[T,E]=(0,a.useState)([]),[R,C]=(0,a.useState)(null),[A,O]=(0,a.useState)([]),[M,I]=(0,a.useState)(""),[U,S]=(0,a.useState)(!0),[Z,D]=(0,a.useState)(!1),[L,V]=(0,a.useState)(!1),[P,z]=(0,a.useState)(null),[$,_]=(0,a.useState)(!1),[F,q]=(0,a.useState)(null),[B,G]=(0,a.useState)(!1),H=(0,a.useRef)(null),K=(0,a.useRef)(0),J=e?.user?.email==="join@takas-a.com";(0,a.useEffect)(()=>{if("loading"!==t){if("unauthenticated"===t){r.replace("/giris");return}"authenticated"===t&&(_(!0),W())}},[t]),(0,a.useEffect)(()=>{H.current?.scrollIntoView({behavior:"smooth"})},[A]),(0,a.useEffect)(()=>{let t=w.get("userId"),r=w.get("productId"),n=w.get("productTitle");if(!t||!e?.user)return;let a=T.find(e=>e.otherUser.id===t&&(!r||e.product?.id===r));a?X(a):!U&&T.length>=0&&(C({otherUser:{id:t,name:n?decodeURIComponent(n):"Kullanıcı",image:void 0},product:r?{id:r,title:n?decodeURIComponent(n):"",images:[]}:void 0,lastMessage:{content:"",createdAt:new Date().toISOString(),senderId:""},unreadCount:0}),O([]),D(!1))},[w,T,e,U]);let W=async()=>{if((0,k.s9)()){z("İnternet bağlantınız yok"),S(!1);return}S(!0),z(null);try{let{data:e,ok:t,error:n,status:a}=await (0,k.DV)("/api/messages",{timeout:15e3});if(t&&e){let t=e.conversations||e||[],r=Array.isArray(t)?t:[],n=r.reduce((e,t)=>e+(t.unreadCount||0),0);n>K.current&&K.current>0&&(0,v.hh)(),K.current=n,E(r)}else 401===a?r.replace("/giris"):z(n||"Konuşmalar y\xfcklenemedi")}catch(e){z(e.message||"Beklenmeyen hata")}finally{S(!1)}},Q=async(e,t)=>{if(!(0,k.s9)()){D(!0);try{let r=new URLSearchParams({otherUserId:e});t&&r.append("productId",t);let{data:n,ok:a}=await (0,k.DV)(`/api/messages?${r}`,{timeout:12e3});a&&n&&O(n.messages||[])}catch(e){console.error("Mesajlar y\xfcklenemedi:",e)}finally{D(!1)}}},X=e=>{C(e),Q(e.otherUser.id,e.product?.id)},Y=async e=>{if(e.preventDefault(),M.trim()&&R){if((0,k.s9)()){z("İnternet bağlantınız yok");return}V(!0);try{let{data:e,ok:t,error:r}=await (0,k.Pe)("/api/messages",{receiverId:R.otherUser.id,productId:R.product?.id,content:M.trim()},{timeout:1e4,retries:1});t&&e?(O(t=>[...t,e.message]),I("")):console.error("Mesaj g\xf6nderilemedi:",r)}catch(e){console.error("Mesaj g\xf6nderilemedi:",e)}finally{V(!1)}}},ee=e=>{let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/864e5);return 0===r?t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):1===r?"D\xfcn":r<7?`${r} g\xfcn \xf6nce`:t.toLocaleDateString("tr-TR")},et=async e=>{if(J){G(!0);try{(await fetch("/api/messages",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageId:e})})).ok&&(O(t=>t.filter(t=>t.id!==e)),q(null))}catch(e){console.error("Mesaj silinemedi:",e)}finally{G(!1)}}},er=async e=>{if(J){G(!0);try{(await fetch("/api/messages",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationUserId:e.otherUser.id,productId:e.product?.id})})).ok&&(E(t=>t.filter(t=>!(t.otherUser.id===e.otherUser.id&&t.product?.id===e.product?.id))),q(null),R?.otherUser.id===e.otherUser.id&&C(null))}catch(e){console.error("Konuşma silinemedi:",e)}finally{G(!1)}}};return"loading"===t||U?(0,n.jsx)("div",{className:"min-h-screen pt-16 pb-24 flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,n.jsx)(d.Z,{className:"w-8 h-8 animate-spin text-purple-600"}),(0,n.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:N("loadingMessages")})]})}):P?(0,n.jsx)("div",{className:"min-h-screen pt-16 pb-24 flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 p-6 text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:(0,n.jsx)(m.Z,{className:"w-8 h-8 text-red-500"})}),(0,n.jsx)("p",{className:"text-red-600 dark:text-red-400",children:P}),(0,n.jsx)("button",{onClick:()=>{z(null),W()},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:N("tryAgain")})]})}):(0,n.jsxs)("div",{className:"min-h-screen pt-16 pb-24 bg-gray-50 dark:bg-gray-900",children:[!R&&(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white py-6 px-4",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(m.Z,{className:"w-8 h-8"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:N("myMessages")}),(0,n.jsxs)("p",{className:"text-white/80 text-sm",children:[T.length," ",N("conversationCount")]})]})]})})}),(0,n.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,n.jsx)(c.M,{mode:"wait",children:R?(0,n.jsxs)(u.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex flex-col h-[calc(100vh-8rem)]",children:[(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 p-4 flex items-center gap-3",children:[(0,n.jsx)("button",{onClick:()=>C(null),className:"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,n.jsx)(x.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center overflow-hidden",children:R.otherUser.image?(0,n.jsx)(l.default,{src:R.otherUser.image,alt:R.otherUser.name||"",width:40,height:40,className:"object-cover"}):(0,n.jsx)(h.Z,{className:"w-5 h-5 text-white"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:(0,b.Gf)(R.otherUser)}),R.product&&(0,n.jsxs)(o.default,{href:`/urun/${R.product.id}`,className:"text-xs text-purple-600 dark:text-purple-400 hover:underline truncate block",children:["\uD83D\uDCE6 ",R.product.title]})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[Z?(0,n.jsx)("div",{className:"flex justify-center py-8",children:(0,n.jsx)(d.Z,{className:"w-6 h-6 animate-spin text-purple-600"})}):A.map(t=>(0,n.jsxs)("div",{className:`flex items-end gap-2 group ${t.senderId===e?.user?.id?"justify-end":"justify-start"}`,children:[t.senderId!==e?.user?.id&&(0,n.jsx)("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center overflow-hidden flex-shrink-0 mb-1",children:R?.otherUser?.image?(0,n.jsx)(l.default,{src:R.otherUser.image,alt:"",width:28,height:28,className:"object-cover w-full h-full"}):(0,n.jsx)(h.Z,{className:"w-3.5 h-3.5 text-white"})}),J&&t.senderId===e?.user?.id&&(0,n.jsx)("button",{onClick:()=>q({type:"message",id:t.id}),className:"opacity-0 group-hover:opacity-100 p-1 text-red-400 hover:text-red-600 transition-all",title:N("deleteMessage"),children:(0,n.jsx)(p.Z,{className:"w-4 h-4"})}),(0,n.jsxs)("div",{className:`max-w-[70%] px-4 py-2 rounded-2xl ${t.senderId===e?.user?.id?"bg-gradient-to-r from-purple-600 to-blue-500 text-white rounded-br-md":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-md"}`,children:[(0,n.jsx)("p",{className:"text-sm",children:t.content}),(0,n.jsx)("span",{className:`text-xs mt-1 block ${t.senderId===e?.user?.id?"text-white/70":"text-gray-500 dark:text-gray-400"}`,children:ee(t.createdAt)})]}),J&&t.senderId!==e?.user?.id&&(0,n.jsx)("button",{onClick:()=>q({type:"message",id:t.id}),className:"opacity-0 group-hover:opacity-100 p-1 text-red-400 hover:text-red-600 transition-all",title:N("deleteMessage"),children:(0,n.jsx)(p.Z,{className:"w-4 h-4"})})]},t.id)),(0,n.jsx)("div",{ref:H})]}),(0,n.jsx)("form",{onSubmit:Y,className:"p-4 bg-white dark:bg-gray-800 border-t dark:border-gray-700",children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"text",value:M,onChange:e=>I(e.target.value),placeholder:N("typeMessage"),className:"flex-1 px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",disabled:L}),(0,n.jsx)("button",{type:"submit",disabled:!M.trim()||L,className:"px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:L?(0,n.jsx)(d.Z,{className:"w-5 h-5 animate-spin"}):(0,n.jsx)(g.Z,{className:"w-5 h-5"})})]})})]},"chat"):(0,n.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"divide-y divide-gray-100 dark:divide-gray-800",children:0===T.length?(0,n.jsxs)("div",{className:"text-center py-16 px-4",children:[(0,n.jsx)(m.Z,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:N("noMessages")}),(0,n.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:N("startConversationHint")}),(0,n.jsxs)(o.default,{href:"/urunler",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:[(0,n.jsx)(f.Z,{className:"w-5 h-5"}),N("exploreProducts")]})]}):T.map(e=>(0,n.jsxs)("div",{className:"w-full flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,n.jsxs)("button",{onClick:()=>X(e),className:"flex-1 flex items-center gap-4 text-left",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center overflow-hidden",children:e.otherUser.image?(0,n.jsx)(l.default,{src:e.otherUser.image,alt:e.otherUser.name||"",width:56,height:56,className:"object-cover"}):(0,n.jsx)(h.Z,{className:"w-6 h-6 text-white"})}),e.unreadCount>0&&(0,n.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:e.unreadCount})]}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,n.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:(0,b.Gf)(e.otherUser)}),(0,n.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:ee(e.lastMessage.createdAt)})]}),e.product&&(0,n.jsxs)("p",{className:"text-xs text-purple-600 dark:text-purple-400 truncate",children:["\uD83D\uDCE6 ",e.product.title]}),(0,n.jsx)("p",{className:`text-sm truncate ${e.unreadCount>0?"text-gray-900 dark:text-white font-medium":"text-gray-500 dark:text-gray-400"}`,children:e.lastMessage.content})]})]}),J&&(0,n.jsx)("button",{onClick:t=>{t.stopPropagation(),q({type:"conversation",conv:e})},className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:N("deleteConversation"),children:(0,n.jsx)(p.Z,{className:"w-5 h-5"})})]},`${e.otherUser.id}-${e.product?.id||"general"}`))},"list")})}),(0,n.jsx)(c.M,{children:F&&(0,n.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:()=>q(null),children:(0,n.jsxs)(u.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-sm w-full shadow-xl",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,n.jsx)("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:(0,n.jsx)(y.Z,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),(0,n.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"message"===F.type?N("deleteMessage"):N("deleteConversation")})]}),(0,n.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"message"===F.type?N("deleteMessageConfirm"):`${N("deleteConversationConfirmPrefix")}${F.conv?.otherUser.name}${N("deleteConversationConfirmSuffix")}`}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{onClick:()=>q(null),disabled:B,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:N("cancel")}),(0,n.jsxs)("button",{onClick:()=>{"message"===F.type&&F.id?et(F.id):"conversation"===F.type&&F.conv&&er(F.conv)},disabled:B,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[B?(0,n.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}):(0,n.jsx)(p.Z,{className:"w-4 h-4"}),N("delete")]})]})]})})})]})}},39090:function(e,t,r){"use strict";function n(e){if(!e)return"Anonim";if(e.nickname&&e.nickname.trim())return e.nickname.trim();if(e.name&&e.name.trim()){let t=e.name.trim().split(" ").filter(e=>e.length>0);if(1===t.length)return t[0];if(t.length>=2){let e=t[0],r=t[t.length-1].charAt(0).toUpperCase();return`${e} ${r}.`}}if(e.email){let t=e.email.split("@")[0];return t.length>15?t.substring(0,15)+"...":t}return"Anonim"}r.d(t,{Gf:function(){return n}})},32611:function(e,t,r){"use strict";r.d(t,{FC:function(){return l},JE:function(){return f},KB:function(){return i},Ue:function(){return d},hh:function(){return u},jA:function(){return o},rH:function(){return s},s_:function(){return c},wk:function(){return m}});let n=null;function a(){return n||(n=new(window.AudioContext||window.webkitAudioContext)),n}function s(){try{return"off"!==localStorage.getItem("takas-a-sound")}catch{return!0}}function i(e){try{localStorage.setItem("takas-a-sound",e?"on":"off")}catch{}}function l(){try{let e=localStorage.getItem("takas-a-volume");return e?parseFloat(e):.5}catch{return .5}}function o(e){try{localStorage.setItem("takas-a-volume",Math.min(1,Math.max(0,e)).toString())}catch{}}function c(){if(s())try{let e=a(),t=l(),r=e.createOscillator(),n=e.createGain();r.connect(n),n.connect(e.destination),r.frequency.setValueAtTime(880,e.currentTime),r.frequency.setValueAtTime(1108,e.currentTime+.1),r.type="sine",n.gain.setValueAtTime(.3*t,e.currentTime),n.gain.exponentialRampToValueAtTime(.001,e.currentTime+.3),r.start(e.currentTime),r.stop(e.currentTime+.3)}catch{}}function u(){if(s())try{let e=a(),t=l(),r=e.createOscillator(),n=e.createGain();r.connect(n),n.connect(e.destination),r.frequency.setValueAtTime(523,e.currentTime),r.frequency.setValueAtTime(659,e.currentTime+.08),r.type="sine",n.gain.setValueAtTime(.25*t,e.currentTime),n.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2),r.start(e.currentTime),r.stop(e.currentTime+.2)}catch{}}function d(){if(s())try{let e=a(),t=l();[{freq:523,start:0,dur:.15},{freq:659,start:.15,dur:.15},{freq:784,start:.3,dur:.3}].forEach(({freq:r,start:n,dur:a})=>{let s=e.createOscillator(),i=e.createGain();s.connect(i),i.connect(e.destination),s.frequency.value=r,s.type="sine",i.gain.setValueAtTime(.3*t,e.currentTime+n),i.gain.exponentialRampToValueAtTime(.001,e.currentTime+n+a),s.start(e.currentTime+n),s.stop(e.currentTime+n+a)})}catch{}}function m(){if(s())try{let e=a(),t=l();[523,659,784,1047].forEach((r,n)=>{let a=e.createOscillator(),s=e.createGain();a.connect(s),s.connect(e.destination),a.frequency.value=r,a.type="sine";let i=e.currentTime+.12*n;s.gain.setValueAtTime(.25*t,i),s.gain.exponentialRampToValueAtTime(.001,i+.2),a.start(i),a.stop(i+.2)})}catch{}}function f(){if(s())try{let e=a(),t=l(),r=e.createOscillator(),n=e.createGain();r.connect(n),n.connect(e.destination),r.frequency.setValueAtTime(440,e.currentTime),r.frequency.setValueAtTime(550,e.currentTime+.05),r.type="sine",n.gain.setValueAtTime(.15*t,e.currentTime),n.gain.exponentialRampToValueAtTime(.001,e.currentTime+.15),r.start(e.currentTime),r.stop(e.currentTime+.15)}catch{}}},10839:function(e,t,r){"use strict";async function n(e){try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.type,message:e.message,severity:e.severity||"error",userId:e.userId,url:window.location.href,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,metadata:e.metadata?JSON.stringify(e.metadata):void 0})})}catch{console.error("Error reporter failed:",e.message)}}function a(){return!navigator.onLine}r.d(t,{s9:function(){return a},wz:function(){return l},DV:function(){return o},Pe:function(){return c}});let s={OFFLINE:"İnternet bağlantınız yok. L\xfctfen bağlantınızı kontrol edin.",TIMEOUT:"Sunucu yanıt vermedi. L\xfctfen tekrar deneyin.",SERVER_ERROR:"Sunucu hatası oluştu. L\xfctfen daha sonra tekrar deneyin.",NETWORK_ERROR:"Bağlantı hatası. L\xfctfen internet bağlantınızı kontrol edin.",UNAUTHORIZED:"Oturum s\xfcreniz doldu. L\xfctfen tekrar giriş yapın.",FORBIDDEN:"Bu işlem i\xe7in yetkiniz yok.",NOT_FOUND:"İstenen kaynak bulunamadı.",RATE_LIMITED:"\xc7ok fazla istek g\xf6nderdiniz. L\xfctfen biraz bekleyin.",UNKNOWN:"Beklenmeyen bir hata oluştu."};async function i(e,t,r){let i=new AbortController,l=setTimeout(()=>i.abort(),r);try{let r=await fetch(e,{...t,signal:i.signal,headers:{"Content-Type":"application/json",...t.headers}});clearTimeout(l);let a=null,o=r.headers.get("content-type");if(o?.includes("application/json"))try{a=await r.json()}catch{a=null}if(!r.ok){let t=a?.error||a?.message||function(e,t){switch(e){case 401:return s.UNAUTHORIZED;case 403:return s.FORBIDDEN;case 404:return s.NOT_FOUND;case 429:return s.RATE_LIMITED;case 500:case 502:case 503:case 504:return s.SERVER_ERROR;default:return s.UNKNOWN}}(r.status);return r.status>=500&&n({type:"api_error",message:`API ${r.status}: ${e}`,severity:"error",metadata:{url:e,status:r.status,errorMsg:t}}),{data:null,error:t,status:r.status,ok:!1,isOffline:!1,isTimeout:!1}}return{data:a,error:null,status:r.status,ok:!0,isOffline:!1,isTimeout:!1}}catch(e){if(clearTimeout(l),"AbortError"===e.name)return{data:null,error:s.TIMEOUT,status:0,ok:!1,isOffline:!1,isTimeout:!0};return{data:null,error:s.NETWORK_ERROR,status:0,ok:!1,isOffline:a(),isTimeout:!1}}}async function l(e,t={}){let{timeout:r=1e4,retries:n=2,retryDelay:l=1e3,...o}=t;if(a())return{data:null,error:s.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};let c=null;for(let t=0;t<=n;t++){if(t>0&&(await new Promise(e=>setTimeout(e,l)),a()))return{data:null,error:s.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};if((c=await i(e,o,r)).ok||401===c.status||403===c.status||404===c.status||429===c.status)break}return c}async function o(e,t){return l(e,{...t,method:"GET"})}async function c(e,t,r){return l(e,{...r,method:"POST",body:t?JSON.stringify(t):void 0})}},98155:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1946:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},30199:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},16629:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},81178:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},40563:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},70362:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},4693:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(42154).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},41084:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(65558),a=r.n(n)},59335:function(e,t,r){"use strict";r.d(t,{M:function(){return x}});var n=r(89300),a=r(42831);function s(){let e=(0,n.useRef)(!1);return(0,a.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var i=r(46974),l=r(23146),o=r(38819);class c extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:t}){let r=(0,n.useId)(),a=(0,n.useRef)(null),s=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)(()=>{let{width:e,height:n,top:i,left:l}=s.current;if(t||!a.current||!e||!n)return;a.current.dataset.motionPopId=r;let o=document.createElement("style");return document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            top: ${i}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[t]),n.createElement(c,{isPresent:t,childRef:a,sizeRef:s},n.cloneElement(e,{ref:a}))}let d=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:s,presenceAffectsLayout:i,mode:c})=>{let d=(0,o.h)(m),f=(0,n.useId)(),h=(0,n.useMemo)(()=>({id:f,initial:t,isPresent:r,custom:s,onExitComplete:e=>{for(let t of(d.set(e,!0),d.values()))if(!t)return;a&&a()},register:e=>(d.set(e,!1),()=>d.delete(e))}),i?void 0:[r]);return(0,n.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[r]),n.useEffect(()=>{r||d.size||!a||a()},[r]),"popLayout"===c&&(e=n.createElement(u,{isPresent:r},e)),n.createElement(l.O.Provider,{value:h},e)};function m(){return new Map}var f=r(76303),h=r(34815);let p=e=>e.key||"",x=({children:e,custom:t,initial:r=!0,onExitComplete:l,exitBeforeEnter:o,presenceAffectsLayout:c=!0,mode:u="sync"})=>{var m;(0,h.k)(!o,"Replace exitBeforeEnter with mode='wait'");let x=(0,n.useContext)(f.p).forceRender||function(){let e=s(),[t,r]=(0,n.useState)(0),a=(0,n.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,n.useCallback)(()=>i.Wi.postRender(a),[a]),t]}()[0],g=s(),y=function(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}(e),b=y,k=(0,n.useRef)(new Map).current,v=(0,n.useRef)(b),j=(0,n.useRef)(new Map).current,w=(0,n.useRef)(!0);if((0,a.L)(()=>{w.current=!1,function(e,t){e.forEach(e=>{let r=p(e);t.set(r,e)})}(y,j),v.current=b}),m=()=>{w.current=!0,j.clear(),k.clear()},(0,n.useEffect)(()=>()=>m(),[]),w.current)return n.createElement(n.Fragment,null,b.map(e=>n.createElement(d,{key:p(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:u},e)));b=[...b];let N=v.current.map(p),T=y.map(p),E=N.length;for(let e=0;e<E;e++){let t=N[e];-1!==T.indexOf(t)||k.has(t)||k.set(t,void 0)}return"wait"===u&&k.size&&(b=[]),k.forEach((e,r)=>{if(-1!==T.indexOf(r))return;let a=j.get(r);if(!a)return;let s=N.indexOf(r),i=e;i||(i=n.createElement(d,{key:p(a),isPresent:!1,onExitComplete:()=>{k.delete(r);let e=Array.from(j.keys()).filter(e=>!T.includes(e));if(e.forEach(e=>j.delete(e)),v.current=y.filter(t=>{let n=p(t);return n===r||e.includes(n)}),!k.size){if(!1===g.current)return;x(),l&&l()}},custom:t,presenceAffectsLayout:c,mode:u},a),k.set(r,i)),b.splice(s,0,i)}),b=b.map(e=>{let t=e.key;return k.has(t)?e:n.createElement(d,{key:p(e),isPresent:!0,presenceAffectsLayout:c,mode:u},e)}),n.createElement(n.Fragment,null,k.size?b:b.map(e=>(0,n.cloneElement)(e)))}}},function(e){e.O(0,[1791,5558,0,8001,2717,2386,7156,1744],function(){return e(e.s=34427)}),_N_E=e.O()}]);