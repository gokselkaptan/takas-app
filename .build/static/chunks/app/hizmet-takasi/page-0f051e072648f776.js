(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3693],{45305:function(e,a,t){Promise.resolve().then(t.bind(t,95962))},95962:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return V}});var r=t(15444),s=t(89300),l=t(75762),i=t(79047),n=t(31587),d=t(39429),o=t(42154);let c=(0,o.Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var u=t(4693),m=t(62492),x=t(28576),g=t(25422),h=t(88913),b=t(30199);let p=(0,o.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);var f=t(64990),y=t(40563),v=t(2019),k=t(33485),N=t(2422),j=t(74678),w=t(67012),D=t(29530),z=t(91585),C=t(41084),T=t(10839),E=t(82717);let S=[{value:"cleaning",label:"\uD83E\uDDF9 Temizlik",desc:"Ev, ofis, ara\xe7 temizliği"},{value:"electrical",label:"⚡ Elektrik",desc:"Tesisat, tamir, kurulum"},{value:"plumbing",label:"\uD83D\uDD27 Tadilat & Tesisat",desc:"Boya, tamirat, su tesisatı"},{value:"beauty",label:"\uD83D\uDC87 G\xfczellik & Bakım",desc:"Kuaf\xf6r, cilt bakımı, manik\xfcr"},{value:"education",label:"\uD83D\uDC68‍\uD83C\uDFEB Eğitim",desc:"\xd6zel ders, kurs, mentorluk"},{value:"cooking",label:"\uD83C\uDF73 Yemek & Catering",desc:"Aş\xe7ılık, catering, pasta"},{value:"repair",label:"\uD83D\uDEE0️ Tamir & Bakım",desc:"Beyaz eşya, elektronik, ara\xe7"},{value:"delivery",label:"\uD83D\uDE9A Taşıma & Kurye",desc:"Nakliyat, kurye, teslimat"},{value:"design",label:"\uD83D\uDCBB Dijital & Tasarım",desc:"Web, grafik, sosyal medya"},{value:"photography",label:"\uD83D\uDCF8 Fotoğraf & Video",desc:"\xc7ekim, d\xfczenleme, drone"},{value:"other",label:"\uD83D\uDEE0️ Diğer",desc:"Diğer hizmetler"}],O=[{value:"1 saat",label:"1 Saat"},{value:"2 saat",label:"2 Saat"},{value:"4 saat",label:"4 Saat (Yarım G\xfcn)"},{value:"8 saat",label:"8 Saat (Tam G\xfcn)"},{value:"1 hafta",label:"1 Hafta"},{value:"paket",label:"Paket Hizmet"}];function V(){let{data:e,status:a}=(0,l.useSession)(),t=(0,i.useRouter)(),{t:o}=(0,E.Z)(),[k,C]=(0,s.useState)([]),[V,R]=(0,s.useState)([]),[Z,P]=(0,s.useState)(!0),[$,B]=(0,s.useState)(!1),[I,H]=(0,s.useState)("browse"),[M,F]=(0,s.useState)("all"),[L,K]=(0,s.useState)(!1),[U,_]=(0,s.useState)(null),[J,G]=(0,s.useState)(!1),[W,q]=(0,s.useState)(null),[Y,Q]=(0,s.useState)({title:"",description:"",category:"",duration:"1 saat",valorPrice:"",city:"İzmir",district:"",serviceArea:"",wantCategory:"",wantDescription:"",listingType:"individual",businessName:""});(0,s.useEffect)(()=>{X()},[M]),(0,s.useEffect)(()=>{e?.user&&ee()},[e]);let X=async()=>{P(!0);try{let e=new URLSearchParams;"all"!==M&&e.set("category",M),e.set("limit","30");let{data:a,error:t}=await (0,T.wz)(`/api/services?${e}`);a&&!t&&C(a.services||[])}catch(e){console.error(e)}finally{P(!1)}},ee=async()=>{let{data:e}=await (0,T.wz)("/api/services?my=true");e&&R(e.services||[])},ea=async()=>{if(!e){t.push("/giris");return}if(!Y.title||!Y.category||!Y.valorPrice){z.Am.error("Başlık, kategori ve değer zorunludur");return}K(!0);let{data:a,error:r}=await (0,T.wz)("/api/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y),timeout:15e3});if(r){z.Am.error(r),K(!1);return}a?.success&&(z.Am.success("Hizmetiniz listelendi!"),B(!1),Q({title:"",description:"",category:"",duration:"1 saat",valorPrice:"",city:"İzmir",district:"",serviceArea:"",wantCategory:"",wantDescription:"",listingType:"individual",businessName:""}),X(),ee()),K(!1)},et=async e=>{_(e);let{data:a,error:t}=await (0,T.wz)("/api/services",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"toggleStatus"})});a?.success?(z.Am.success("Durum g\xfcncellendi"),ee()):z.Am.error(t||"Hata oluştu"),_(null)},er=async e=>{if(!confirm("Bu hizmeti silmek istediğinizden emin misiniz?"))return;_(e);let{data:a,error:t}=await (0,T.wz)("/api/services",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"delete"})});a?.success?(z.Am.success("Hizmet silindi"),ee()):z.Am.error(t||"Hata oluştu"),_(null)},es=e=>S.find(a=>a.value===e)||{label:"\uD83D\uDEE0️ Diğer",value:"other"},el=a=>{if(!e?.user){t.push("/giris");return}let r=e.user?.id,s=a.user?.id||a.userId;if(s===r){z.Am.error("Kendi hizmetinize mesaj g\xf6nderemezsiniz");return}if(!1===a.acceptsNegotiation){z.Am.error("Bu hizmet sahibi şu anda mesaj kabul etmiyor.");return}let l=new URLSearchParams({userId:s||"",productId:a.id,productTitle:a.title});t.push(`/mesajlar?${l.toString()}`)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-600 via-emerald-500 to-teal-500 text-white py-8 px-4",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold flex items-center gap-2",children:["\uD83E\uDD1D ",o("serviceSwap")]}),(0,r.jsx)("p",{className:"text-white/90 mt-1",children:o("serviceSwapDesc")})]}),(0,r.jsxs)(N.z,{onClick:()=>e?B(!0):t.push("/giris"),className:"bg-white text-green-600 hover:bg-green-50 font-semibold",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 mr-2"}),o("addService")]})]})})}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>H("browse"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"browse"===I?"bg-green-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:["\uD83D\uDD0D ",o("exploreServices")]}),e&&(0,r.jsxs)("button",{onClick:()=>H("my"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"my"===I?"bg-green-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:["\uD83D\uDCCB ",o("myServices")," (",V.length,")"]})]}),"browse"===I&&(0,r.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-6 scrollbar-hide",children:[(0,r.jsx)("button",{onClick:()=>F("all"),className:`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${"all"===M?"bg-green-600 text-white shadow-sm":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-green-400 shadow-sm"}`,children:o("all")}),S.map(e=>(0,r.jsx)("button",{onClick:()=>F(e.value),className:`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${M===e.value?"bg-green-600 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-green-400 shadow-sm"}`,children:e.label},e.value))]}),Z?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full mx-auto"}),(0,r.jsx)("p",{className:"text-gray-500 mt-3",children:o("loading")})]}):"browse"===I?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===k.length?(0,r.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,r.jsx)(c,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:o("noServiceListings")}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:o("beFirst")}),(0,r.jsxs)(N.z,{onClick:()=>e?B(!0):t.push("/giris"),className:"mt-4 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white font-bold",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2"})," ",o("addService")]})]}):k.map(a=>{let s=e?.user?.id,l=a.user?.id===s||a.userId===s,i=!1!==a.acceptsNegotiation&&!l;return(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-4 shadow-sm hover:shadow-md hover:border-green-200 dark:hover:border-green-800 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:es(a.category).label.split(" ")[0]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white truncate",children:a.title}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium flex items-center gap-1 mt-1",children:[(0,r.jsx)(u.Z,{className:"w-3 h-3"})," ",a.user?.name||"Anonim","business"===a.listingType&&(0,r.jsx)("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 rounded text-[10px] font-bold",children:o("corporate").toUpperCase()})]})]}),(0,r.jsxs)("span",{className:"text-sm font-bold text-white bg-green-600 px-2.5 py-1 rounded-lg shadow-sm whitespace-nowrap",children:["⭐ ",a.valorPrice," V"]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2 line-clamp-2",children:a.description||o("noDescription")}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(m.Z,{className:"w-3 h-3"})," ",a.duration]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3"})," ",a.city]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(g.Z,{className:"w-3 h-3"})," ",a.views]})]}),a.wantDescription&&(0,r.jsx)("div",{className:"mt-3 p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:(0,r.jsxs)("p",{className:"text-xs text-amber-700 dark:text-amber-300 font-medium",children:["\uD83D\uDD04 ",o("wantsInReturn"),": ",a.wantDescription]})}),(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t dark:border-gray-700 flex gap-2",children:[(0,r.jsxs)(N.z,{size:"sm",className:"flex-1 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white text-xs font-bold shadow-sm",onClick:()=>{if(!e){t.push("/giris");return}q(a),G(!0)},children:[(0,r.jsx)(h.Z,{className:"w-3 h-3 mr-1"})," ",o("makeOffer")]}),(0,r.jsx)("button",{onClick:()=>el(a),disabled:!i,className:`p-2.5 rounded-xl transition-colors ${i?"bg-gray-100 dark:bg-gray-700 hover:bg-blue-100 dark:hover:bg-blue-900/30":"bg-gray-100 dark:bg-gray-800 cursor-not-allowed opacity-40"}`,title:l?"Kendi hizmetinize mesaj g\xf6nderemezsiniz":!1===a.acceptsNegotiation?"Bu hizmet sahibi mesaj kabul etmiyor":"Hizmet sahibine mesaj g\xf6nder",children:(0,r.jsx)(b.Z,{className:`w-4 h-4 ${i?"text-blue-500 dark:text-blue-400":"text-gray-300 dark:text-gray-600"}`})})]})]},a.id)})}):(0,r.jsx)("div",{className:"space-y-4",children:0===V.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(c,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Hen\xfcz hizmet eklemediniz."}),(0,r.jsxs)(N.z,{onClick:()=>B(!0),className:"mt-4 bg-green-500 hover:bg-green-600",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2"})," İlk Hizmetimi Ekle"]})]}):V.map(e=>(0,r.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-xl shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:es(e.category).label.split(" ")[0]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-3 h-3"})," ",e.duration,(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{className:"font-bold text-green-700",children:[e.valorPrice," Valor"]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${"active"===e.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"active"===e.status?"Aktif":"Duraklatıldı"}),(0,r.jsx)(N.z,{size:"sm",variant:"ghost",onClick:()=>et(e.id),disabled:U===e.id,children:"active"===e.status?(0,r.jsx)(p,{className:"w-4 h-4"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"})}),(0,r.jsx)(N.z,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>er(e.id),disabled:U===e.id,children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-4 text-xs text-gray-600",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(g.Z,{className:"w-3 h-3"})," ",e.views," g\xf6r\xfcnt\xfcleme"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.Z,{className:"w-3 h-3"})," ",e.completedSwaps," takas"]}),e.serviceArea&&(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3"})," ",e.serviceArea]})]})]},e.id))}),(0,r.jsxs)("div",{className:"mt-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border border-green-200 dark:border-green-800 text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-3",children:"\uD83E\uDD1D"}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Hizmetini Paylaş, Karşılığını Al!"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 max-w-md mx-auto",children:"Ders ver, tamirat yap, g\xfczellik hizmeti sun — karşılığında istediğin \xfcr\xfcn veya hizmeti al."})]})]}),(0,r.jsx)(D.Vq,{open:$,onOpenChange:B,children:(0,r.jsxs)(D.cZ,{className:"sm:max-w-lg max-h-[85vh] overflow-y-auto",children:[(0,r.jsx)(D.fK,{children:(0,r.jsxs)(D.$N,{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-green-600"}),"Hizmet Ekle"]})}),(0,r.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>Q({...Y,listingType:"individual"}),className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${"individual"===Y.listingType?"bg-green-50 border-green-500 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 inline mr-1"})," Bireysel"]}),(0,r.jsxs)("button",{onClick:()=>Q({...Y,listingType:"business"}),className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${"business"===Y.listingType?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 inline mr-1"})," Kurumsal"]})]}),"business"===Y.listingType&&(0,r.jsx)(j.I,{placeholder:"İşletme / Firma Adı",value:Y.businessName,onChange:e=>Q({...Y,businessName:e.target.value}),className:"border-gray-300"}),(0,r.jsx)(j.I,{placeholder:"Hizmet Başlığı (\xf6r: Ev Temizliği, Elektrik Tamiratı)",value:Y.title,onChange:e=>Q({...Y,title:e.target.value}),className:"border-gray-300"}),(0,r.jsx)(w.g,{placeholder:"Hizmet detaylarını a\xe7ıklayın...",value:Y.description,onChange:e=>Q({...Y,description:e.target.value}),rows:3,className:"border-gray-300"}),(0,r.jsxs)("select",{value:Y.category,onChange:e=>Q({...Y,category:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,r.jsx)("option",{value:"",children:"Kategori Se\xe7in"}),S.map(e=>(0,r.jsxs)("option",{value:e.value,children:[e.label," — ",e.desc]},e.value))]}),(0,r.jsx)("select",{value:Y.duration,onChange:e=>Q({...Y,duration:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg text-sm bg-white",children:O.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(j.I,{type:"number",placeholder:"Valor değeri",value:Y.valorPrice,onChange:e=>Q({...Y,valorPrice:e.target.value}),className:"border-gray-300 pr-16"}),(0,r.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-purple-600 font-bold",children:"Valor"})]}),(0,r.jsx)(j.I,{placeholder:"Hizmet b\xf6lgesi (\xf6r: Bornova ve \xe7evresi)",value:Y.serviceArea,onChange:e=>Q({...Y,serviceArea:e.target.value}),className:"border-gray-300"}),(0,r.jsxs)("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,r.jsx)("p",{className:"text-xs text-yellow-700 font-bold mb-2",children:"\uD83C\uDFAF Karşılığında Ne İstiyorsunuz?"}),(0,r.jsx)(w.g,{placeholder:"\xf6r: Mutfak t\xfcp\xfc, elektrikli s\xfcp\xfcrge veya kıyafet",value:Y.wantDescription,onChange:e=>Q({...Y,wantDescription:e.target.value}),rows:2,className:"bg-white border-gray-300"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,r.jsx)(N.z,{variant:"outline",onClick:()=>B(!1),className:"flex-1",children:"İptal"}),(0,r.jsx)(N.z,{onClick:ea,disabled:L,className:"flex-1 bg-green-500 hover:bg-green-600",children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Ekleniyor..."]}):"✅ Hizmeti Listele"})]})]})]})}),J&&W&&(0,r.jsx)(A,{service:W,onClose:()=>{G(!1),q(null)},onSuccess:()=>{G(!1),q(null),z.Am.success("Teklifiniz g\xf6nderildi!")}})]})}function A({service:e,onClose:a,onSuccess:t}){let{data:i}=(0,l.useSession)(),[n,d]=(0,s.useState)("valor"),[o,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(0),[x,g]=(0,s.useState)(""),[h,b]=(0,s.useState)([]),[p,f]=(0,s.useState)(0),[y,v]=(0,s.useState)(!0),[N,j]=(0,s.useState)(!1),[w,D]=(0,s.useState)(""),[z,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{v(!0);try{let[e,a]=await Promise.all([fetch("/api/products?myProducts=true"),fetch("/api/profile")]);if(e.ok){let a=await e.json(),t=a.products||a||[];b(t.filter(e=>"active"===e.status))}if(a.ok){let e=await a.json();f(e.valorBalance||e.user?.valorBalance||0)}}catch{}v(!1)})()},[]);let E=e.valorPrice,S=async()=>{D(""),j(!0);try{if("product"===n&&!o){D("L\xfctfen bir \xfcr\xfcn se\xe7in"),j(!1);return}if("valor"===n&&u<=0){D("L\xfctfen Valor miktarı girin"),j(!1);return}if("mixed"===n&&!o&&u<=0){D("L\xfctfen bir \xfcr\xfcn se\xe7in veya Valor miktarı girin"),j(!1);return}let a=x||"";if("product"===n){let e=h.find(e=>e.id===o);a=`[Hizmet Takası Teklifi]
Karşılığında sunulan: ${e?.title} (${e?.valorPrice||e?.userValorPrice}V)
${x?`Not: ${x}`:""}`}else if("valor"===n)a=`[Hizmet Takası Teklifi]
Karşılığında sunulan: ${u} Valor
${x?`Not: ${x}`:""}`;else{let e=h.find(e=>e.id===o);a=`[Hizmet Takası Teklifi]
Karşılığında sunulan: ${e?`${e.title} (${e.valorPrice||e.userValorPrice}V)`:""} ${u>0?`+ ${u} Valor`:""}
${x?`Not: ${x}`:""}`}let r=await fetch("/api/swap-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id,offeredProductId:o||void 0,offeredValor:"valor"===n||"mixed"===n?u:void 0,message:a})});if(r.ok)T(!0),setTimeout(()=>t(),1500);else{let e=await r.json();D(e.error||"Teklif g\xf6nderilemedi")}}catch(e){D("Bir hata oluştu. Tekrar deneyin.")}finally{j(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-4 rounded-t-2xl flex items-center justify-between z-10",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-bold text-lg",children:"\uD83D\uDD04 Teklif Ver"}),(0,r.jsx)("p",{className:"text-emerald-100 text-sm truncate max-w-[250px]",children:e.title})]}),(0,r.jsx)("button",{onClick:a,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,r.jsx)(k.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-4 space-y-5",children:[(0,r.jsxs)("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border border-emerald-200 dark:border-emerald-800",children:[(0,r.jsx)("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-200",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 mt-1",children:["\uD83D\uDC64 ",e.user?.name||"Anonim"," • \uD83D\uDCCD ",e.city," • \uD83D\uDCB0 ",E," Valor"]}),e.wantDescription&&(0,r.jsxs)("p",{className:"text-xs text-emerald-700 dark:text-emerald-300 mt-1",children:["\uD83C\uDFAF İstiyor: ",e.wantDescription]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 mb-2",children:"Ne teklif ediyorsun?"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)("button",{onClick:()=>d("product"),className:`flex flex-col items-center gap-1 p-3 rounded-xl border-2 transition-all ${"product"===n?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCE6"}),(0,r.jsx)("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-200",children:"\xdcr\xfcn"})]}),(0,r.jsxs)("button",{onClick:()=>d("valor"),className:`flex flex-col items-center gap-1 p-3 rounded-xl border-2 transition-all ${"valor"===n?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCB0"}),(0,r.jsx)("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-200",children:"Valor"})]}),(0,r.jsxs)("button",{onClick:()=>d("mixed"),className:`flex flex-col items-center gap-1 p-3 rounded-xl border-2 transition-all ${"mixed"===n?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDD00"}),(0,r.jsx)("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-200",children:"Karma"})]})]})]}),("product"===n||"mixed"===n)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 mb-2",children:"\uD83D\uDCE6 \xdcr\xfcn\xfcn\xfc Se\xe7"}),y?(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Y\xfckleniyor..."}):0===h.length?(0,r.jsxs)("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 rounded-xl border border-yellow-200 dark:border-yellow-800",children:[(0,r.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Aktif \xfcr\xfcn\xfcn\xfcz yok. \xd6nce \xfcr\xfcn ekleyin."}),(0,r.jsx)(C.default,{href:"/urun-ekle",className:"text-xs text-yellow-600 underline mt-1 inline-block",children:"+ \xdcr\xfcn Ekle"})]}):(0,r.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:h.map(e=>(0,r.jsxs)("label",{className:`flex items-center gap-3 p-2.5 rounded-xl border cursor-pointer transition-all ${o===e.id?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)("input",{type:"radio",name:"selectedProduct",checked:o===e.id,onChange:()=>c(e.id),className:"accent-emerald-600"}),e.images?.[0]&&(0,r.jsx)("img",{src:e.images[0],alt:e.title,className:"w-10 h-10 rounded-lg object-cover"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.valorPrice||e.userValorPrice," Valor"]})]})]},e.id))})]}),("valor"===n||"mixed"===n)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 mb-2",children:"\uD83D\uDCB0 Valor Miktarı"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"number",min:"0",max:p,value:u||"",onChange:e=>m(Math.min(Number(e.target.value),p)),placeholder:`Mevcut bakiye: ${p} V`,className:"w-full px-4 py-3 rounded-xl border dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"}),(0,r.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-400",children:"V"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Bakiyeniz: ",p.toLocaleString()," Valor"]}),(0,r.jsx)("div",{className:"flex gap-2 mt-2",children:[{label:"25%",value:Math.round(.25*E)},{label:"50%",value:Math.round(.5*E)},{label:"100%",value:E}].map(e=>(0,r.jsxs)("button",{onClick:()=>m(Math.min(e.value,p)),className:"px-3 py-1 text-xs rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors",children:[e.label," (",e.value,"V)"]},e.label))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 mb-2",children:"\uD83D\uDCDD Mesajınız (opsiyonel)"}),(0,r.jsx)("textarea",{value:x,onChange:e=>g(e.target.value),placeholder:"\xd6rn: Konser biletim var, dersleriniz karşılığında teklif edebilir miyim?",rows:3,className:"w-full px-4 py-3 rounded-xl border dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm resize-none"})]}),(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-xl border dark:border-gray-700",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 mb-1 uppercase",children:"Teklif \xd6zeti"}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:["product"===n&&o&&(0,r.jsxs)("p",{children:["\uD83D\uDCE6 ",h.find(e=>e.id===o)?.title]}),"valor"===n&&u>0&&(0,r.jsxs)("p",{children:["\uD83D\uDCB0 ",u," Valor"]}),"mixed"===n&&(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsxs)("p",{children:["\uD83D\uDCE6 ",h.find(e=>e.id===o)?.title]}),u>0&&(0,r.jsxs)("p",{children:["\uD83D\uDCB0 + ",u," Valor"]})]}),!o&&u<=0&&(0,r.jsx)("p",{className:"text-gray-400 italic",children:"Hen\xfcz bir teklif se\xe7ilmedi"})]})]}),w&&(0,r.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:w})}),z&&(0,r.jsx)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:(0,r.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 font-bold",children:"✅ Teklifiniz g\xf6nderildi! Hizmet sahibi değerlendirecek."})}),!z&&(0,r.jsx)("button",{onClick:S,disabled:N,className:"w-full py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-xl font-bold text-base hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:N?"⏳ G\xf6nderiliyor...":"\uD83D\uDD04 Teklifi G\xf6nder"})]})]})})}},2422:function(e,a,t){"use strict";t.d(a,{z:function(){return o}});var r=t(15444),s=t(89300),l=t(21030),i=t(2371),n=t(65522);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef(({className:e,variant:a,size:t,asChild:s=!1,...i},o)=>{let c=s?l.g7:"button";return(0,r.jsx)(c,{className:(0,n.cn)(d({variant:a,size:t,className:e})),ref:o,...i})});o.displayName="Button"},29530:function(e,a,t){"use strict";t.d(a,{$N:function(){return x},Vq:function(){return d},cZ:function(){return u},fK:function(){return m}});var r=t(15444),s=t(89300),l=t(49095),i=t(33485),n=t(65522);let d=l.fC;l.xz;let o=l.h_;l.x8;let c=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)(l.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=l.aV.displayName;let u=s.forwardRef(({className:e,children:a,...t},s)=>(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(l.VY,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,(0,r.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=l.VY.displayName;let m=({className:e,...a})=>(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});m.displayName="DialogHeader";let x=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)(l.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));x.displayName=l.Dx.displayName,s.forwardRef(({className:e,...a},t)=>(0,r.jsx)(l.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...a})).displayName=l.dk.displayName},74678:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var r=t(15444),s=t(89300),l=t(65522);let i=s.forwardRef(({className:e,type:a,...t},s)=>(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));i.displayName="Input"},67012:function(e,a,t){"use strict";t.d(a,{g:function(){return i}});var r=t(15444),s=t(89300),l=t(65522);let i=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));i.displayName="Textarea"},10839:function(e,a,t){"use strict";async function r(e){try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.type,message:e.message,severity:e.severity||"error",userId:e.userId,url:window.location.href,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,metadata:e.metadata?JSON.stringify(e.metadata):void 0})})}catch{console.error("Error reporter failed:",e.message)}}function s(){return!navigator.onLine}t.d(a,{s9:function(){return s},wz:function(){return n},DV:function(){return d},Pe:function(){return o}});let l={OFFLINE:"İnternet bağlantınız yok. L\xfctfen bağlantınızı kontrol edin.",TIMEOUT:"Sunucu yanıt vermedi. L\xfctfen tekrar deneyin.",SERVER_ERROR:"Sunucu hatası oluştu. L\xfctfen daha sonra tekrar deneyin.",NETWORK_ERROR:"Bağlantı hatası. L\xfctfen internet bağlantınızı kontrol edin.",UNAUTHORIZED:"Oturum s\xfcreniz doldu. L\xfctfen tekrar giriş yapın.",FORBIDDEN:"Bu işlem i\xe7in yetkiniz yok.",NOT_FOUND:"İstenen kaynak bulunamadı.",RATE_LIMITED:"\xc7ok fazla istek g\xf6nderdiniz. L\xfctfen biraz bekleyin.",UNKNOWN:"Beklenmeyen bir hata oluştu."};async function i(e,a,t){let i=new AbortController,n=setTimeout(()=>i.abort(),t);try{let t=await fetch(e,{...a,signal:i.signal,headers:{"Content-Type":"application/json",...a.headers}});clearTimeout(n);let s=null,d=t.headers.get("content-type");if(d?.includes("application/json"))try{s=await t.json()}catch{s=null}if(!t.ok){let a=s?.error||s?.message||function(e,a){switch(e){case 401:return l.UNAUTHORIZED;case 403:return l.FORBIDDEN;case 404:return l.NOT_FOUND;case 429:return l.RATE_LIMITED;case 500:case 502:case 503:case 504:return l.SERVER_ERROR;default:return l.UNKNOWN}}(t.status);return t.status>=500&&r({type:"api_error",message:`API ${t.status}: ${e}`,severity:"error",metadata:{url:e,status:t.status,errorMsg:a}}),{data:null,error:a,status:t.status,ok:!1,isOffline:!1,isTimeout:!1}}return{data:s,error:null,status:t.status,ok:!0,isOffline:!1,isTimeout:!1}}catch(e){if(clearTimeout(n),"AbortError"===e.name)return{data:null,error:l.TIMEOUT,status:0,ok:!1,isOffline:!1,isTimeout:!0};return{data:null,error:l.NETWORK_ERROR,status:0,ok:!1,isOffline:s(),isTimeout:!1}}}async function n(e,a={}){let{timeout:t=1e4,retries:r=2,retryDelay:n=1e3,...d}=a;if(s())return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};let o=null;for(let a=0;a<=r;a++){if(a>0&&(await new Promise(e=>setTimeout(e,n)),s()))return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};if((o=await i(e,d,t)).ok||401===o.status||403===o.status||404===o.status||429===o.status)break}return o}async function d(e,a){return n(e,{...a,method:"GET"})}async function o(e,a,t){return n(e,{...t,method:"POST",body:a?JSON.stringify(a):void 0})}},65522:function(e,a,t){"use strict";t.d(a,{cn:function(){return l}});var r=t(32191),s=t(23607);function l(...e){return(0,s.m6)((0,r.W)(e))}},88913:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(42154).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},2019:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(42154).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},64990:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(42154).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},4693:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(42154).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[1791,5558,0,1585,6470,665,2717,2386,7156,1744],function(){return e(e.s=45305)}),_N_E=e.O()}]);