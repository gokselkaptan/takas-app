(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7291],{33944:function(e,a,t){Promise.resolve().then(t.bind(t,22023))},22023:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Q}});var s=t(15444),r=t(89300),l=t(75762),i=t(79047),n=t(31587),d=t(59335),o=t(81471),c=t(16886),m=t(39429),x=t(25076),u=t(65407),f=t(18218),h=t(66772),g=t(28576),p=t(53492),y=t(37665),b=t(25422),j=t(62492),N=t(30199),v=t(40563),w=t(63751),k=t(2422),C=t(74678),T=t(67012),z=t(39338),V=t(16997),D=t(77248),O=t(65522);let Z=z.fC;z.ZA;let R=z.B4,E=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(z.xz,{ref:r,className:(0,O.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[a,(0,s.jsx)(z.JO,{asChild:!0,children:(0,s.jsx)(w.Z,{className:"h-4 w-4 opacity-50"})})]}));E.displayName=z.xz.displayName;let A=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(z.u_,{ref:t,className:(0,O.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(V.Z,{className:"h-4 w-4"})}));A.displayName=z.u_.displayName;let M=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(z.$G,{ref:t,className:(0,O.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(w.Z,{className:"h-4 w-4"})}));M.displayName=z.$G.displayName;let S=r.forwardRef(({className:e,children:a,position:t="popper",sideOffset:r=4,...l},i)=>(0,s.jsx)(z.h_,{children:(0,s.jsxs)(z.VY,{ref:i,sideOffset:r,className:(0,O.cn)("relative z-[9999] max-h-60 min-w-[8rem] overflow-hidden rounded-md border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...l,children:[(0,s.jsx)(A,{}),(0,s.jsx)(z.l_,{className:(0,O.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(M,{})]})}));S.displayName=z.VY.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(z.__,{ref:t,className:(0,O.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=z.__.displayName;let I=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(z.ck,{ref:r,className:(0,O.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(z.wU,{children:(0,s.jsx)(D.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(z.eT,{children:a})]}));I.displayName=z.ck.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(z.Z0,{ref:t,className:(0,O.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=z.Z0.displayName;let _=(0,t(2371).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function U({className:e,variant:a,...t}){return(0,s.jsx)("div",{className:(0,O.cn)(_({variant:a}),e),...t})}var L=t(99035);let B=L.fC,F=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(L.aV,{ref:t,className:(0,O.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));F.displayName=L.aV.displayName;let $=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(L.xz,{ref:t,className:(0,O.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));$.displayName=L.xz.displayName;let K=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(L.VY,{ref:t,className:(0,O.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));K.displayName=L.VY.displayName;var P=t(29530),Y=t(91585),G=t(48001),H=t(41084),J=t(10839);let W=[{value:"elektronik",label:"Elektronik"},{value:"giyim",label:"Giyim"},{value:"ev-esyalari",label:"Ev Eşyaları"},{value:"spor",label:"Spor"},{value:"kitap-muzik",label:"Kitap & M\xfczik"},{value:"oyuncak",label:"Oyuncak"},{value:"bebek",label:"Bebek"},{value:"hobi",label:"Hobi"},{value:"bahce",label:"Bah\xe7e"},{value:"otomotiv",label:"Otomotiv"},{value:"diger",label:"Diğer"}],q=["İzmir","İstanbul","Ankara","Antalya","Bursa","Adana","Konya","Mersin"];function Q(){let{data:e,status:a}=(0,l.useSession)(),t=(0,i.useRouter)(),[n,d]=(0,r.useState)("all"),[y,b]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[v,w]=(0,r.useState)(!0),[z,V]=(0,r.useState)(""),[D,O]=(0,r.useState)(""),[A,M]=(0,r.useState)(""),[_,U]=(0,r.useState)(!1),[L,G]=(0,r.useState)(!1),[H,Q]=(0,r.useState)(null),[ea,et]=(0,r.useState)({wantTitle:"",wantDescription:"",wantCategory:"",wantMinValue:"",wantMaxValue:"",offerType:"category",offerCategory:"",offerDescription:"",preferredCity:"",isUrgent:!1}),[es,er]=(0,r.useState)(!1);(0,r.useEffect)(()=>{el(),en(),e?.user?.id&&ei()},[e,D,A,_,z]);let el=async()=>{try{let e=new URLSearchParams;D&&"all"!==D&&e.set("category",D),A&&"all"!==A&&e.set("city",A),_&&e.set("urgent","true"),z&&e.set("q",z),e.set("limit","50");let{data:a,error:t}=await (0,J.wz)(`/api/wishboard?${e}`);if(t){console.error("Wishboard error:",t);return}a&&b(a.wishes||[])}catch(e){console.error("Fetch wishes error:",e)}finally{w(!1)}},ei=async()=>{try{let{data:e,error:a}=await (0,J.wz)("/api/wishboard?my=true");e&&N(e.wishes||[])}catch(e){console.error("Fetch my wishes error:",e)}},en=async()=>{try{let{data:e,error:a}=await (0,J.wz)("/api/wishboard?stats=true");e&&Q(e)}catch(e){console.error("Fetch stats error:",e)}},ed=async a=>{if(a&&(a.preventDefault(),a.stopPropagation()),!e?.user?.email){Y.Am.error("L\xfctfen giriş yapın"),t.push("/giris");return}if(!ea.wantTitle||!ea.wantCategory){Y.Am.error("L\xfctfen başlık ve kategori girin");return}er(!0);try{let e={action:"create",wantTitle:ea.wantTitle.trim(),wantDescription:ea.wantDescription?.trim()||void 0,wantCategory:ea.wantCategory,wantMinValue:ea.wantMinValue?parseInt(ea.wantMinValue):void 0,wantMaxValue:ea.wantMaxValue?parseInt(ea.wantMaxValue):void 0,offerType:ea.offerType,offerCategory:ea.offerCategory||void 0,offerDescription:ea.offerDescription?.trim()||void 0,preferredCity:ea.preferredCity&&"any"!==ea.preferredCity?ea.preferredCity:void 0,isUrgent:ea.isUrgent},{data:a,error:t}=await (0,J.wz)("/api/wishboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),timeout:15e3});if(t){Y.Am.error(t),er(!1);return}a?.success?(Y.Am.success("İsteğiniz oluşturuldu! Eşleşmeler aranıyor..."),et({wantTitle:"",wantDescription:"",wantCategory:"",wantMinValue:"",wantMaxValue:"",offerType:"category",offerCategory:"",offerDescription:"",preferredCity:"",isUrgent:!1}),G(!1),setTimeout(()=>{el(),ei()},100)):Y.Am.error(a.error||"Bir hata oluştu")}catch(e){console.error("Create wish error:",e),Y.Am.error(e.message||"Bir hata oluştu. L\xfctfen tekrar deneyin.")}finally{er(!1)}},eo=async e=>{try{(await fetch("/api/wishboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"cancel",wishId:e})})).ok&&(Y.Am.success("İstek iptal edildi"),ei())}catch(e){Y.Am.error("Bir hata oluştu")}},ec=e=>W.find(a=>a.value===e)?.label||e,em=e=>{let a=new Date(e),t=Math.floor((new Date().getTime()-a.getTime())/864e5);return 0===t?"Bug\xfcn":1===t?"D\xfcn":t<7?`${t} g\xfcn \xf6nce`:a.toLocaleDateString("tr-TR")},ex=e=>{if(!e)return null;let a=new Date(e),t=new Date,s=Math.ceil((a.getTime()-t.getTime())/864e5);return s<=0?"S\xfcresi doldu":1===s?"Son 1 g\xfcn":s<=7?`${s} g\xfcn kaldı`:`${s} g\xfcn`};return"loading"===a?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 animate-spin text-purple-600"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-white dark:from-gray-900 dark:to-gray-800",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-6 px-4",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:"İstek Panosu"})]}),(0,s.jsx)("p",{className:"text-purple-100 mt-1 text-sm sm:text-base",children:"Ne istediğinizi paylaşın, eşleşmeleri bulalım!"})]}),(0,s.jsxs)(k.z,{onClick:()=>e?G(!0):t.push("/giris"),className:"bg-white text-purple-600 hover:bg-purple-50 font-semibold w-full sm:w-auto flex-shrink-0",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Yeni İstek"]})]}),H&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[(0,s.jsxs)("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:H.totalActive||0}),(0,s.jsx)("div",{className:"text-sm text-purple-100",children:"Aktif İstek"})]}),(0,s.jsxs)("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:H.totalMatches||0}),(0,s.jsx)("div",{className:"text-sm text-purple-100",children:"Eşleşme"})]}),(0,s.jsxs)("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:j.filter(e=>"active"===e.status).length}),(0,s.jsx)("div",{className:"text-sm text-purple-100",children:"İsteklerim"})]})]})]})}),(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,s.jsxs)(B,{value:n,onValueChange:d,children:[(0,s.jsxs)(F,{className:"w-full grid grid-cols-2 mb-6",children:[(0,s.jsxs)($,{value:"all",className:"text-sm",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"T\xfcm İstekler"]}),(0,s.jsxs)($,{value:"my",className:"text-sm",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"İsteklerim (",j.length,")"]})]}),(0,s.jsxs)(K,{value:"all",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,s.jsx)(C.I,{placeholder:"İstek ara...",value:z,onChange:e=>V(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)(Z,{value:D,onValueChange:O,children:[(0,s.jsx)(E,{className:"w-[150px]",children:(0,s.jsx)(R,{placeholder:"Kategori"})}),(0,s.jsxs)(S,{position:"popper",className:"z-[100] max-h-60",children:[(0,s.jsx)(I,{value:"all",children:"T\xfcm\xfc"}),W.map(e=>(0,s.jsx)(I,{value:e.value,children:e.label},e.value))]})]}),(0,s.jsxs)(Z,{value:A,onValueChange:M,children:[(0,s.jsx)(E,{className:"w-[140px]",children:(0,s.jsx)(R,{placeholder:"Şehir"})}),(0,s.jsxs)(S,{position:"popper",className:"z-[100] max-h-60",children:[(0,s.jsx)(I,{value:"all",children:"T\xfcm\xfc"}),q.map(e=>(0,s.jsx)(I,{value:e,children:e},e))]})]}),(0,s.jsxs)(k.z,{variant:_?"default":"outline",size:"sm",onClick:()=>U(!_),className:_?"bg-orange-500 hover:bg-orange-600":"",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"Acil"]})]})}),v?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 animate-spin text-purple-600"})}):0===y.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"\uD83C\uDFAF"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-200 mb-2",children:"İlk isteği sen oluştur!"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4 max-w-md mx-auto",children:"Ne aradığını paylaş — belki aradığın eşya birinin dolabında bekliyor!"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 text-xs text-gray-400 mb-6",children:[(0,s.jsx)("span",{children:"\uD83D\uDD0D 140+ aktif \xfcr\xfcn"}),(0,s.jsx)("span",{children:"\xb7"}),(0,s.jsx)("span",{children:"\uD83D\uDC65 150+ kullanıcı"})]}),(0,s.jsx)("button",{onClick:()=>G(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold hover:shadow-lg transition-all",children:"+ İlk İsteğimi Oluştur"})]}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:y.map(a=>(0,s.jsx)(X,{wish:a,getCategoryLabel:ec,formatDate:em,getExpiryText:ex,isOwn:a.user.id===e?.user?.id},a.id))})]}),(0,s.jsx)(K,{value:"my",children:e?0===j.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(c.Z,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-600 dark:text-gray-300",children:"Hen\xfcz isteğiniz yok"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1 mb-4",children:"Ne istediğinizi paylaşın, eşleşmeleri bulalım!"}),(0,s.jsxs)(k.z,{onClick:()=>G(!0),children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"İlk İsteğinizi Oluşturun"]})]}):(0,s.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,s.jsx)(ee,{wish:e,getCategoryLabel:ec,formatDate:em,getExpiryText:ex,onCancel:()=>eo(e.id)},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(h.Z,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:"Giriş Yapmalısınız"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1 mb-4",children:"İsteklerinizi g\xf6rmek i\xe7in giriş yapın"}),(0,s.jsx)(k.z,{onClick:()=>t.push("/giris"),children:"Giriş Yap"})]})})]})}),(0,s.jsx)(P.Vq,{open:L,onOpenChange:G,children:(0,s.jsxs)(P.cZ,{className:"sm:max-w-lg w-[95vw] max-h-[90vh] p-0 flex flex-col",children:[(0,s.jsx)(P.fK,{className:"sticky top-0 bg-white dark:bg-gray-900 z-10 px-6 py-4 border-b-2 border-purple-100 dark:border-gray-700",children:(0,s.jsxs)(P.$N,{className:"flex items-center gap-2 text-lg",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 text-purple-600"}),"Yeni Takas İsteği"]})}),(0,s.jsxs)("div",{className:"px-6 py-4 space-y-4 overflow-y-auto flex-1",children:[(0,s.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/30 rounded-xl p-4 border border-purple-100 dark:border-purple-800",children:[(0,s.jsxs)("h3",{className:"font-bold text-purple-900 dark:text-purple-200 mb-3 flex items-center gap-2 text-sm",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{children:"Ne İstiyorum?"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"\xdcr\xfcn Adı *"}),(0,s.jsx)(C.I,{placeholder:"\xd6rn: iPhone 13, Bisiklet...",value:ea.wantTitle,onChange:e=>et({...ea,wantTitle:e.target.value}),className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"A\xe7ıklama"}),(0,s.jsx)(T.g,{placeholder:"Detaylı a\xe7ıklama (isteğe bağlı)",value:ea.wantDescription,onChange:e=>et({...ea,wantDescription:e.target.value}),rows:2,className:"w-full resize-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Kategori *"}),(0,s.jsxs)(Z,{value:ea.wantCategory,onValueChange:e=>et({...ea,wantCategory:e}),children:[(0,s.jsx)(E,{className:"w-full",children:(0,s.jsx)(R,{placeholder:"Kategori se\xe7in"})}),(0,s.jsx)(S,{children:W.map(e=>(0,s.jsx)(I,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Min Valor"}),(0,s.jsx)(C.I,{type:"number",placeholder:"0",value:ea.wantMinValue,onChange:e=>et({...ea,wantMinValue:e.target.value}),className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Max Valor"}),(0,s.jsx)(C.I,{type:"number",placeholder:"1000",value:ea.wantMaxValue,onChange:e=>et({...ea,wantMaxValue:e.target.value}),className:"w-full"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/30 rounded-xl p-4 border border-green-100 dark:border-green-800",children:[(0,s.jsxs)("h3",{className:"font-bold text-green-900 dark:text-green-200 mb-3 flex items-center gap-2 text-sm",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{children:"Ne Verebilirim?"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Teklif T\xfcr\xfc"}),(0,s.jsxs)(Z,{value:ea.offerType,onValueChange:e=>et({...ea,offerType:e}),children:[(0,s.jsx)(E,{className:"w-full",children:(0,s.jsx)(R,{})}),(0,s.jsxs)(S,{children:[(0,s.jsx)(I,{value:"category",children:"Bir kategoriden \xfcr\xfcn"}),(0,s.jsx)(I,{value:"any",children:"Herhangi bir şey"}),(0,s.jsx)(I,{value:"specific_product",children:"Belirli bir \xfcr\xfcn"})]})]})]}),"category"===ea.offerType&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Teklif Kategorisi"}),(0,s.jsxs)(Z,{value:ea.offerCategory,onValueChange:e=>et({...ea,offerCategory:e}),children:[(0,s.jsx)(E,{className:"w-full",children:(0,s.jsx)(R,{placeholder:"Kategori se\xe7in"})}),(0,s.jsx)(S,{children:W.map(e=>(0,s.jsx)(I,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Teklif A\xe7ıklaması"}),(0,s.jsx)(T.g,{placeholder:"Teklifinizi a\xe7ıklayın (isteğe bağlı)",value:ea.offerDescription,onChange:e=>et({...ea,offerDescription:e.target.value}),rows:2,className:"w-full resize-none"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("h3",{className:"font-bold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2 text-sm",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{children:"Tercihler"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5",children:"Tercih Edilen Şehir"}),(0,s.jsxs)(Z,{value:ea.preferredCity,onValueChange:e=>et({...ea,preferredCity:e}),children:[(0,s.jsx)(E,{className:"w-full",children:(0,s.jsx)(R,{placeholder:"Şehir se\xe7in (isteğe bağlı)"})}),(0,s.jsxs)(S,{children:[(0,s.jsx)(I,{value:"any",children:"Farketmez"}),q.map(e=>(0,s.jsx)(I,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer py-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:ea.isUrgent,onChange:e=>et({...ea,isUrgent:e.target.checked}),className:"w-4 h-4 rounded border-orange-500 text-orange-500 focus:ring-orange-500"}),(0,s.jsxs)("span",{className:"flex items-center gap-1 text-orange-600 text-sm",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4"}),"Acil istek olarak işaretle"]})]})]})]})]}),(0,s.jsxs)("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 border-t-2 border-purple-100 dark:border-gray-700 px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(k.z,{type:"button",variant:"outline",onClick:()=>G(!1),className:"flex-1",disabled:es,children:"İptal"}),(0,s.jsx)(k.z,{type:"button",disabled:es||!ea.wantTitle.trim()||!ea.wantCategory,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:()=>ed(),children:es?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 animate-spin mr-2"}),"Oluşturuluyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"İsteği Oluştur"]})})]}),(!ea.wantTitle.trim()||!ea.wantCategory)&&(0,s.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2 text-center font-medium bg-red-50 dark:bg-red-900/20 py-1 rounded-lg",children:"* \xdcr\xfcn adı ve kategori zorunludur"})]})]})})]})}function X({wish:e,getCategoryLabel:a,formatDate:t,getExpiryText:r,isOwn:l}){return(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3 gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:e.user.image?(0,s.jsx)(G.default,{src:e.user.image,alt:e.user.name||"",width:36,height:36,className:"rounded-full w-9 h-9 object-cover"}):(0,s.jsx)("div",{className:"w-9 h-9 rounded-full bg-purple-100 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-purple-600 font-semibold",children:e.user.name?.charAt(0)||"?"})})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e.user.name}),e.user.location&&(0,s.jsxs)("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,s.jsx)(g.Z,{className:"w-3 h-3 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.user.location})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.isUrgent&&(0,s.jsxs)(U,{className:"bg-orange-100 text-orange-700 border-orange-200",children:[(0,s.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Acil"]}),l&&(0,s.jsx)(U,{variant:"outline",className:"text-purple-600 border-purple-200",children:"Sizin"})]})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e.wantTitle}),e.wantDescription&&(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3 line-clamp-2",children:e.wantDescription}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,s.jsxs)(U,{variant:"secondary",className:"bg-purple-100 text-purple-700",children:[(0,s.jsx)(y.Z,{className:"w-3 h-3 mr-1"}),a(e.wantCategory)]}),(e.wantMinValue||e.wantMaxValue)&&(0,s.jsx)(U,{variant:"secondary",children:e.wantMinValue&&e.wantMaxValue?`${e.wantMinValue}-${e.wantMaxValue}V`:e.wantMinValue?`${e.wantMinValue}V+`:`Max ${e.wantMaxValue}V`}),e.preferredCity&&(0,s.jsxs)(U,{variant:"outline",children:[(0,s.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),e.preferredCity]})]}),e.offerCategory&&(0,s.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-2 mb-3",children:(0,s.jsxs)("span",{className:"text-xs text-green-700 dark:text-green-300",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3 inline mr-1"}),"Karşılığında: ",a(e.offerCategory)]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(b.Z,{className:"w-3 h-3"}),e.viewCount]}),e.matchCount>0&&(0,s.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,s.jsx)(p.Z,{className:"w-3 h-3"}),e.matchCount," eşleşme"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.expiresAt&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(j.Z,{className:"w-3 h-3"}),r(e.expiresAt)]}),(0,s.jsx)("span",{children:t(e.createdAt)})]})]})]}),!l&&(0,s.jsx)("div",{className:"border-t border-gray-100 dark:border-gray-700 px-4 py-3 bg-gray-50 dark:bg-gray-800/50",children:(0,s.jsx)(H.default,{href:`/mesajlar?user=${e.user.id}`,children:(0,s.jsxs)(k.z,{size:"sm",className:"w-full bg-purple-600 hover:bg-purple-700",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Mesaj G\xf6nder"]})})})]})}function ee({wish:e,getCategoryLabel:a,formatDate:t,getExpiryText:l,onCancel:i}){let[o,c]=(0,r.useState)(!1);return(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.wantTitle}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(U,{variant:"secondary",className:"bg-purple-100 text-purple-700",children:a(e.wantCategory)}),(0,s.jsx)(U,{variant:"active"===e.status?"default":"secondary",className:"active"===e.status?"bg-green-500":"",children:"active"===e.status?"Aktif":"fulfilled"===e.status?"Tamamlandı":"Pasif"}),e.isUrgent&&(0,s.jsxs)(U,{className:"bg-orange-100 text-orange-700",children:[(0,s.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Acil"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:t(e.createdAt)}),"active"===e.status&&(0,s.jsx)(k.z,{variant:"ghost",size:"sm",onClick:i,className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:(0,s.jsx)(v.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4"}),e.viewCount," g\xf6r\xfcnt\xfcleme"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),e.matchCount," eşleşme"]}),e.expiresAt&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),l(e.expiresAt)]})]}),e.matches&&e.matches.length>0&&(0,s.jsxs)("div",{className:"cursor-pointer",onClick:()=>c(!o),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-t border-gray-100 dark:border-gray-700",children:[(0,s.jsxs)("span",{className:"font-medium text-green-600 flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),e.matches.length," Eşleşme Bulundu"]}),(0,s.jsx)(w.Z,{className:`w-5 h-5 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),(0,s.jsx)(d.M,{children:o&&(0,s.jsx)(n.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-2 pt-2",children:e.matches.map((e,a)=>(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium text-sm",children:["Eşleşme #",a+1]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600",children:["Skor: ",Math.round(e.score),"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U,{variant:"outline",className:"text-xs",children:"direct"===e.matchType?"Direkt":"D\xf6ng\xfcsel"}),e.matchedUserId&&(0,s.jsx)(H.default,{href:`/mesajlar?user=${e.matchedUserId}`,children:(0,s.jsxs)(k.z,{size:"sm",variant:"outline",children:[(0,s.jsx)(N.Z,{className:"w-3 h-3 mr-1"}),"İletişim"]})})]})]},e.id||a))})})]})]})})}},2422:function(e,a,t){"use strict";t.d(a,{z:function(){return o}});var s=t(15444),r=t(89300),l=t(21030),i=t(2371),n=t(65522);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:a,size:t,asChild:r=!1,...i},o)=>{let c=r?l.g7:"button";return(0,s.jsx)(c,{className:(0,n.cn)(d({variant:a,size:t,className:e})),ref:o,...i})});o.displayName="Button"},29530:function(e,a,t){"use strict";t.d(a,{$N:function(){return u},Vq:function(){return d},cZ:function(){return m},fK:function(){return x}});var s=t(15444),r=t(89300),l=t(49095),i=t(33485),n=t(65522);let d=l.fC;l.xz;let o=l.h_;l.x8;let c=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(l.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=l.aV.displayName;let m=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(o,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(l.VY,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=l.VY.displayName;let x=({className:e,...a})=>(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});x.displayName="DialogHeader";let u=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(l.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));u.displayName=l.Dx.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(l.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...a})).displayName=l.dk.displayName},74678:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(15444),r=t(89300),l=t(65522);let i=r.forwardRef(({className:e,type:a,...t},r)=>(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Input"},67012:function(e,a,t){"use strict";t.d(a,{g:function(){return i}});var s=t(15444),r=t(89300),l=t(65522);let i=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));i.displayName="Textarea"},10839:function(e,a,t){"use strict";async function s(e){try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.type,message:e.message,severity:e.severity||"error",userId:e.userId,url:window.location.href,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,metadata:e.metadata?JSON.stringify(e.metadata):void 0})})}catch{console.error("Error reporter failed:",e.message)}}function r(){return!navigator.onLine}t.d(a,{s9:function(){return r},wz:function(){return n},DV:function(){return d},Pe:function(){return o}});let l={OFFLINE:"İnternet bağlantınız yok. L\xfctfen bağlantınızı kontrol edin.",TIMEOUT:"Sunucu yanıt vermedi. L\xfctfen tekrar deneyin.",SERVER_ERROR:"Sunucu hatası oluştu. L\xfctfen daha sonra tekrar deneyin.",NETWORK_ERROR:"Bağlantı hatası. L\xfctfen internet bağlantınızı kontrol edin.",UNAUTHORIZED:"Oturum s\xfcreniz doldu. L\xfctfen tekrar giriş yapın.",FORBIDDEN:"Bu işlem i\xe7in yetkiniz yok.",NOT_FOUND:"İstenen kaynak bulunamadı.",RATE_LIMITED:"\xc7ok fazla istek g\xf6nderdiniz. L\xfctfen biraz bekleyin.",UNKNOWN:"Beklenmeyen bir hata oluştu."};async function i(e,a,t){let i=new AbortController,n=setTimeout(()=>i.abort(),t);try{let t=await fetch(e,{...a,signal:i.signal,headers:{"Content-Type":"application/json",...a.headers}});clearTimeout(n);let r=null,d=t.headers.get("content-type");if(d?.includes("application/json"))try{r=await t.json()}catch{r=null}if(!t.ok){let a=r?.error||r?.message||function(e,a){switch(e){case 401:return l.UNAUTHORIZED;case 403:return l.FORBIDDEN;case 404:return l.NOT_FOUND;case 429:return l.RATE_LIMITED;case 500:case 502:case 503:case 504:return l.SERVER_ERROR;default:return l.UNKNOWN}}(t.status);return t.status>=500&&s({type:"api_error",message:`API ${t.status}: ${e}`,severity:"error",metadata:{url:e,status:t.status,errorMsg:a}}),{data:null,error:a,status:t.status,ok:!1,isOffline:!1,isTimeout:!1}}return{data:r,error:null,status:t.status,ok:!0,isOffline:!1,isTimeout:!1}}catch(e){if(clearTimeout(n),"AbortError"===e.name)return{data:null,error:l.TIMEOUT,status:0,ok:!1,isOffline:!1,isTimeout:!0};return{data:null,error:l.NETWORK_ERROR,status:0,ok:!1,isOffline:r(),isTimeout:!1}}}async function n(e,a={}){let{timeout:t=1e4,retries:s=2,retryDelay:n=1e3,...d}=a;if(r())return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};let o=null;for(let a=0;a<=s;a++){if(a>0&&(await new Promise(e=>setTimeout(e,n)),r()))return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};if((o=await i(e,d,t)).ok||401===o.status||403===o.status||404===o.status||429===o.status)break}return o}async function d(e,a){return n(e,{...a,method:"GET"})}async function o(e,a,t){return n(e,{...t,method:"POST",body:a?JSON.stringify(a):void 0})}},65522:function(e,a,t){"use strict";t.d(a,{cn:function(){return l}});var s=t(32191),r=t(23607);function l(...e){return(0,r.m6)((0,s.W)(e))}}},function(e){e.O(0,[1791,5558,0,8001,1585,6470,665,7609,2386,7156,1744],function(){return e(e.s=33944)}),_N_E=e.O()}]);