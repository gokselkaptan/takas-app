(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7699,778],{47113:function(e,t,a){Promise.resolve().then(a.bind(a,49380))},49380:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var r=a(15444),s=a(89300),l=a(79047),i=a(75762),n=a(48001),d=a(41084),c=a(31587),o=a(59335),x=a(66772),m=a(98155),u=a(16629),p=a(51137),h=a(23572),g=a(42611),f=a(53492),b=a(28576),y=a(75012),j=a(25422),k=a(37665),N=a(91117),v=a(25020),w=a(62492),D=a(65407),C=a(88913),S=a(30199),z=a(66124),T=a(33485),V=a(58510),P=a(1946),E=a(81178),Z=a(4805),A=a(79582),M=a(82717),O=a(30863),B=a(39291),R=a(80778),F=a(39090),$=a(4671),I=a(10839);let G={new:{tr:"SÄ±fÄ±r",en:"New",es:"Nuevo",ca:"Nou"},like_new:{tr:"SÄ±fÄ±r Gibi",en:"Like New",es:"Como nuevo",ca:"Com nou"},good:{tr:"Ä°yi",en:"Good",es:"Bueno",ca:"Bo"},fair:{tr:"Orta",en:"Fair",es:"Regular",ca:"Regular"}};function L(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),{data:a}=(0,i.useSession)(),{t:L,language:_}=(0,M.Z)(),[q,K]=(0,s.useState)(null),[H,U]=(0,s.useState)(!0),[Y,J]=(0,s.useState)(""),[W,Q]=(0,s.useState)(0),[X,ee]=(0,s.useState)(!1),[et,ea]=(0,s.useState)([]),[er,es]=(0,s.useState)(""),[el,ei]=(0,s.useState)(!1),[en,ed]=(0,s.useState)(!1),[ec,eo]=(0,s.useState)(""),[ex,em]=(0,s.useState)("swap"),[eu,ep]=(0,s.useState)(!1),[eh,eg]=(0,s.useState)(!1),[ef,eb]=(0,s.useState)(!1),[ey,ej]=(0,s.useState)([]),[ek,eN]=(0,s.useState)([]),[ev,ew]=(0,s.useState)(!1),[eD,eC]=(0,s.useState)(0),[eS,ez]=(0,s.useState)("valor_diff"),[eT,eV]=(0,s.useState)(0),eP=e=>{eN(t=>{let a=t.includes(e)?t.filter(t=>t!==e):[...t,e];if(q){let e=ey.filter(e=>a.includes(e.id)).reduce((e,t)=>e+t.valorPrice,0)-q.valorPrice;ez("valor_diff"),e>0?(eC(0),eV(e)):(e<0?eC(Math.abs(e)):eC(0),eV(0))}return a})},eE=ey.filter(e=>ek.includes(e.id)).reduce((e,t)=>e+t.valorPrice,0),eZ=()=>{if(!q)return null;let e=q.valorPrice,t=""===eD?0:Number(eD),a=eE+t,r=e-a,s=Math.round(.04*a);return{targetPrice:e,myProductsValue:eE,myValorOffer:t,totalOffer:a,difference:r,estimatedFee:s,netToSeller:a-s,isBalanced:Math.abs(r)<=.05*e,isExceeding:r<0,isShort:r>0}},eA=(0,s.useRef)(null),[eM,eO]=(0,s.useState)(!1),[eB,eR]=(0,s.useState)(null),[eF,e$]=(0,s.useState)(null),[eI,eG]=(0,s.useState)(0),[eL,e_]=(0,s.useState)(!1),[eq,eK]=(0,s.useState)(null),[eH,eU]=(0,s.useState)(null),[eY,eJ]=(0,s.useState)(!1),[eW,eQ]=(0,s.useState)(!1),[eX,e0]=(0,s.useState)(3),[e1,e2]=(0,s.useState)(!1),[e5,e4]=(0,s.useState)(!1),[e3,e6]=(0,s.useState)({title:"",description:"",condition:"",editReason:""}),[e8,e7]=(0,s.useState)(!1),[e9,te]=(0,s.useState)(""),[tt,ta]=(0,s.useState)(null),[tr,ts]=(0,s.useState)(""),[tl,ti]=(0,s.useState)(""),[tn,td]=(0,s.useState)(!1),[tc,to]=(0,s.useState)(""),[tx,tm]=(0,s.useState)(""),[tu,tp]=(0,s.useState)(null),th=(0,s.useRef)(null);(0,$.useBodyScrollLock)(en||X||eW||eM),(0,s.useEffect)(()=>(en||X||eW||eM?window.dispatchEvent(new CustomEvent("hideBottomNav")):window.dispatchEvent(new CustomEvent("showBottomNav")),()=>{window.dispatchEvent(new CustomEvent("showBottomNav"))}),[en,X,eW,eM]),(0,s.useEffect)(()=>{if(en||eM){document.body.style.overflow="hidden",document.body.style.touchAction="none";let e=e=>{if(e.touches.length>1)return;let t=e.target.closest("[data-scrollable]");if((!t||!(t.scrollTop>0))&&0===window.scrollY){let t=e.touches[0].clientY,a=e=>{e.touches[0].clientY>t&&e.preventDefault()};document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",()=>{document.removeEventListener("touchmove",a)},{once:!0})}};return document.addEventListener("touchstart",e,{passive:!0}),()=>{document.body.style.overflow="",document.body.style.touchAction="",document.removeEventListener("touchstart",e)}}},[en,eM]),(0,s.useEffect)(()=>{e.id&&tN()},[e.id,_]),(0,s.useEffect)(()=>{if(X&&q){tv();let e=setInterval(tv,5e3);return()=>clearInterval(e)}},[X,q]),(0,s.useEffect)(()=>{eA.current?.scrollIntoView({behavior:"smooth"})},[et]),(0,s.useEffect)(()=>{en&&a?.user?.email&&(tk(),tg(),tf())},[en,a]),(0,s.useEffect)(()=>{eL&&q&&fetch(`/api/valor/price-breakdown?valor=${q.valorPrice}&city=${encodeURIComponent(q.city||"Ä°zmir")}`).then(e=>e.json()).then(eK).catch(()=>{})},[eL,q]);let tg=async()=>{if(q){eJ(!0);try{let e=await fetch("/api/swap-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:q.id,previewOnly:!0})}),t=await e.json();e.ok?eU(t):t.requiresPhoneVerification&&J("Takas yapabilmek i\xe7in telefon numaranÄ±zÄ± doÄŸrulamanÄ±z gerekiyor. Profil sayfasÄ±ndan doÄŸrulama yapabilirsiniz.")}catch(e){console.error("Deposit preview error:",e)}finally{eJ(!1)}}},tf=async()=>{if(q&&a?.user)try{let e=await fetch("/api/swap-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:q.id,previewOnly:!0,offeredValor:q.valorPrice})}),t=await e.json();t.preview&&tp({completedSwaps:t.completedSwaps||0,currentNetGain:t.currentNetGain||0,remainingAllowance:t.remainingAllowance??400,maxAllowedGain:t.maxAllowedGain||400,lockedBonus:t.lockedBonus||0,usableBalance:t.availableBalance||0})}catch(e){console.error("Swap capacity check error:",e)}};(0,s.useEffect)(()=>{a?.user?.email&&tb()},[a]);let tb=async()=>{try{let e=await fetch("/api/ai-visualize");if(e.ok){let t=await e.json();e0(t.remainingCredits),e2(t.isAdmin)}}catch(e){console.error("Credits check error:",e)}},ty=async()=>{if(q){if(!tt&&!tl.trim()){tm("L\xfctfen oda fotoÄŸrafÄ± y\xfckleyin veya oda a\xe7Ä±klamasÄ± girin");return}td(!0),tm(""),to("");try{let e=new FormData;tt&&e.append("environmentImage",tt),e.append("productImage",q.images[0]),e.append("productTitle",q.title),e.append("category",q.category.name.toLowerCase()),tl&&e.append("roomDescription",tl);let t=await fetch("/api/ai-visualize",{method:"POST",body:e}),a=await t.json();if(!t.ok){tm(a.error||"G\xf6rselleÅŸtirme oluÅŸturulamadÄ±");return}to(a.imageUrl),e0(a.remainingCredits)}catch(e){tm("Bir hata oluÅŸtu, l\xfctfen tekrar deneyin")}finally{td(!1)}}},tj=()=>{ta(null),ts(""),ti(""),to(""),tm("")},tk=async()=>{ew(!0);try{let e=await fetch("/api/products?mine=true");if(e.ok){let t=await e.json();ej(t.products||[])}}catch(e){console.error("My products fetch error:",e)}finally{ew(!1)}},tN=async()=>{if(!e.id){J("\xdcr\xfcn ID bulunamadÄ±"),U(!1);return}try{U(!0),J("");let t=await fetch(`/api/products/${e.id}?lang=${_}`);if(!t.ok)throw Error("\xdcr\xfcn bulunamadÄ±");let a=await t.json();if(!a||!a.id)throw Error("\xdcr\xfcn verisi alÄ±namadÄ±");K(a),e6({title:a.title||"",description:a.description||"",condition:a.condition||"good",editReason:""}),(0,O.addToRecentViews)({id:a.id,title:a.translatedTitle||a.title,valorPrice:a.valorPrice,images:a.images})}catch(e){console.error("Product fetch error:",e),J(e?.message||"\xdcr\xfcn y\xfcklenirken bir hata oluÅŸtu")}finally{U(!1)}},tv=async()=>{if(q)try{let e=await fetch(`/api/messages?userId=${q.user.id}&productId=${q.id}`);if(e.ok){let t=await e.json();ea(t)}}catch(e){console.error("Messages fetch error:",e)}},tw=async()=>{if(er.trim()&&q&&!el){ei(!0);try{let e=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:q.user.id,content:er,productId:q.id})});if(e.ok){let t=await e.json();ea(e=>[...e,t]),es("")}}catch(e){console.error("Send message error:",e)}finally{ei(!1)}}},tD=async()=>{if(q&&!eu){if("question"===ex){ep(!0),J("");try{let e=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:q.user.id,content:ec,productId:q.id})});if(e.ok)eb(!0),setTimeout(()=>{ed(!1),eb(!1),eo(""),ee(!0),tv()},2e3);else{let t=await e.json();J(t.error||"Mesaj g\xf6nderilemedi")}}catch(e){console.error("Send question error:",e),J("Bir hata oluÅŸtu")}finally{ep(!1)}return}if(eH&&!eH.canAfford){J(`Yetersiz bakiye. Teminat i\xe7in ${eH.depositRequired} Valor gerekli.`);return}ep(!0),J("");try{let e=await fetch("/api/swap-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:q.id,message:(()=>{let e=ec||"";if(ek&&ek.length>0){let t=ey.filter(e=>ek.includes(e.id)).reduce((e,t)=>e+t.valorPrice,0),a=t-q.valorPrice;if(e+=`

---
ðŸ“¦ Teklif edilen \xfcr\xfcnler (${ek.length} adet, toplam ${t}V):
`+ey.filter(e=>ek.includes(e.id)).map(e=>`â€¢ ${e.title} (${e.valorPrice}V)`).join("\n"),"direct_swap"===eS)e+=`

ðŸ¤ Birebir takas teklifi â€” deÄŸer farkÄ± g\xf6zetilmeden \xfcr\xfcnlerin deÄŸiÅŸimi isteniyor.`;else if("valor_diff"===eS&&a>0)e+=`

ðŸ’° Benim \xfcr\xfcnlerim ${a}V daha deÄŸerli. Bu farkÄ±n Valor olarak \xf6denmesini talep ediyorum.`;else if("valor_diff"===eS&&a<0){let t=""===eD?Math.abs(a):Number(eD);e+=`

ðŸ’° Ek ${t}V Valor \xf6demeyi teklif ediyorum (fark kapatma).`}else"request_product"===eS&&(a>0?e+=`

ðŸ“¦ \xdcr\xfcnlerim ${a}V daha deÄŸerli. Fark i\xe7in ek \xfcr\xfcn sunmanÄ±zÄ± rica ediyorum.`:a<0?e+=`

ðŸ“¦ FarkÄ± kapatmak i\xe7in ek \xfcr\xfcn eklemeyi d\xfcÅŸ\xfcn\xfcyorum. DetaylarÄ± konuÅŸalÄ±m.`:e+=`

ðŸ“¦ Teklifi zenginleÅŸtirmek i\xe7in ek \xfcr\xfcn \xf6neriyorum.`)}return e.trim()})(),offeredProductId:ek[0]||null,offeredValor:"direct_swap"===eS?0:""===eD?q.valorPrice:Number(eD)})}),t=await e.json();e.ok?(eg(!0),setTimeout(()=>{ed(!1),eg(!1),eo(""),eN([]),eU(null),window.dispatchEvent(new CustomEvent("showBottomNav"))},2e3)):t.requiresPhoneVerification?J("Takas yapabilmek i\xe7in telefon numaranÄ±zÄ± doÄŸrulamanÄ±z gerekiyor. Profil sayfasÄ±ndan doÄŸrulama yapabilirsiniz."):J(t.error||"Bir hata oluÅŸtu")}catch(e){J("Talep g\xf6nderilirken hata oluÅŸtu")}finally{ep(!1)}}},tC=async(e,t)=>{if(q){ep(!0),J("");try{let{data:a,error:r}=await (0,I.wz)("/api/swap-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:q.id,offeredProductId:e,message:e?`\xdcr\xfcn\xfcmle takas teklifi (Valor fark: ${t})`:`${t} Valor ile takas teklifi`,pendingValorAmount:t>0?t:q.valorPrice,quickOffer:!0}),timeout:15e3});if(r){J(r),ep(!1);return}a&&(a.requiresPhoneVerification?J("Takas yapabilmek i\xe7in telefon numaranÄ±zÄ± doÄŸrulamanÄ±z gerekiyor."):a.insufficientBalance?J(`Yetersiz bakiye. ${a.required} Valor gerekli.`):a.swapEligibility?.activeProducts===0?J("Takas teklifi verebilmek i\xe7in \xf6nce en az 1 \xfcr\xfcn eklemeniz gerekiyor."):(eg(!0),eR("success")))}catch(e){console.error("Quick swap error:",e),J("BaÄŸlantÄ± hatasÄ±. L\xfctfen tekrar deneyin.")}finally{ep(!1)}}},tS=e=>{let t=new Date(e),a=Math.floor(Math.abs(new Date().getTime()-t.getTime())/864e5);return 0===a?"tr"===_?"Bug\xfcn":"Today":1===a?"tr"===_?"D\xfcn":"Yesterday":a<7?"tr"===_?`${a} g\xfcn \xf6nce`:`${a} days ago`:t.toLocaleDateString("tr"===_?"tr-TR":"en-US")};if(H)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-frozen-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"\xdcr\xfcn y\xfckleniyor..."})]})});if(Y||!q)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(x.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-2",children:"\xdcr\xfcn BulunamadÄ±"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:Y||"Bu \xfcr\xfcn mevcut deÄŸil veya kaldÄ±rÄ±lmÄ±ÅŸ olabilir."}),(0,r.jsxs)(d.default,{href:"/urunler",className:"inline-flex items-center gap-2 px-4 py-2 bg-frozen-500 text-white rounded-lg font-semibold hover:bg-frozen-600 transition-colors",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),"\xdcr\xfcnlere D\xf6n"]})]})});let tz=a?.user?.email&&q.user.id===a.user?.id;return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-50 pb-20 md:pb-12",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[(0,r.jsxs)("button",{onClick:()=>t.back(),className:"hidden md:flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Geri D\xf6n"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative aspect-square rounded-2xl overflow-hidden bg-white shadow-lg",children:[q.images.length>0?(0,r.jsx)(n.default,{src:q.images[W],alt:q.title,fill:!0,className:"object-cover",priority:!0}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,r.jsx)(u.Z,{className:"w-24 h-24 text-gray-300"})}),q.images.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>Q(e=>0===e?q.images.length-1:e-1),className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-gray-800/80 shadow-lg flex items-center justify-center hover:bg-gray-900/90 transition-colors",children:(0,r.jsx)(p.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("button",{onClick:()=>Q(e=>e===q.images.length-1?0:e+1),className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-gray-800/80 shadow-lg flex items-center justify-center hover:bg-gray-900/90 transition-colors",children:(0,r.jsx)(h.Z,{className:"w-6 h-6 text-white"})})]}),q.images.length>1&&(0,r.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-3 py-1 rounded-full bg-black/60 text-white text-sm",children:[W+1," / ",q.images.length]}),(0,r.jsx)("div",{className:"absolute top-4 right-4",children:(0,r.jsx)(B._,{productId:q.id,initialCount:q._count?.favorites||0,size:"lg",showCount:!0})})]}),q.images.length>1&&(0,r.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:q.images.map((e,t)=>(0,r.jsx)("button",{onClick:()=>Q(t),className:`relative w-20 h-20 rounded-lg overflow-hidden flex-shrink-0 border-2 transition-all ${t===W?"border-frozen-500":"border-transparent"}`,children:(0,r.jsx)(n.default,{src:e,alt:"",fill:!0,className:"object-cover"})},t))})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:q.translatedTitle||q.title}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[a?.user&&(q.user?.id===a.user.id||e1)&&(0,r.jsxs)("button",{onClick:()=>e4(!e5),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"D\xfczenle"]}),(0,r.jsx)("button",{className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,r.jsx)(g.Z,{className:"w-6 h-6 text-gray-500"})})]})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center flex-wrap gap-3",children:[q.isFreeAvailable?(0,r.jsx)("div",{className:"px-4 py-2 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:(0,r.jsx)("span",{className:"text-2xl font-bold",children:"\uD83C\uDF81 Bedelsiz"})}):(0,r.jsxs)("button",{onClick:()=>e_(!eL),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:from-purple-600 hover:to-blue-600 transition-colors",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold",children:["â­ ",q.valorPrice]}),(0,r.jsx)("span",{className:"ml-1 text-sm",children:"Valor"}),(0,r.jsx)("span",{className:"text-xs ml-2 opacity-80",children:"â“˜"})]}),(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"new"===q.condition?"bg-green-100 text-green-700":"like_new"===q.condition?"bg-blue-100 text-blue-700":"good"===q.condition?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:q.translatedCondition||G[q.condition]?.[_]||q.condition}),q.acceptsNegotiation&&!q.isFreeAvailable&&(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-700 flex items-center gap-1",children:"\uD83E\uDD1D PazarlÄ±ÄŸa A\xe7Ä±k"})]}),eL&&eq&&(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border dark:border-gray-700 text-sm animate-in slide-in-from-top-2",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["\uD83D\uDCCD ",eq.city," b\xf6lge fiyatlarÄ±"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,r.jsx)("span",{className:"text-xs",children:"\uD83C\uDDF9\uD83C\uDDF7"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-red-700 dark:text-red-300",children:["â‰ˆ ",eq.localPrices.TRY.toLocaleString("tr-TR")," â‚º"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,r.jsx)("span",{className:"text-xs",children:"\uD83C\uDDEA\uD83C\uDDFA"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-blue-700 dark:text-blue-300",children:["â‰ˆ ",eq.localPrices.EUR," â‚¬"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,r.jsx)("span",{className:"text-xs",children:"\uD83C\uDDFA\uD83C\uDDF8"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-green-700 dark:text-green-300",children:["â‰ˆ ",eq.localPrices.USD," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,r.jsx)("span",{className:"text-xs",children:"\uD83C\uDDEC\uD83C\uDDE7"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-yellow-700 dark:text-yellow-300",children:["â‰ˆ ",eq.localPrices.GBP," \xa3"]})]})]}),(0,r.jsx)("p",{className:"text-[10px] text-gray-400 mt-2",children:eq.explanation})]}),q.aiValorPrice&&(0,r.jsxs)("div",{className:"p-3 rounded-xl bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-purple-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-purple-800",children:"tr"===_?"AI DeÄŸerlendirmesi":"AI Valuation"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-lg font-bold text-purple-700",children:[q.aiValorPrice," Valor"]}),q.valorPrice!==q.aiValorPrice&&(0,r.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded-full ${q.valorPrice>q.aiValorPrice?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:[q.valorPrice>q.aiValorPrice?"+":"",Math.round((q.valorPrice-q.aiValorPrice)/q.aiValorPrice*100),"%"]})]}),q.aiValorReason&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:q.aiValorReason})]}),q.editCount>0&&(0,r.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:["âœï¸ Bu ilan ",q.editCount," kez d\xfczenlendi",q.lastEditedAt&&(0,r.jsxs)("span",{children:["â€¢ Son: ",new Date(q.lastEditedAt).toLocaleDateString("tr-TR")]})]}),q.lastEditReason&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:['\uD83D\uDCDD "',q.lastEditReason,'"']}),q.editHistory&&q.editHistory.length>0&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-[10px] text-blue-500 cursor-pointer",children:"D\xfczenleme ge\xe7miÅŸi"}),(0,r.jsx)("div",{className:"mt-1 space-y-1",children:q.editHistory.map((e,t)=>(0,r.jsxs)("div",{className:"text-[10px] text-gray-500 flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("tr-TR")}),e.reason&&(0,r.jsxs)("span",{children:['â€” "',e.reason,'"']}),e.oldValor!==e.newValor&&(0,r.jsxs)("span",{className:e.newValor>e.oldValor?"text-green-600":"text-red-600",children:[e.oldValor,"V â†’ ",e.newValor,"V"]})]},t))})]})]})]})]}),e5&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-bold text-blue-800",children:"\uD83D\uDCDD Ä°lanÄ± D\xfczenle"}),(0,r.jsx)("button",{onClick:()=>e4(!1),className:"text-gray-400 hover:text-gray-600 text-xl",children:"âœ•"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:"BaÅŸlÄ±k"}),(0,r.jsx)("input",{type:"text",value:e3.title,onChange:e=>e6(t=>({...t,title:e.target.value})),className:"w-full p-2 border rounded-lg text-sm",maxLength:100})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:"A\xe7Ä±klama"}),(0,r.jsx)("textarea",{value:e3.description,onChange:e=>e6(t=>({...t,description:e.target.value})),className:"w-full p-2 border rounded-lg text-sm h-24 resize-none",maxLength:2e3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:"Durum"}),(0,r.jsxs)("select",{value:e3.condition,onChange:e=>e6(t=>({...t,condition:e.target.value})),className:"w-full p-2 border rounded-lg text-sm",children:[(0,r.jsx)("option",{value:"new",children:"SÄ±fÄ±r/Yeni"}),(0,r.jsx)("option",{value:"likeNew",children:"Yeni Gibi"}),(0,r.jsx)("option",{value:"good",children:"Ä°yi"}),(0,r.jsx)("option",{value:"fair",children:"Orta"}),(0,r.jsx)("option",{value:"poor",children:"K\xf6t\xfc"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:["D\xfczenleme Nedeni ",(0,r.jsx)("span",{className:"text-gray-400",children:"(opsiyonel)"})]}),(0,r.jsx)("input",{type:"text",value:e3.editReason,onChange:e=>e6(t=>({...t,editReason:e.target.value})),placeholder:"\xd6r: A\xe7Ä±klama g\xfcncellendi, fotoÄŸraf eklendi...",className:"w-full p-2 border rounded-lg text-sm",maxLength:200})]}),e3.condition!==q.condition&&(0,r.jsx)("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-xs text-yellow-700",children:"âš ï¸ \xdcr\xfcn durumunu deÄŸiÅŸtirdiÄŸiniz i\xe7in Valor deÄŸeri yeniden hesaplanacaktÄ±r."})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:async()=>{e7(!0),te("");try{let e=await fetch(`/api/products/${q.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"edit",title:e3.title,description:e3.description,condition:e3.condition,editReason:e3.editReason})}),t=await e.json();e.ok?(te(t.valorChanged?`âœ… G\xfcncellendi! Valor: ${t.oldValor} â†’ ${t.newValor}`:"âœ… G\xfcncellendi!"),e4(!1),window.location.reload()):alert(t.error||"Hata oluÅŸtu")}catch{alert("BaÄŸlantÄ± hatasÄ±")}e7(!1)},disabled:e8,className:"flex-1 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold hover:bg-blue-600 disabled:opacity-50",children:e8?"â³ Kaydediliyor...":"\uD83D\uDCBE DeÄŸiÅŸiklikleri Kaydet"}),(0,r.jsx)("button",{onClick:()=>e4(!1),className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200",children:"Ä°ptal"})]}),e9&&(0,r.jsx)("p",{className:"text-sm text-green-600 font-medium",children:e9})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[q.district?`${q.district}, `:"",q.city]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:tS(q.createdAt)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[q.views," ","tr"===_?"g\xf6r\xfcnt\xfclenme":"es"===_?"vistas":"ca"===_?"visualitzacions":"views"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(k.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:q.translatedCategory||q.category.translatedName||q.category.name})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5 text-frozen-500"}),"tr"===_?"\xdcr\xfcn A\xe7Ä±klamasÄ±":"es"===_?"Descripci\xf3n del Producto":"ca"===_?"Descripci\xf3 del Producte":"Product Description"]}),(0,r.jsx)("p",{className:"text-gray-600 whitespace-pre-line",children:q.translatedDescription||q.description})]}),(0,r.jsx)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 my-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"text-xl mt-0.5",children:"\uD83D\uDEE1ï¸"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-green-800 dark:text-green-200 mb-1.5",children:"G\xfcvenli Teslimat Garantisi"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-[11px] text-green-700 dark:text-green-300",children:[(0,r.jsx)("span",{className:"flex items-center gap-1",children:"\uD83D\uDD32 QR Kod DoÄŸrulama"}),(0,r.jsx)("span",{className:"flex items-center gap-1",children:"\uD83D\uDD10 6 Haneli Onay Kodu"}),(0,r.jsx)("span",{className:"flex items-center gap-1",children:"\uD83D\uDCB0 Valor Teminat Kilidi"}),(0,r.jsx)("span",{className:"flex items-center gap-1",children:"\uD83D\uDCF8 FotoÄŸraflÄ± KanÄ±t"})]})]})]})}),a?.user&&(0,r.jsx)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{tj(),eQ(!0)},className:"w-full bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsx)(f.Z,{className:"w-6 h-6"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("p",{className:"font-bold text-lg",children:"tr"===_?"TAKAS-A AldÄ±ÄŸÄ±m \xdcr\xfcn NasÄ±l G\xf6r\xfcn\xfcr?":"How Will This Product Look?"}),(0,r.jsx)("p",{className:"text-sm opacity-90",children:e1?"âœ¨ Admin: SÄ±nÄ±rsÄ±z kullanÄ±m":eX>0?`ðŸŽ ${eX} \xfccretsiz hak kaldÄ±`:"\uD83D\uDCB3 YakÄ±nda TL ile satÄ±n alma!"})]}),(0,r.jsx)(v.Z,{className:"w-6 h-6"})]})}),q.usageInfo&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"w-5 h-5 text-frozen-500"}),"tr"===_?"KullanÄ±m Bilgisi":"es"===_?"Informaci\xf3n de Uso":"ca"===_?"Informaci\xf3 d'\xdas":"Usage Info"]}),(0,r.jsx)("p",{className:"text-gray-600 whitespace-pre-line",children:q.usageInfo})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"SatÄ±cÄ± Bilgileri"}),void 0!==q.user.trustScore&&(0,r.jsx)(R.TrustBadge,{trustScore:q.user.trustScore,size:"sm"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-xl font-bold",children:(0,F.Gf)(q.user).charAt(0)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:(0,F.Gf)(q.user)}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),q.user._count.products," \xfcr\xfcn"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4"}),tS(q.user.createdAt)," \xfcye"]})]})]})]}),(0,r.jsx)("div",{className:"border-t pt-4",children:(0,r.jsx)(R.UserRatingSummary,{userId:q.user.id})})]}),q._count&&q._count.favorites>0&&(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-sm",children:[(0,r.jsx)(D.Z,{className:"w-4 h-4 fill-red-100 text-red-400"}),(0,r.jsxs)("span",{children:[q._count.favorites," kiÅŸi bu \xfcr\xfcn\xfc favoriledi"]})]}),!tz&&(0,r.jsxs)(r.Fragment,{children:[tu&&tu.completedSwaps<3&&a?.user&&(0,r.jsxs)("div",{className:"mb-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-700",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"âš ï¸"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-amber-800 dark:text-amber-200",children:"Ä°lk Takas Koruma KuralÄ±"}),(0,r.jsxs)("p",{className:"text-[11px] text-amber-700 dark:text-amber-300 mt-1",children:["Ä°lk ",3-tu.completedSwaps," takasÄ±nÄ±zda toplam"," ",(0,r.jsxs)("strong",{children:[tu.maxAllowedGain,"V"]}),"'den fazla net kazan\xe7 elde edemezsiniz."]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-3 text-[11px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-amber-600",children:"\uD83D\uDCCA"}),(0,r.jsxs)("span",{className:"text-amber-700 dark:text-amber-300",children:["Mevcut: ",(0,r.jsxs)("strong",{children:[tu.currentNetGain,"V"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-green-600",children:"âœ…"}),(0,r.jsxs)("span",{className:"text-green-700 dark:text-green-300",children:["Kalan: ",(0,r.jsxs)("strong",{children:[tu.remainingAllowance,"V"]})]})]})]}),(0,r.jsx)("div",{className:"mt-2 h-1.5 bg-amber-200 dark:bg-amber-800 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-amber-500 rounded-full transition-all",style:{width:`${Math.min(100,tu.currentNetGain/tu.maxAllowedGain*100)}%`}})})]})]}),tu.lockedBonus>0&&(0,r.jsxs)("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 mt-2 ml-7",children:["\uD83D\uDD12 ",tu.lockedBonus,"V bonus kilitli â€” ilk takasÄ±nÄ±zÄ± tamamlayÄ±nca a\xe7Ä±lÄ±r"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{onClick:()=>{if(!a){t.push("/giris");return}eO(!0),eR(null),e$(null),eG(0),tk()},className:"w-full py-4 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg hover:opacity-90 transition-all flex items-center justify-center gap-3 shadow-lg hover:shadow-xl",children:[(0,r.jsx)(C.Z,{className:"w-6 h-6"}),"Takas Teklif Et",(0,r.jsxs)("span",{className:"text-sm font-normal opacity-90",children:["(",q.valorPrice," V)"]})]}),(0,r.jsx)("div",{className:"p-3 bg-purple-50 rounded-xl border border-purple-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-bold text-purple-800",children:"\xc7oklu Takas FÄ±rsatÄ±"}),(0,r.jsx)("p",{className:"text-xs text-purple-600",children:"Bu \xfcr\xfcne ilgi bildirirseniz, algoritmamÄ±z sizin i\xe7in 3+ kiÅŸilik takas d\xf6ng\xfcleri arayacak. Direkt takas olmasa bile \xe7oklu takas ile bu \xfcr\xfcne sahip olabilirsiniz!"})]})]})}),q.acceptsNegotiation&&(0,r.jsxs)("button",{onClick:()=>{if(!a){t.push("/giris");return}eo(""),em("swap"),eb(!1),eg(!1),eC(q?.valorPrice||0),ed(!0)},className:"w-full py-3 rounded-xl border-2 border-orange-400 bg-orange-50 text-orange-700 font-semibold hover:bg-orange-100 transition-all flex items-center justify-center gap-2",children:[(0,r.jsx)(k.Z,{className:"w-5 h-5"}),"PazarlÄ±klÄ± Teklif Ver"]}),(0,r.jsxs)("button",{onClick:()=>{if(!a){t.push("/giris");return}em("question"),eo(""),ed(!0)},className:"w-full py-3 rounded-xl border-2 border-blue-400 bg-blue-50 text-blue-700 font-semibold hover:bg-blue-100 transition-all flex items-center justify-center gap-2",children:[(0,r.jsx)(S.Z,{className:"w-5 h-5"}),"SatÄ±cÄ±ya Soru Sor"]})]})]})]})]})]}),(0,r.jsx)(o.M,{children:en&&(0,r.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center z-[70] modal-backdrop",style:{overscrollBehavior:"contain"},onClick:()=>ed(!1),children:(0,r.jsxs)(c.E.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-900 rounded-t-3xl md:rounded-2xl p-6 w-full md:max-w-md max-h-[90vh] overflow-y-auto modal-content safe-area-bottom",style:{overscrollBehavior:"none",touchAction:"pan-y"},"data-scrollable":"true",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"md:hidden flex justify-center mb-4",children:(0,r.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),eh?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(z.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Teklifiniz G\xf6nderildi! \uD83C\uDF89"}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"\xdcr\xfcn sahibi en kÄ±sa s\xfcrede deÄŸerlendirecektir."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"TakaslarÄ±m sayfasÄ±ndan takip edebilirsiniz."}),(0,r.jsx)("div",{className:"p-3 bg-purple-50 rounded-xl border border-purple-200 text-left mb-4 max-w-sm mx-auto",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,r.jsxs)("p",{className:"text-xs text-purple-700",children:[(0,r.jsx)("span",{className:"font-bold",children:"Bonus:"})," \xc7oklu takas algoritmamÄ±z da sizin i\xe7in uygun d\xf6ng\xfcler arayacak!"]})]})}),(0,r.jsx)("button",{onClick:()=>t.push("/takaslarim"),className:"px-6 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:"TakaslarÄ±ma Git"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(C.Z,{className:"w-5 h-5 text-purple-500"}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Takas Teklif Et"})]}),(0,r.jsx)("button",{onClick:()=>ed(!1),className:"p-2 rounded-full hover:bg-gray-100",children:(0,r.jsx)(T.Z,{className:"w-5 h-5"})})]}),q&&(0,r.jsx)("div",{className:"mb-4",children:ek&&ek.length>0?(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-purple-900/20 rounded-xl border-2 border-indigo-200 dark:border-indigo-800",children:[(0,r.jsx)("h4",{className:"text-sm font-bold text-indigo-800 dark:text-indigo-200 mb-3 flex items-center gap-2",children:"\uD83D\uDCCA \xdcr\xfcne KarÅŸÄ± \xdcr\xfcn â€” DeÄŸer KarÅŸÄ±laÅŸtÄ±rmasÄ±"}),(()=>{let e=ey.filter(e=>ek.includes(e.id)).reduce((e,t)=>e+t.valorPrice,0),t=q.valorPrice,a=e-t;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,r.jsx)("p",{className:"text-[10px] uppercase font-bold text-blue-600 dark:text-blue-400 mb-1",children:"\uD83E\uDDD1 Senin teklifin"}),(0,r.jsxs)("p",{className:"text-lg font-black text-blue-800 dark:text-blue-200",children:[e," V"]}),(0,r.jsxs)("p",{className:"text-[10px] text-blue-600 dark:text-blue-400",children:[ek.length," \xfcr\xfcn"]})]}),(0,r.jsxs)("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-700",children:[(0,r.jsxs)("p",{className:"text-[10px] uppercase font-bold text-orange-600 dark:text-orange-400 mb-1",children:["\uD83D\uDC64 ",q.user?.name||"KarÅŸÄ± taraf"]}),(0,r.jsxs)("p",{className:"text-lg font-black text-orange-800 dark:text-orange-200",children:[t," V"]}),(0,r.jsx)("p",{className:"text-[10px] text-orange-600 dark:text-orange-400 truncate",children:q.title})]})]}),(0,r.jsx)("div",{className:`p-3 rounded-lg border-2 text-center ${Math.abs(a)<=.05*t?"bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700":a>0?"bg-blue-50 border-blue-300 dark:bg-blue-900/20 dark:border-blue-700":"bg-orange-50 border-orange-300 dark:bg-orange-900/20 dark:border-orange-700"}`,children:Math.abs(a)<=.05*t?(0,r.jsx)("p",{className:"font-bold text-green-700 dark:text-green-300",children:"âœ… DeÄŸerler yaklaÅŸÄ±k eÅŸit â€” birebir takas yapÄ±labilir"}):a>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-blue-700 dark:text-blue-300",children:["\uD83D\uDCB0 Senin \xfcr\xfcnlerin ",a," Valor daha deÄŸerli"]}),(0,r.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Bu farkÄ± karÅŸÄ± taraftan Valor olarak talep edebilirsin"})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-orange-700 dark:text-orange-300",children:["âš ï¸ KarÅŸÄ± tarafÄ±n \xfcr\xfcn\xfc ",Math.abs(a)," Valor daha deÄŸerli"]}),(0,r.jsx)("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"FarkÄ± kapatmak i\xe7in ek Valor \xf6deyebilir veya ek \xfcr\xfcn ekleyebilirsin"})]})}),(()=>{let e=a>0,t=a<0;return(0,r.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-1.5",children:[(0,r.jsx)("p",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"NasÄ±l devam etmek istersin?"}),(0,r.jsxs)("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-gray-700 cursor-pointer text-xs",children:[(0,r.jsx)("input",{type:"radio",name:"swapMode",checked:"valor_diff"===eS,onChange:()=>{ez("valor_diff"),t?eC(Math.abs(a)):eC(0)},className:"mt-0.5 text-purple-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e?`ðŸ’° FarkÄ± karÅŸÄ± taraftan Valor olarak talep et (+${a}V)`:t?`ðŸ’° FarkÄ± Valor olarak \xf6de (${Math.abs(a)}V)`:"\uD83D\uDCB0 Valor farkÄ± yok â€” tam denk"}),(0,r.jsx)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:e?"KarÅŸÄ± taraf sana eksik kalan Valor'u \xf6desin":t?"Eksik kalan deÄŸeri Valor ile tamamla":"Ek \xf6deme gerekmez"})]})]}),(0,r.jsxs)("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-gray-700 cursor-pointer text-xs",children:[(0,r.jsx)("input",{type:"radio",name:"swapMode",checked:"request_product"===eS,onChange:()=>{ez("request_product"),eC(0)},className:"mt-0.5 text-purple-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e?"\uD83D\uDCE6 KarÅŸÄ± taraftan ek \xfcr\xfcn iste":t?"\uD83D\uDCE6 FarkÄ± kapatmak i\xe7in ek \xfcr\xfcn ekle":"\uD83D\uDCE6 Ek \xfcr\xfcn ekle veya iste"}),(0,r.jsx)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:e?`KarÅŸÄ± taraf ~${a}V deÄŸerinde ek \xfcr\xfcn sunsun`:t?`~${Math.abs(a)}V deÄŸerinde ek \xfcr\xfcn se\xe7erek farkÄ± kapat`:"Teklifi zenginleÅŸtirmek i\xe7in ek \xfcr\xfcn ekleyebilirsin"})]})]}),(0,r.jsxs)("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-gray-700 cursor-pointer text-xs",children:[(0,r.jsx)("input",{type:"radio",name:"swapMode",checked:"direct_swap"===eS,onChange:()=>{ez("direct_swap"),eC(0)},className:"mt-0.5 text-purple-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"\uD83E\uDD1D Birebir takas â€” fark \xf6nemli deÄŸil"}),(0,r.jsx)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:"AnlaÅŸtÄ±k, \xfcr\xfcnleri olduÄŸu gibi deÄŸiÅŸtirelim, ek \xf6deme yok"})]})]}),"request_product"===eS&&t&&(0,r.jsx)("div",{className:"p-2 bg-yellow-50 dark:bg-yellow-900/10 rounded-lg border border-yellow-200 dark:border-yellow-800",children:(0,r.jsxs)("p",{className:"text-[11px] text-yellow-700 dark:text-yellow-400",children:["\uD83D\uDCA1 YukarÄ±daki \xfcr\xfcn listesinden ~",Math.abs(a),"V deÄŸerinde ek \xfcr\xfcn se\xe7erek farkÄ± kapatabilirsin. Veya mesaj alanÄ±na detay yazabilirsin."]})}),"request_product"===eS&&e&&(0,r.jsx)("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/10 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,r.jsxs)("p",{className:"text-[11px] text-blue-700 dark:text-blue-400",children:["\uD83D\uDCA1 Mesaj alanÄ±na hangi t\xfcr \xfcr\xfcn istediÄŸini yazabilirsin. KarÅŸÄ± taraf ~",a,"V deÄŸerinde ek \xfcr\xfcn sunmalÄ±."]})}),"valor_diff"===eS&&t&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-purple-700 dark:text-purple-300 mb-1",children:"\xd6deyeceÄŸin ek Valor:"}),(0,r.jsx)("input",{type:"number",min:"0",max:2*Math.abs(a),value:eD,onChange:e=>eC(""===e.target.value?"":parseInt(e.target.value)),placeholder:`${Math.abs(a)}`,className:"w-full px-4 py-2 rounded-xl border-2 border-purple-300 dark:border-purple-700 text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800"})]})]})})()]})})()]}):(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 rounded-xl border-2 border-purple-300 dark:border-purple-700 shadow-sm",children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-purple-800 dark:text-purple-300 mb-2",children:"\uD83D\uDCB0 Valor Teklifiniz"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"number",min:"1",max:2*q.valorPrice,value:eD,onChange:e=>eC(""===e.target.value?"":parseInt(e.target.value)),placeholder:`${q.valorPrice}`,className:"w-full px-4 py-3 pr-24 rounded-xl border-2 border-purple-400 focus:ring-2 focus:ring-purple-600 focus:border-purple-600 text-xl font-black text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 placeholder:text-purple-400"}),(0,r.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-purple-700 dark:text-purple-300 font-black text-base",children:"Valor"})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-purple-700 dark:text-purple-300 font-medium",children:["Ä°stenen: ",(0,r.jsxs)("strong",{className:"text-purple-900 dark:text-white",children:[q.valorPrice," Valor"]})]}),""!==eD&&eD<q.valorPrice&&(0,r.jsxs)("span",{className:"text-orange-700 font-bold bg-orange-100 dark:bg-orange-900/30 px-2 py-0.5 rounded-full",children:["%",Math.round((q.valorPrice-("number"==typeof eD?eD:0))/q.valorPrice*100)," pazarlÄ±k"]}),""!==eD&&"number"==typeof eD&&eD>q.valorPrice&&(0,r.jsxs)("span",{className:"text-green-700 font-bold bg-green-100 dark:bg-green-900/30 px-2 py-0.5 rounded-full",children:["%",Math.round((eD-q.valorPrice)/q.valorPrice*100)," \xfcst\xfc teklif â­"]}),""!==eD&&eD===q.valorPrice&&(0,r.jsx)("span",{className:"text-blue-700 font-bold bg-blue-100 dark:bg-blue-900/30 px-2 py-0.5 rounded-full",children:"Tam fiyat âœ“"})]})]})}),q&&(""!==eD||ek?.length>0)&&(0,r.jsxs)("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("p",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"\uD83D\uDCB8 TAHMÄ°NÄ° KESÄ°NTÄ° DETAYI"}),(()=>{let e=ek?.length>0?""===eD?eE:Number(eD)+eE:""===eD?0:Number(eD);if(e<=0)return(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center py-2",children:"Valor miktarÄ± girin"});let t=e,a=0,s=0,l=[];for(let e of[{min:0,limit:200,rate:.005},{min:200,limit:500,rate:.01},{min:500,limit:1e3,rate:.015},{min:1e3,limit:2500,rate:.02},{min:2500,limit:5e3,rate:.025},{min:5e3,limit:1/0,rate:.03}]){let r=e.limit===1/0?t:e.limit-e.min,i=Math.min(t,r);if(i<=0)break;let n=Math.round(i*e.rate*100)/100,d=s,c=s+i;l.push({start:d,end:c,rate:`%${100*e.rate}`,fee:n}),a+=n,t-=i,s+=i}a=Math.max(1,Math.round(a));let i=e>0?(a/e*100).toFixed(1):"0";return(0,r.jsxs)("div",{className:"space-y-1",children:[l.filter(e=>e.fee>0).map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:[0===e.start?"0":e.start.toLocaleString(),"-",e.end.toLocaleString(),"V (",e.rate,")"]}),(0,r.jsxs)("span",{children:[e.fee.toFixed(1),"V"]})]},t)),(0,r.jsxs)("div",{className:"flex justify-between text-xs font-bold text-gray-800 dark:text-gray-200 pt-1 border-t border-gray-200 dark:border-gray-600",children:[(0,r.jsxs)("span",{children:["Toplam kesinti (efektif %",i,")"]}),(0,r.jsxs)("span",{children:[a,"V"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-xs font-bold text-green-700 dark:text-green-400",children:[(0,r.jsx)("span",{children:"SatÄ±cÄ±ya gidecek (net)"}),(0,r.jsxs)("span",{children:[e-a,"V"]})]})]})})()]}),(0,r.jsx)(r.Fragment,{children:eY?(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-xl animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}):eH&&(0,r.jsxs)("div",{className:`mb-4 p-4 rounded-xl border ${eH.canAfford?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Gerekli Teminat"}),(0,r.jsxs)("span",{className:`text-lg font-bold ${eH.canAfford?"text-green-600":"text-red-600"}`,children:[eH.depositRequired," Valor"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Mevcut Bakiye"}),(0,r.jsxs)("span",{className:"font-medium text-gray-800",children:[eH.availableBalance," Valor"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Teminat OranÄ±"}),(0,r.jsxs)("span",{className:"font-medium text-purple-600",children:[eH.depositRate,"unverified"!==eH.trustLevel&&(0,r.jsxs)("span",{className:"text-xs ml-1",children:["(",eH.trustBadge,")"]})]})]}),!eH.canAfford&&(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-red-600",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:["Yetersiz bakiye! ",eH.depositRequired-eH.availableBalance," Valor daha gerekli."]})]}),eH.canAfford&&(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-green-600",children:[(0,r.jsx)(z.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Teminat i\xe7in yeterli bakiyeniz var!"})]})]})}),ev?(0,r.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"})}):ey.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["\uD83D\uDCE6 KarÅŸÄ±lÄ±ÄŸÄ±nda \xdcr\xfcn Teklif Et ",(0,r.jsx)("span",{className:"text-gray-400 font-normal",children:"(birden fazla se\xe7ebilirsiniz)"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"\xdcr\xfcn se\xe7erek Valor \xf6demesini azaltabilirsiniz"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 max-h-48 overflow-y-auto p-1",children:ey.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>eP(e.id),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition-all ${ek.includes(e.id)?"border-purple-500 ring-2 ring-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:[e.images?.[0]?(0,r.jsx)(n.default,{src:e.images[0],alt:e.title,fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"w-4 h-4 text-gray-300"})}),ek.includes(e.id)&&(0,r.jsx)("div",{className:"absolute inset-0 bg-purple-500/30 flex items-center justify-center",children:(0,r.jsx)(z.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-0.5",children:(0,r.jsxs)("p",{className:"text-[10px] text-white font-medium",children:[e.valorPrice,"V"]})})]},e.id))}),ek.length>0&&(0,r.jsxs)("div",{className:"mt-2 p-2.5 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[(0,r.jsxs)("p",{className:"text-xs text-purple-700 dark:text-purple-300 font-semibold",children:["âœ… ",ek.length," \xfcr\xfcn se\xe7ildi â€” Toplam: ",eE," Valor"]}),eE<(q?.valorPrice||0)&&(0,r.jsxs)("p",{className:"text-[11px] text-orange-600 dark:text-orange-400 mt-1",children:["âš ï¸ ",(q?.valorPrice||0)-eE," Valor fark kaldÄ± (Valor alanÄ±na yazÄ±labilir)"]})]})]}),q&&(""!==eD||ek.length>0)&&(()=>{let e=eZ();if(!e)return null;let t=e.myProductsValue-e.targetPrice;return(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-purple-900/20 rounded-xl border-2 border-indigo-200 dark:border-indigo-800",children:[(0,r.jsxs)("h4",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:["\uD83D\uDCCA ",ek.length>0?"\xdcr\xfcne KarÅŸÄ± \xdcr\xfcn â€” DeÄŸer KarÅŸÄ±laÅŸtÄ±rmasÄ±":"Takas \xd6zeti"]}),ek.length>0?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"p-2.5 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,r.jsx)("p",{className:"text-[10px] uppercase font-bold text-blue-600 dark:text-blue-400 mb-0.5",children:"\uD83E\uDDD1 Senin \xfcr\xfcnlerin"}),(0,r.jsxs)("p",{className:"text-lg font-black text-blue-800 dark:text-blue-200",children:[e.myProductsValue," V"]}),(0,r.jsxs)("p",{className:"text-[10px] text-blue-500",children:[ek.length," \xfcr\xfcn"]})]}),(0,r.jsxs)("div",{className:"p-2.5 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-700",children:[(0,r.jsxs)("p",{className:"text-[10px] uppercase font-bold text-orange-600 dark:text-orange-400 mb-0.5",children:["\uD83D\uDC64 ",q.user?.name||"KarÅŸÄ± taraf"]}),(0,r.jsxs)("p",{className:"text-lg font-black text-orange-800 dark:text-orange-200",children:[e.targetPrice," V"]}),(0,r.jsx)("p",{className:"text-[10px] text-orange-500 truncate",children:q.title})]})]}),(0,r.jsx)("div",{className:`p-3 rounded-lg border-2 text-center ${Math.abs(t)<=.05*e.targetPrice?"bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700":t>0?"bg-blue-50 border-blue-300 dark:bg-blue-900/20 dark:border-blue-700":"bg-orange-50 border-orange-300 dark:bg-orange-900/20 dark:border-orange-700"}`,children:Math.abs(t)<=.05*e.targetPrice?(0,r.jsx)("p",{className:"font-bold text-green-700 dark:text-green-300",children:"âœ… DeÄŸerler yaklaÅŸÄ±k eÅŸit â€” birebir takas yapÄ±labilir"}):t>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-blue-700 dark:text-blue-300",children:["\uD83D\uDCB0 Senin \xfcr\xfcnlerin ",t," Valor daha deÄŸerli"]}),(0,r.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Bu farkÄ± karÅŸÄ± taraftan Valor olarak talep edebilirsin"})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-orange-700 dark:text-orange-300",children:["âš ï¸ KarÅŸÄ± tarafÄ±n \xfcr\xfcn\xfc ",Math.abs(t)," Valor daha deÄŸerli"]}),(0,r.jsx)("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"FarkÄ± kapatmak i\xe7in ek Valor \xf6deyebilir veya ek \xfcr\xfcn ekleyebilirsin"})]})}),e.myValorOffer>0&&(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,r.jsx)("span",{className:"text-purple-700 dark:text-purple-300 text-sm",children:"\uD83D\uDCB0 Ek Valor \xf6demen"}),(0,r.jsxs)("span",{className:"font-bold text-purple-700 dark:text-purple-300",children:[e.myValorOffer," V"]})]})]}):(0,r.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-gray-800 rounded-lg",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"\uD83C\uDFAF Ä°stediÄŸin \xfcr\xfcn"}),(0,r.jsxs)("span",{className:"font-bold text-gray-900 dark:text-white",children:[e.targetPrice," V"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,r.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:"\uD83D\uDCB0 Valor teklifin"}),(0,r.jsxs)("span",{className:"font-bold text-purple-700 dark:text-purple-300",children:[e.myValorOffer||e.targetPrice," V"]})]}),e.myValorOffer>0&&e.myValorOffer<e.targetPrice&&(0,r.jsx)("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/10 rounded-lg",children:(0,r.jsxs)("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:["âš ï¸ %",Math.round((1-e.myValorOffer/e.targetPrice)*100)," pazarlÄ±k teklifi"]})})]}),0===ek.length&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-indigo-200 dark:border-indigo-700 space-y-1",children:[(0,r.jsx)("p",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Takas SonrasÄ± Tahmini:"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["\uD83D\uDC64 ",q.user?.name||"SatÄ±cÄ±"," alacak:"]}),(0,r.jsxs)("span",{className:"font-bold text-green-600",children:["+",e.netToSeller," V"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"\uD83C\uDFE6 Topluluk katkÄ±sÄ±:"}),(0,r.jsxs)("span",{className:"font-bold text-yellow-600",children:["~",e.estimatedFee," V"]})]}),(0,r.jsx)("p",{className:"text-[9px] text-gray-400 text-center mt-1",children:"* Tahmini. Ger\xe7ek kesinti progresif sisteme g\xf6re belirlenir."})]})]})})(),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[q?.isFreeAvailable&&(0,r.jsxs)("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-300",children:[(0,r.jsx)("span",{children:"\uD83C\uDF81"}),(0,r.jsx)("p",{className:"text-xs font-medium",children:"Bu \xfcr\xfcn bedelsiz de verilebilir!"})]}),q?.acceptsNegotiation&&!q?.isFreeAvailable&&(0,r.jsxs)("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[(0,r.jsx)("span",{children:"\uD83E\uDD1D"}),(0,r.jsx)("p",{className:"text-xs font-medium",children:"SatÄ±cÄ± pazarlÄ±ÄŸa a\xe7Ä±k"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uD83D\uDCAC SatÄ±cÄ±ya Not ",(0,r.jsx)("span",{className:"text-gray-400 font-normal",children:"(opsiyonel)"})]}),(0,r.jsx)("textarea",{value:ec,onChange:e=>eo(e.target.value),placeholder:"\xd6rn: Merhaba, \xfcr\xfcn\xfcn\xfczle ilgileniyorum. PazarlÄ±k yapabilir miyiz?",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none text-sm",rows:2})]}),Y&&(0,r.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 p-4 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-red-700",children:Y}),Y.includes("telefon")&&(0,r.jsxs)("a",{href:"/profil",className:"inline-flex items-center gap-2 mt-3 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg text-sm font-medium transition-colors",children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),"Profil SayfasÄ±na Git"]})]})]})}),(0,r.jsx)("button",{onClick:tD,disabled:eu||"swap"===ex&&null!==eH&&!1===eH.canAfford,className:`w-full mt-4 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${"swap"===ex&&eH&&!1===eH.canAfford?"bg-gray-300 text-gray-500 cursor-not-allowed":"question"===ex?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:opacity-90 disabled:opacity-50":"bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:opacity-90 disabled:opacity-50"}`,children:eu?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.Z,{className:"w-5 h-5 animate-spin"}),"G\xf6nderiliyor..."]}):"swap"===ex&&eH&&!1===eH.canAfford?"Yetersiz Bakiye":"question"===ex?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{className:"w-5 h-5"}),"Soru G\xf6nder"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{className:"w-5 h-5"}),"Takas Talebi G\xf6nder"]})})]})]})})}),(0,r.jsx)(o.M,{children:eM&&q&&(0,r.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center z-[70]",onClick:()=>{eO(!1),eR(null),e$(null),eG(0)},children:(0,r.jsxs)(c.E.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-2xl w-full md:max-w-md max-h-[85vh] overflow-y-auto safe-area-bottom",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"md:hidden flex justify-center pt-3 pb-2",children:(0,r.jsx)("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),!eB&&(0,r.jsxs)("div",{className:"p-5 space-y-3",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white text-center mb-4",children:"NasÄ±l takas yapmak istersiniz?"}),(0,r.jsx)("button",{onClick:()=>{eR("product")},className:"w-full p-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/30 dark:to-blue-900/30 border-2 border-purple-200 dark:border-purple-700 rounded-xl text-left hover:border-purple-400 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:"\uD83D\uDD04"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-gray-900 dark:text-white",children:"\xdcr\xfcn\xfcmle Takas Et"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Kendi \xfcr\xfcn\xfcn\xfcz\xfc karÅŸÄ±lÄ±k olarak teklif edin"})]})]})}),(0,r.jsx)("button",{onClick:()=>eR("valor"),className:"w-full p-4 bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 border-2 border-amber-200 dark:border-amber-700 rounded-xl text-left hover:border-amber-400 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCB0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-gray-900 dark:text-white",children:"Valor ile Al"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[q.valorPrice," Valor \xf6deyerek direkt alÄ±n"]})]})]})})]}),"product"===eB&&!eF&&(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Hangi \xfcr\xfcn\xfcn\xfcz\xfc teklif edeceksiniz?"}),(0,r.jsx)("button",{onClick:()=>eR(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"â† Geri"})]}),ev?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(P.Z,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-500",children:"\xdcr\xfcnleriniz y\xfckleniyor..."})]}):0===ey.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(u.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-gray-500 mb-3",children:"Aktif \xfcr\xfcn\xfcn\xfcz yok"}),(0,r.jsx)("button",{onClick:()=>t.push("/urun-ekle"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-bold",children:"+ \xdcr\xfcn Ekle"})]}):(0,r.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:ey.map(e=>(0,r.jsxs)("button",{onClick:()=>{e$(e),eG(q.valorPrice-e.valorPrice)},className:"w-full flex items-center gap-3 p-3 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-xl hover:border-purple-400 transition-colors text-left",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.images?.[0]?(0,r.jsx)("img",{src:e.images[0],alt:"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xl",children:"\uD83D\uDCE6"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-purple-600",children:["â­ ",e.valorPrice," Valor"]})]})]},e.id))})]}),"product"===eB&&eF&&(0,r.jsxs)("div",{className:"p-5 space-y-4",children:[(0,r.jsx)("button",{onClick:()=>e$(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"â† \xdcr\xfcn DeÄŸiÅŸtir"}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white text-center",children:"Takas \xd6zeti"}),(0,r.jsxs)("div",{className:"flex items-center gap-3 justify-center",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-gray-100 mx-auto mb-1",children:eF.images?.[0]?(0,r.jsx)("img",{src:eF.images[0],alt:"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"\uD83D\uDCE6"})}),(0,r.jsx)("p",{className:"text-xs font-medium truncate max-w-[100px] text-gray-700 dark:text-gray-300",children:eF.title}),(0,r.jsxs)("p",{className:"text-xs text-purple-600 font-bold",children:["â­ ",eF.valorPrice]})]}),(0,r.jsx)("div",{className:"text-2xl",children:"\uD83D\uDD04"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-gray-100 mx-auto mb-1",children:q.images?.[0]?(0,r.jsx)("img",{src:q.images[0],alt:"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"\uD83D\uDCE6"})}),(0,r.jsx)("p",{className:"text-xs font-medium truncate max-w-[100px] text-gray-700 dark:text-gray-300",children:q.title}),(0,r.jsxs)("p",{className:"text-xs text-purple-600 font-bold",children:["â­ ",q.valorPrice]})]})]}),0!==eI&&(0,r.jsx)("div",{className:`p-3 rounded-xl text-center ${eI>0?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200":"bg-green-50 dark:bg-green-900/20 border border-green-200"}`,children:eI>0?(0,r.jsxs)("p",{className:"text-sm font-bold text-amber-800 dark:text-amber-200",children:["\uD83D\uDCB0 ",eI," Valor fark \xf6demeniz gerekecek"]}):(0,r.jsxs)("p",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:["\uD83D\uDCB0 ",Math.abs(eI)," Valor fark size \xf6denecek"]})}),0===eI&&(0,r.jsx)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl text-center border border-green-200",children:(0,r.jsx)("p",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:"âœ… DeÄŸerler eÅŸit â€” doÄŸrudan takas!"})}),Y&&(0,r.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:["âš ï¸ ",Y]}),(0,r.jsx)("button",{onClick:()=>{tC(eF.id,eI>0?eI:0)},disabled:eu,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-lg disabled:opacity-50",children:eu?"â³ G\xf6nderiliyor...":"\uD83D\uDD04 Takas Teklifi G\xf6nder"})]}),"valor"===eB&&(0,r.jsxs)("div",{className:"p-5 space-y-4",children:[(0,r.jsx)("button",{onClick:()=>eR(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"â† Geri"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCB0"}),(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mt-2",children:[q.valorPrice," Valor \xf6deyeceksiniz"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:q.title})]}),Y&&(0,r.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:["âš ï¸ ",Y]}),(0,r.jsx)("button",{onClick:()=>{tC(null,q.valorPrice)},disabled:eu,className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-bold text-lg disabled:opacity-50",children:eu?"â³ G\xf6nderiliyor...":"\uD83D\uDCB0 Valor ile Teklif G\xf6nder"})]}),"success"===eB&&(0,r.jsxs)("div",{className:"p-6 text-center",children:[(0,r.jsx)(c.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:15},className:"mb-4",children:(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(z.Z,{className:"w-12 h-12 text-green-500"})})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"\uD83C\uDF89 Takas Teklifi G\xf6nderildi!"}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:[q?.user?.name||"\xdcr\xfcn sahibi"," en kÄ±sa s\xfcrede deÄŸerlendirecektir."]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:()=>{eO(!1),eR(null),eg(!1),t.push("/takaslarim")},className:"w-full py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold",children:"\uD83D\uDCCB Tekliflerimi G\xf6r\xfcnt\xfcle"}),(0,r.jsx)("button",{onClick:()=>{eO(!1),eR(null),eg(!1),e$(null)},className:"w-full py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-medium",children:"\xdcr\xfcne Geri D\xf6n"})]})]})]})})}),(0,r.jsxs)(o.M,{children:[X&&(0,r.jsxs)(c.E.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-2xl z-[70] flex flex-col safe-area-top safe-area-bottom",style:{overscrollBehavior:"contain"},children:[(0,r.jsxs)("div",{className:"p-4 border-b flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>ee(!1),className:"p-2 rounded-full hover:bg-gray-100",children:(0,r.jsx)(T.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white font-bold",children:(0,F.Gf)(q.user).charAt(0)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:(0,F.Gf)(q.user)}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:q.title})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===et.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(S.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Hen\xfcz mesaj yok"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"\xdcr\xfcn hakkÄ±nda soru sormaya baÅŸlayÄ±n"})]}):et.map(e=>{let t=e.sender.id!==q.user.id;return(0,r.jsx)("div",{className:`flex ${t?"justify-end":"justify-start"}`,children:(0,r.jsxs)("div",{className:`max-w-[80%] px-4 py-3 rounded-2xl ${t?"bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-br-md":"bg-gray-100 text-gray-800 rounded-bl-md"}`,children:[(0,r.jsx)("p",{children:e.content}),(0,r.jsx)("p",{className:`text-xs mt-1 ${t?"text-white/70":"text-gray-400"}`,children:new Date(e.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})},e.id)}),(0,r.jsx)("div",{ref:eA})]}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:er,onChange:e=>es(e.target.value),onKeyDown:e=>"Enter"===e.key&&tw(),placeholder:"MesajÄ±nÄ±zÄ± yazÄ±n...",className:"flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-frozen-500 focus:border-transparent"}),(0,r.jsx)("button",{onClick:tw,disabled:!er.trim()||el,className:"px-4 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white disabled:opacity-50 transition-all",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]})})]}),eW&&(0,r.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/60 flex items-end md:items-center justify-center modal-backdrop",style:{overscrollBehavior:"contain"},onClick:()=>!tn&&eQ(!1),children:(0,r.jsxs)(c.E.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},onClick:e=>e.stopPropagation(),className:"bg-white rounded-t-3xl md:rounded-3xl w-full md:max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl modal-content safe-area-bottom",children:[(0,r.jsx)("div",{className:"p-6 border-b bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white rounded-t-3xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(f.Z,{className:"w-7 h-7"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"AI G\xf6rselleÅŸtirme"}),(0,r.jsx)("p",{className:"text-sm opacity-90",children:e1?"SÄ±nÄ±rsÄ±z kullanÄ±m":`${eX} hak kaldÄ±`})]})]}),(0,r.jsx)("button",{onClick:()=>!tn&&eQ(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",disabled:tn,children:(0,r.jsx)(T.Z,{className:"w-6 h-6"})})]})}),(0,r.jsx)("div",{className:"p-6 space-y-6",children:tc?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"relative rounded-xl overflow-hidden shadow-lg",children:(0,r.jsx)("img",{src:tc,alt:"AI Visualization",className:"w-full"})}),(0,r.jsxs)("div",{className:"p-4 bg-green-50 text-green-700 rounded-xl flex items-center gap-2",children:[(0,r.jsx)(z.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsxs)("p",{className:"text-sm",children:["G\xf6rselleÅŸtirme baÅŸarÄ±yla oluÅŸturuldu!",!e1&&` (Kalan hak: ${eX})`]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("a",{href:tc,download:"takas-a-visualization.png",target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold text-center hover:bg-gray-200 transition-colors",children:"\uD83D\uDCE5 Ä°ndir"}),(0,r.jsx)("button",{onClick:tj,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold hover:shadow-lg transition-all",children:"\uD83D\uDD04 Yeni G\xf6rsel"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[q&&q.images[0]&&(0,r.jsx)("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)(n.default,{src:q.images[0],alt:q.title,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:q?.translatedTitle||q?.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:q?.translatedCategory||q?.category?.name})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\uD83D\uDCF8 Oda/Ortam FotoÄŸrafÄ± Y\xfckle"}),(0,r.jsx)("input",{ref:th,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){ta(t);let e=new FileReader;e.onload=e=>{ts(e.target?.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,r.jsx)("div",{onClick:()=>th.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center cursor-pointer hover:border-purple-400 hover:bg-purple-50 transition-all",children:tr?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:tr,alt:"Environment",className:"w-full h-48 object-cover rounded-lg"}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),ta(null),ts("")},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full",children:(0,r.jsx)(T.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(Z.Z,{className:"w-10 h-10 mx-auto text-gray-400"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Oda fotoÄŸrafÄ± y\xfcklemek i\xe7in tÄ±klayÄ±n"}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"JPG, PNG - Max 10MB"})]})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,r.jsx)("span",{className:"text-sm text-gray-400 font-medium",children:"VEYA"}),(0,r.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"âœï¸ OdanÄ± TanÄ±mla (AI hayal etsin)"}),(0,r.jsx)("textarea",{value:tl,onChange:e=>ti(e.target.value),placeholder:"\xd6rn: Modern bir salon, beyaz duvarlar, ahÅŸap zemin, b\xfcy\xfck pencere, minimalist dekorasyon...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:3})]}),tx&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 text-red-600 rounded-xl flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-sm",children:tx})]}),(0,r.jsx)("button",{onClick:ty,disabled:tn||!tt&&!tl.trim()||!e1&&eX<=0,className:"w-full py-4 rounded-xl bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:shadow-lg",children:tn?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(P.Z,{className:"w-5 h-5 animate-spin"}),"OluÅŸturuluyor... (10-30 sn)"]}):eX<=0&&!e1?"HakkÄ±nÄ±z KalmadÄ± \uD83D\uDE22":(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5"}),"G\xf6rselleÅŸtir!"]})}),(0,r.jsx)("p",{className:"text-xs text-gray-400 text-center",children:"\uD83E\uDD16 AI tarafÄ±ndan oluÅŸturulan g\xf6rsel tamamen hayal \xfcr\xfcn\xfcd\xfcr ve ger\xe7ek \xfcr\xfcn\xfcn g\xf6r\xfcn\xfcm\xfcn\xfc garanti etmez."})]})})]})})]}),q&&(0,r.jsx)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-gray-900 border-t dark:border-gray-700 p-3 safe-area-bottom shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 max-w-lg mx-auto",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(A.Z,{className:"w-4 h-4 text-purple-500 fill-current"}),(0,r.jsxs)("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:[q.valorPrice," Valor"]})]}),(0,r.jsx)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 truncate",children:q.title})]}),a?tz?(0,r.jsx)("span",{className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-xl text-sm font-medium",children:"Sizin \xfcr\xfcn\xfcn\xfcz"}):(0,r.jsx)("button",{onClick:()=>eO(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-sm hover:shadow-lg transition-all flex items-center gap-2 whitespace-nowrap",children:"\uD83D\uDD04 Takas Yap"}):(0,r.jsx)(d.default,{href:"/giris",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-sm flex items-center gap-2 whitespace-nowrap",children:"GiriÅŸ Yap"})]})})]})}},39291:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var r=a(15444),s=a(89300),l=a(65407),i=a(75762),n=a(79047),d=a(65522);function c({productId:e,initialCount:t=0,size:a="md",showCount:c=!1,className:o}){let{data:x}=(0,i.useSession)(),m=(0,n.useRouter)(),[u,p]=(0,s.useState)(!1),[h,g]=(0,s.useState)(t),[f,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{x?.user&&k()},[x,e]);let k=async()=>{try{let t=await fetch(`/api/favorites?productId=${e}`);if(t.ok){let e=await t.json();p(e.isFavorite)}}catch(e){console.error("Favorite check error:",e)}},N=async t=>{if(t.preventDefault(),t.stopPropagation(),!x?.user){m.push("/giris");return}if(!f){b(!0),j(!0),p(!u),g(e=>u?e-1:e+1);try{let t=await fetch("/api/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})});if(t.ok){let e=await t.json();p(e.isFavorite),g(e.favoriteCount)}else p(u),g(e=>u?e+1:e-1)}catch(e){console.error("Favorite toggle error:",e),p(u),g(e=>u?e+1:e-1)}finally{b(!1),setTimeout(()=>j(!1),300)}}};return(0,r.jsxs)("div",{className:(0,d.cn)("flex items-center gap-1",o),children:[(0,r.jsx)("button",{onClick:N,disabled:f,className:(0,d.cn)("rounded-full flex items-center justify-center transition-all duration-200","hover:scale-110 active:scale-95","bg-white/90 backdrop-blur-sm shadow-md hover:shadow-lg",{sm:"w-7 h-7",md:"w-9 h-9",lg:"w-11 h-11"}[a],y&&"animate-pulse"),title:u?"Favorilerden \xe7Ä±kar":"Favorilere ekle",children:(0,r.jsx)(l.Z,{className:(0,d.cn)({sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[a],"transition-all duration-200",u?"fill-red-500 text-red-500":"text-gray-500 hover:text-red-400")})}),c&&h>0&&(0,r.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:h})]})}},30863:function(e,t,a){"use strict";a.r(t),a.d(t,{RecentViews:function(){return u},addToRecentViews:function(){return m}});var r=a(15444),s=a(89300),l=a(31587),i=a(62492),n=a(51137),d=a(23572),c=a(41084),o=a(48001);let x="takas_recent_views";function m(e){try{let t=localStorage.getItem(x),a=t?JSON.parse(t):[];(a=a.filter(t=>t.id!==e.id)).unshift({id:e.id,title:e.title,valorPrice:e.valorPrice,image:e.images[0]||"/images/placeholder.jpg",viewedAt:Date.now()}),a.length>10&&(a=a.slice(0,10));try{localStorage.setItem(x,JSON.stringify(a))}catch(e){try{a=a.slice(0,5),localStorage.setItem(x,JSON.stringify(a))}catch{}}}catch{}}function u(){let[e,t]=(0,s.useState)([]),[a,m]=(0,s.useState)(0),[u,p]=(0,s.useState)(0);if((0,s.useEffect)(()=>{try{let e=localStorage.getItem(x);if(e){let a=JSON.parse(e);t(a),p(Math.max(0,(a.length-4)*180))}}catch(e){console.error("Error loading recent views:",e)}},[]),0===e.length)return null;let h=e=>{"left"===e?m(Math.max(0,a-360)):m(Math.min(u,a+360))},g=e=>{let t=Date.now()-e,a=Math.floor(t/6e4),r=Math.floor(t/36e5),s=Math.floor(t/864e5);return s>0?`${s} g\xfcn \xf6nce`:r>0?`${r} saat \xf6nce`:a>0?`${a} dk \xf6nce`:"Az \xf6nce"};return(0,r.jsx)("section",{className:"py-12 bg-white dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Son G\xf6r\xfcnt\xfclenenler"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ä°ncelediÄŸin \xfcr\xfcnlere hÄ±zlÄ±ca eriÅŸ"})]})]}),e.length>4&&(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>h("left"),disabled:0===a,className:"w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:(0,r.jsx)(n.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,r.jsx)("button",{onClick:()=>h("right"),disabled:a>=u,className:"w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:(0,r.jsx)(d.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]}),(0,r.jsx)("div",{className:"overflow-hidden",children:(0,r.jsx)(l.E.div,{className:"flex gap-4",animate:{x:-a},transition:{type:"spring",stiffness:300,damping:30},children:e.map((e,t)=>(0,r.jsx)(c.default,{href:`/urun/${e.id}`,className:"flex-shrink-0 w-[170px] group",children:(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"bg-gray-50 dark:bg-gray-800 rounded-xl overflow-hidden hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"relative aspect-square",children:[(0,r.jsx)(o.default,{src:e.image,alt:e.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),(0,r.jsx)("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-lg bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm",children:(0,r.jsxs)("span",{className:"text-xs font-semibold text-frozen-600 dark:text-frozen-400",children:[e.valorPrice," V"]})})]}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white text-sm line-clamp-1 group-hover:text-frozen-600 dark:group-hover:text-frozen-400 transition-colors",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:g(e.viewedAt)})]})]})},e.id))})})]})})}},80778:function(e,t,a){"use strict";a.r(t),a.d(t,{ReviewList:function(){return g},StarRating:function(){return u},TrustBadge:function(){return p},UserRatingSummary:function(){return h}});var r=a(15444),s=a(89300),l=a(79582),i=a(66124),n=a(90185),d=a(26298),c=a(62492),o=a(65522),x=a(82717);let m={fast_delivery:{tr:"HÄ±zlÄ± Teslimat",en:"Fast Delivery",es:"Entrega R\xe1pida",ca:"Lliurament R\xe0pid"},accurate_description:{tr:"DoÄŸru A\xe7Ä±klama",en:"Accurate Description",es:"Descripci\xf3n Precisa",ca:"Descripci\xf3 Precisa"},good_communication:{tr:"Ä°yi Ä°letiÅŸim",en:"Good Communication",es:"Buena Comunicaci\xf3n",ca:"Bona Comunicaci\xf3"},friendly:{tr:"Samimi",en:"Friendly",es:"Amigable",ca:"Amigable"},professional:{tr:"Profesyonel",en:"Professional",es:"Profesional",ca:"Professional"},punctual:{tr:"Dakik",en:"Punctual",es:"Puntual",ca:"Puntual"}};function u({rating:e,size:t="md",showValue:a=!1}){let s={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>(0,r.jsx)(l.Z,{className:(0,o.cn)(s[t],a<=e?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},a)),a&&(0,r.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-700",children:e.toFixed(1)})]})}function p({trustScore:e,reviewCount:t,size:a="md"}){let{language:s}=(0,x.Z)(),l=e>=90?{label:{tr:"\xc7ok G\xfcvenilir",en:"Very Trusted",es:"Muy Confiable",ca:"Molt Fiable"},color:"bg-green-100 text-green-700 border-green-300"}:e>=75?{label:{tr:"G\xfcvenilir",en:"Trusted",es:"Confiable",ca:"Fiable"},color:"bg-blue-100 text-blue-700 border-blue-300"}:e>=60?{label:{tr:"Ä°yi",en:"Good",es:"Bueno",ca:"Bo"},color:"bg-yellow-100 text-yellow-700 border-yellow-300"}:{label:{tr:"Yeni",en:"New",es:"Nuevo",ca:"Nou"},color:"bg-gray-100 text-gray-600 border-gray-300"};return(0,r.jsxs)("div",{className:(0,o.cn)("inline-flex items-center gap-1.5 rounded-full border font-medium",l.color,{sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"}[a]),children:[(0,r.jsx)(i.Z,{className:"sm"===a?"w-3 h-3":"w-4 h-4"}),(0,r.jsx)("span",{children:l.label[s]||l.label.tr}),void 0!==t&&t>0&&(0,r.jsxs)("span",{className:"opacity-70",children:["(",t,")"]})]})}function h({userId:e}){let{language:t}=(0,x.Z)(),[a,l]=(0,s.useState)(null),[i,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o()},[e]);let o=async()=>{try{let t=await fetch(`/api/reviews?userId=${e}`);if(t.ok){let e=await t.json();l(e.stats)}}catch(e){console.error("Stats fetch error:",e)}finally{c(!1)}};if(i)return(0,r.jsx)("div",{className:"animate-pulse h-20 bg-gray-100 rounded-lg"});if(!a||0===a.totalReviews)return(0,r.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,r.jsx)(n.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"tr"===t?"Hen\xfcz deÄŸerlendirme yok":"No reviews yet"})]});let p={tr:{reviews:"deÄŸerlendirme",basedOn:"\xfczerinden"},en:{reviews:"reviews",basedOn:"based on"},es:{reviews:"rese\xf1as",basedOn:"basado en"},ca:{reviews:"ressenyes",basedOn:"basat en"}},h=p[t]||p.tr;return(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-4 border",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:a.averageRating.toFixed(1)}),(0,r.jsx)(u,{rating:Math.round(a.averageRating),size:"sm"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[a.totalReviews," ",h.reviews]})]}),(0,r.jsx)("div",{className:"flex-1 space-y-1",children:[5,4,3,2,1].map(e=>{let t=a.ratingDistribution[e]||0,s=a.totalReviews>0?t/a.totalReviews*100:0;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 w-3",children:e}),(0,r.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-yellow-400 transition-all duration-500",style:{width:`${s}%`}})}),(0,r.jsx)("span",{className:"text-xs text-gray-400 w-6",children:t})]},e)})})]}),a.topTags.length>0&&(0,r.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5",children:a.topTags.map(({tag:e,count:a})=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-50 text-green-700 text-xs rounded-full",children:[(0,r.jsx)(d.Z,{className:"w-3 h-3"}),m[e]?.[t]||e,(0,r.jsxs)("span",{className:"opacity-60",children:["(",a,")"]})]},e))})})]})}function g({userId:e}){let{language:t}=(0,x.Z)(),[a,l]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o()},[e]);let o=async()=>{try{let t=await fetch(`/api/reviews?userId=${e}`);if(t.ok){let e=await t.json();l(e.reviews)}}catch(e){console.error("Reviews fetch error:",e)}finally{d(!1)}},p=e=>new Date(e).toLocaleDateString("tr"===t?"tr-TR":"en-US",{day:"numeric",month:"short",year:"numeric"});return i?(0,r.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"animate-pulse bg-gray-100 h-32 rounded-lg"},e))}):0===a.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(n.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),(0,r.jsx)("p",{children:"tr"===t?"Hen\xfcz yorum yok":"No reviews yet"})]}):(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:e.author.name?.charAt(0)||"?"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.author.name||"Anonim"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u,{rating:e.rating,size:"sm"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:p(e.createdAt)})]})]})]})}),e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:e.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:m[e]?.[t]||e},e))}),e.comment&&(0,r.jsxs)("p",{className:"text-gray-700 text-sm mb-2",children:['"',e.comment,'"']}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,r.jsx)(c.Z,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:["tr"===t?"Takas:":"Swap:"," ",e.swapRequest.product.title]})]}),e.response&&(0,r.jsxs)("div",{className:"mt-3 pl-4 border-l-2 border-blue-200 bg-blue-50/50 py-2 px-3 rounded-r",children:[(0,r.jsx)("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"tr"===t?"SatÄ±cÄ± YanÄ±tÄ±":"Seller Response"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.response})]})]},e.id))})}},39090:function(e,t,a){"use strict";function r(e){if(!e)return"Anonim";if(e.nickname&&e.nickname.trim())return e.nickname.trim();if(e.name&&e.name.trim()){let t=e.name.trim().split(" ").filter(e=>e.length>0);if(1===t.length)return t[0];if(t.length>=2){let e=t[0],a=t[t.length-1].charAt(0).toUpperCase();return`${e} ${a}.`}}if(e.email){let t=e.email.split("@")[0];return t.length>15?t.substring(0,15)+"...":t}return"Anonim"}a.d(t,{Gf:function(){return r}})},10839:function(e,t,a){"use strict";async function r(e){try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.type,message:e.message,severity:e.severity||"error",userId:e.userId,url:window.location.href,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,metadata:e.metadata?JSON.stringify(e.metadata):void 0})})}catch{console.error("Error reporter failed:",e.message)}}function s(){return!navigator.onLine}a.d(t,{s9:function(){return s},wz:function(){return n},DV:function(){return d},Pe:function(){return c}});let l={OFFLINE:"Ä°nternet baÄŸlantÄ±nÄ±z yok. L\xfctfen baÄŸlantÄ±nÄ±zÄ± kontrol edin.",TIMEOUT:"Sunucu yanÄ±t vermedi. L\xfctfen tekrar deneyin.",SERVER_ERROR:"Sunucu hatasÄ± oluÅŸtu. L\xfctfen daha sonra tekrar deneyin.",NETWORK_ERROR:"BaÄŸlantÄ± hatasÄ±. L\xfctfen internet baÄŸlantÄ±nÄ±zÄ± kontrol edin.",UNAUTHORIZED:"Oturum s\xfcreniz doldu. L\xfctfen tekrar giriÅŸ yapÄ±n.",FORBIDDEN:"Bu iÅŸlem i\xe7in yetkiniz yok.",NOT_FOUND:"Ä°stenen kaynak bulunamadÄ±.",RATE_LIMITED:"\xc7ok fazla istek g\xf6nderdiniz. L\xfctfen biraz bekleyin.",UNKNOWN:"Beklenmeyen bir hata oluÅŸtu."};async function i(e,t,a){let i=new AbortController,n=setTimeout(()=>i.abort(),a);try{let a=await fetch(e,{...t,signal:i.signal,headers:{"Content-Type":"application/json",...t.headers}});clearTimeout(n);let s=null,d=a.headers.get("content-type");if(d?.includes("application/json"))try{s=await a.json()}catch{s=null}if(!a.ok){let t=s?.error||s?.message||function(e,t){switch(e){case 401:return l.UNAUTHORIZED;case 403:return l.FORBIDDEN;case 404:return l.NOT_FOUND;case 429:return l.RATE_LIMITED;case 500:case 502:case 503:case 504:return l.SERVER_ERROR;default:return l.UNKNOWN}}(a.status);return a.status>=500&&r({type:"api_error",message:`API ${a.status}: ${e}`,severity:"error",metadata:{url:e,status:a.status,errorMsg:t}}),{data:null,error:t,status:a.status,ok:!1,isOffline:!1,isTimeout:!1}}return{data:s,error:null,status:a.status,ok:!0,isOffline:!1,isTimeout:!1}}catch(e){if(clearTimeout(n),"AbortError"===e.name)return{data:null,error:l.TIMEOUT,status:0,ok:!1,isOffline:!1,isTimeout:!0};return{data:null,error:l.NETWORK_ERROR,status:0,ok:!1,isOffline:s(),isTimeout:!1}}}async function n(e,t={}){let{timeout:a=1e4,retries:r=2,retryDelay:n=1e3,...d}=t;if(s())return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};let c=null;for(let t=0;t<=r;t++){if(t>0&&(await new Promise(e=>setTimeout(e,n)),s()))return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};if((c=await i(e,d,a)).ok||401===c.status||403===c.status||404===c.status||429===c.status)break}return c}async function d(e,t){return n(e,{...t,method:"GET"})}async function c(e,t,a){return n(e,{...a,method:"POST",body:t?JSON.stringify(t):void 0})}},65522:function(e,t,a){"use strict";a.d(t,{cn:function(){return l}});var r=a(32191),s=a(23607);function l(...e){return(0,s.m6)((0,r.W)(e))}},88913:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},98155:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},75012:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},63751:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},51137:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},66772:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},63144:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},25020:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},91117:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},97480:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},28576:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},78503:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},30199:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},81178:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},42611:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},53492:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},79582:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},37665:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},26298:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(42154).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]])}},function(e){e.O(0,[1791,5558,0,8001,6470,496,2717,4671,2386,7156,1744],function(){return e(e.s=47113)}),_N_E=e.O()}]);