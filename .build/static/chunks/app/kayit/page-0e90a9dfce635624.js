(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6407],{61001:function(e,a,r){Promise.resolve().then(r.bind(r,10103))},10103:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return j}});var t=r(15444),s=r(89300),i=r(41084),n=r(79047),l=r(75762),o=r(31587),d=r(59335),c=r(4693),m=r(91117),u=r(67690),x=r(35798),f=r(81059),p=r(66772),h=r(85397),y=r(36661),g=r(66124),b=r(81471);function j(){let e=(0,n.useRouter)(),[a,r]=(0,s.useState)("register"),[j,N]=(0,s.useState)({name:"",nickname:"",email:"",password:"",confirmPassword:""}),[v,w]=(0,s.useState)(!1),[k,z]=(0,s.useState)(["","","","","",""]),[S,C]=(0,s.useState)(""),[T,Z]=(0,s.useState)(""),[E,D]=(0,s.useState)(!1),[K,O]=(0,s.useState)(!1),P=(0,s.useRef)([]),q=async e=>{if(e.preventDefault(),C(""),j.password!==j.confirmPassword){C("Şifreler eşleşmiyor");return}if(j.password.length<6){C("Şifre en az 6 karakter olmalı");return}D(!0);try{let e=await fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.name,nickname:j.nickname||void 0,email:j.email,password:j.password})}),a=await e.json();if(!e.ok){C(a?.error||"Kayıt sırasında bir hata oluştu");return}a.requiresVerification&&(r("verify"),Z(a.message))}catch(e){C("Kayıt sırasında bir hata oluştu")}finally{D(!1)}},A=(e,a)=>{if(a.length>1){let r=a.slice(0,6).split(""),t=[...k];r.forEach((a,r)=>{e+r<6&&(t[e+r]=a)}),z(t);let s=Math.min(e+r.length,5);P.current[s]?.focus();return}let r=[...k];r[e]=a,z(r),a&&e<5&&P.current[e+1]?.focus()},_=(e,a)=>{"Backspace"===a.key&&!k[e]&&e>0&&P.current[e-1]?.focus()},B=async a=>{a.preventDefault(),C(""),Z("");let r=k.join("");if(6!==r.length){C("L\xfctfen 6 haneli kodu girin");return}D(!0);try{let a=await fetch("/api/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:j.email,code:r})}),t=await a.json();if(!a.ok){C(t?.error||"Doğrulama sırasında bir hata oluştu");return}let s=await (0,l.signIn)("credentials",{email:j.email,password:j.password,redirect:!1});s?.ok?e.replace("/"):(Z("Hesabınız doğrulandı! Giriş yapabilirsiniz."),setTimeout(()=>e.replace("/giris"),2e3))}catch(e){C("Doğrulama sırasında bir hata oluştu")}finally{D(!1)}},G=async()=>{O(!0),C(""),Z("");try{let e=await fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.name,nickname:j.nickname||void 0,email:j.email,password:j.password})}),a=await e.json();a.requiresVerification?(Z("Yeni doğrulama kodu g\xf6nderildi!"),z(["","","","","",""])):a.error&&C(a.error)}catch(e){C("Kod g\xf6nderilemedi")}finally{O(!1)}};return(0,t.jsx)("div",{className:"min-h-screen pt-20 pb-12 flex items-center justify-center bg-gradient-to-br from-frozen-50 to-white",children:(0,t.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-4",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:(0,t.jsx)(d.M,{mode:"wait",children:"register"===a?(0,t.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)(i.default,{href:"/",className:"text-3xl font-bold text-gradient-frozen",children:"TAKAS-A"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mt-4",children:"\xdccretsiz Kayıt Ol"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Hemen \xfcye ol ve takas yapmaya başla"})]}),(0,t.jsxs)("form",{onSubmit:q,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",required:!0,value:j.name,onChange:e=>N({...j,name:e.target.value}),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-frozen-500 focus:border-transparent transition-all",placeholder:"Adınız Soyadınız"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Takma Ad (İsteğe Bağlı)"}),(0,t.jsx)("button",{type:"button",onClick:()=>w(!v),className:"text-frozen-500 hover:text-frozen-600",children:(0,t.jsx)(m.Z,{className:"w-4 h-4"})})]}),v&&(0,t.jsx)("div",{className:"mb-2 p-3 bg-blue-50 rounded-lg text-xs text-blue-700",children:"Takma ad kullanarak gizliliğinizi koruyabilirsiniz. Bu isim platformda ad soyadınız yerine g\xf6sterilecektir."}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",value:j.nickname,onChange:e=>N({...j,nickname:e.target.value}),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-frozen-500 focus:border-transparent transition-all",placeholder:"\xd6rn: SwapMaster, TakasSever...",maxLength:20})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Boş bırakırsanız adınızın ilk harfi ve soyadınızın baş harfi g\xf6sterilir"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"email",required:!0,value:j.email,onChange:e=>N({...j,email:e.target.value}),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-frozen-500 focus:border-transparent transition-all",placeholder:"ornek@email.com"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(f.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"password",required:!0,value:j.password,onChange:e=>N({...j,password:e.target.value}),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-frozen-500 focus:border-transparent transition-all",placeholder:"En az 6 karakter"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre Tekrar"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(f.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"password",required:!0,value:j.confirmPassword,onChange:e=>N({...j,confirmPassword:e.target.value}),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-frozen-500 focus:border-transparent transition-all",placeholder:"Şifreyi tekrar girin"})]})]}),S&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-4 rounded-xl",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,t.jsx)("span",{children:S})]}),(0,t.jsx)("button",{type:"submit",disabled:E,className:"w-full py-4 rounded-xl bg-frozen-500 text-white font-semibold hover:bg-frozen-600 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:E?"Kayıt oluşturuluyor...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{className:"w-5 h-5"}),"Kayıt Ol"]})})]}),(0,t.jsxs)("p",{className:"text-center text-gray-600 mt-6",children:["Zaten hesabın var mı?"," ",(0,t.jsx)(i.default,{href:"/giris",className:"text-frozen-600 font-semibold hover:underline",children:"Giriş Yap"})]})]},"register"):(0,t.jsxs)(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:(0,t.jsx)(y.Z,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Doğrulama"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:[(0,t.jsx)("span",{className:"font-medium text-frozen-600",children:j.email})," adresine g\xf6nderilen 6 haneli kodu girin"]})]}),(0,t.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-center gap-2",children:k.map((e,a)=>(0,t.jsx)("input",{ref:e=>{P.current[a]=e},type:"text",inputMode:"numeric",maxLength:6,value:e,onChange:e=>A(a,e.target.value.replace(/\D/g,"")),onKeyDown:e=>_(a,e),className:"w-12 h-14 text-center text-2xl font-bold rounded-xl border-2 border-gray-300 focus:border-frozen-500 focus:ring-2 focus:ring-frozen-200 transition-all"},a))}),S&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-4 rounded-xl",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,t.jsx)("span",{children:S})]}),T&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-4 rounded-xl",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,t.jsx)("span",{children:T})]}),(0,t.jsx)("button",{type:"submit",disabled:E,className:"w-full py-4 rounded-xl bg-frozen-500 text-white font-semibold hover:bg-frozen-600 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:E?"Doğrulanıyor...":"Doğrula ve Devam Et"})]}),(0,t.jsxs)("div",{className:"mt-6 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:"Kod gelmedi mi?"}),(0,t.jsxs)("button",{onClick:G,disabled:K,className:"inline-flex items-center gap-2 text-frozen-600 font-semibold hover:underline disabled:opacity-50",children:[(0,t.jsx)(b.Z,{className:`w-4 h-4 ${K?"animate-spin":""}`}),K?"G\xf6nderiliyor...":"Tekrar G\xf6nder"]})]}),(0,t.jsx)("button",{onClick:()=>r("register"),className:"w-full mt-4 text-gray-500 hover:text-gray-700 text-sm",children:"← Kayıt formuna geri d\xf6n"})]},"verify")})})})})}}},function(e){e.O(0,[1791,5558,0,2902,2386,7156,1744],function(){return e(e.s=61001)}),_N_E=e.O()}]);