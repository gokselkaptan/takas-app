(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3049],{45172:function(e,t,a){Promise.resolve().then(a.bind(a,82036))},82036:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(15444),l=a(89300),r=a(79047),n=a(75762),i=a(31587),c=a(1946),d=a(85397),x=a(64624),o=a(79582),u=a(42611),m=a(66124);let h=(0,a(42154).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=a(81178),y=a(66772),f=a(62492),g=a(16886);function j(){let e=(0,r.useRouter)(),{data:t,status:a}=(0,n.useSession)(),[j,v]=(0,l.useState)(!0),[b,N]=(0,l.useState)(!1),[k,w]=(0,l.useState)(!1),[Z,S]=(0,l.useState)(""),[M,C]=(0,l.useState)(""),[E,D]=(0,l.useState)(""),[B,z]=(0,l.useState)(null),[I,_]=(0,l.useState)({hours:0,minutes:0,seconds:0}),[A,q]=(0,l.useState)(null);(0,l.useEffect)(()=>{"unauthenticated"===a?e.push("/giris"):"authenticated"===a&&(T(),fetch("/api/valor?action=user_level").then(e=>e.ok?e.json():null).then(e=>{e&&q(e)}).catch(()=>{}))},[a,e]),(0,l.useEffect)(()=>{if(!B?.canInvite&&B?.hoursUntilNextInvite){let e=3600*B.hoursUntilNextInvite,t=e,a=setInterval(()=>{if((t-=1)<=0){clearInterval(a),T();return}_({hours:Math.floor(t/3600),minutes:Math.floor(t%3600/60),seconds:t%60})},1e3);return _({hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60}),()=>clearInterval(a)}},[B]);let T=async()=>{try{let e=await fetch("/api/referral"),t=await e.json();e.ok&&z(t)}catch(e){console.error("Referral data fetch error:",e)}finally{v(!1)}},G=async()=>{if(E&&!b){S(""),C(""),N(!0);try{let e=await fetch("/api/referral",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:E})}),t=await e.json();if(!e.ok){S(t.error||"Davet g\xf6nderilemedi");return}C("Davet başarıyla g\xf6nderildi!"),D(""),T()}catch(e){S("Bir hata oluştu")}finally{N(!1)}}};return"loading"===a||j?(0,s.jsx)("div",{className:"min-h-screen pt-24 flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"w-8 h-8 animate-spin text-purple-600"})}):(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-white pt-24 pb-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6",children:[(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:(0,s.jsx)(d.Z,{className:"w-10 h-10 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Arkadaşını Davet Et"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Arkadaşlarını davet et! Seviyen arttık\xe7a davet bonusun da artar."})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg text-center",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:B?.totalReferrals||0}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Davet Edilen"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg text-center",children:[(0,s.jsx)(o.Z,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:B?.valorBalance||0}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Toplam Valor"})]})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[(0,s.jsxs)("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 text-purple-600"}),"Davet Kodun"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-1 px-4 py-3 rounded-xl bg-purple-50 border border-purple-200 font-mono text-lg text-purple-700 text-center",children:B?.referralCode||"..."}),(0,s.jsx)("button",{onClick:()=>{if(!B)return;let e=`https://takas-a.com/kayit?ref=${B.referralCode}`;navigator.clipboard.writeText(e),w(!0),setTimeout(()=>w(!1),2e3)},className:"px-4 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:opacity-90 transition-all",children:k?(0,s.jsx)(m.Z,{className:"w-6 h-6"}):(0,s.jsx)(h,{className:"w-6 h-6"})})]}),k&&(0,s.jsx)("p",{className:"text-green-600 text-sm mt-2 text-center",children:"Link kopyalandı!"})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[(0,s.jsxs)("h2",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-purple-600"}),"Email ile Davet G\xf6nder"]}),B?.canInvite?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"email",value:E,onChange:e=>D(e.target.value),placeholder:"arkadas@email.com",className:"flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,s.jsx)("button",{onClick:G,disabled:!E||b,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white font-semibold hover:opacity-90 disabled:opacity-50 transition-all",children:b?"G\xf6nderiliyor...":"Davet Et"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-3 flex items-center gap-1",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4"}),"G\xfcnde 1 arkadaşını davet edebilirsin"]})]}):(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)(f.Z,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sonraki davet hakkınız i\xe7in bekleniyor"}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 my-6",children:[(0,s.jsxs)("div",{className:"bg-purple-100 rounded-xl px-4 py-3 min-w-[70px]",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-700",children:String(I.hours).padStart(2,"0")}),(0,s.jsx)("div",{className:"text-xs text-purple-600",children:"Saat"})]}),(0,s.jsxs)("div",{className:"bg-purple-100 rounded-xl px-4 py-3 min-w-[70px]",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-700",children:String(I.minutes).padStart(2,"0")}),(0,s.jsx)("div",{className:"text-xs text-purple-600",children:"Dakika"})]}),(0,s.jsxs)("div",{className:"bg-purple-100 rounded-xl px-4 py-3 min-w-[70px]",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-700",children:String(I.seconds).padStart(2,"0")}),(0,s.jsx)("div",{className:"text-xs text-purple-600",children:"Saniye"})]})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Bu s\xfcrede referans linkini paylaşmaya devam edebilirsiniz"})]}),Z&&(0,s.jsxs)("div",{className:"mt-4 p-3 rounded-xl bg-red-50 text-red-700 flex items-center gap-2",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5"}),Z]}),M&&(0,s.jsxs)("div",{className:"mt-4 p-3 rounded-xl bg-green-50 text-green-700 flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5"}),M]})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-2xl shadow-lg p-6 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(g.Z,{className:"w-8 h-8"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:"\xd6d\xfcller"})]}),(0,s.jsx)("ul",{className:"space-y-3",children:A?.referralBonus&&A.referralBonus>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:A.referralBonus}),(0,s.jsxs)("span",{children:["Her başarılı davet i\xe7in +",A.referralBonus," Valor"]})]}),(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"5"}),(0,s.jsx)("span",{children:"Arkadaşın da kayıt bonusu olarak 5 Valor kazanır"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:A.emoji}),(0,s.jsxs)("span",{children:["Seviye ",A.level,": ",A.name," — seviyen arttık\xe7a bonus artar!"]})]})]}):(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:"\uD83D\uDD12"}),(0,s.jsx)("span",{children:"İlk takasını tamamla, davet bonusu a\xe7ılsın!"})]})})]})]})})}},66772:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},66124:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},62492:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},16886:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},1946:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},81178:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},42611:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},79582:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},85397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},64624:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(42154).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[1791,0,2386,7156,1744],function(){return e(e.s=45172)}),_N_E=e.O()}]);