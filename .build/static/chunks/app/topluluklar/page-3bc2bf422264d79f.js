(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{77328:function(e,t,s){Promise.resolve().then(s.bind(s,19188))},19188:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(15444),i=s(89300),r=s(75762),l=s(79047),o=s(31587),n=s(59335),c=s(48001),d=s(41084),u=s(25020),p=s(2019),m=s(63144),x=s(79582),h=s(25076),g=s(39429),y=s(64624),b=s(49062),f=s(19484),j=s(28576),v=s(64670),N=s(53492),w=s(76350),k=s(82717),C=s(91585);let T={tr:{title:"Topluluklar",subtitle:"Şehrindeki takas\xe7ılarla tanış, yerel topluluklara katıl",search:"Topluluk ara...",myGroups:"Gruplarım",allGroups:"T\xfcm Gruplar",createGroup:"Grup Oluştur",members:"\xfcye",swaps:"takas",posts:"g\xf6nderi",events:"etkinlik",join:"Katıl",joined:"\xdcye",official:"Resmi",private:"\xd6zel",weeklyActive:"haftalık aktif",noResults:"Topluluk bulunamadı",filterCity:"Şehir",filterType:"T\xfcr",allCities:"T\xfcm Şehirler",allTypes:"T\xfcm T\xfcrler",typeNeighborhood:"Mahalle",typeDistrict:"İl\xe7e",typeCity:"Şehir",typeInterest:"İlgi Alanı",loadMore:"Daha Fazla Y\xfckle",loginRequired:"Katılmak i\xe7in giriş yapın",joinSuccess:"Topluluğa katıldınız!",popularTags:"Pop\xfcler Etiketler"},en:{title:"Communities",subtitle:"Meet swappers in your city, join local communities",search:"Search communities...",myGroups:"My Groups",allGroups:"All Groups",createGroup:"Create Group",members:"members",swaps:"swaps",posts:"posts",events:"events",join:"Join",joined:"Joined",official:"Official",private:"Private",weeklyActive:"weekly active",noResults:"No communities found",filterCity:"City",filterType:"Type",allCities:"All Cities",allTypes:"All Types",typeNeighborhood:"Neighborhood",typeDistrict:"District",typeCity:"City",typeInterest:"Interest",loadMore:"Load More",loginRequired:"Login to join",joinSuccess:"You joined the community!",popularTags:"Popular Tags"},es:{title:"Comunidades",subtitle:"Conoce a los intercambiadores de tu ciudad, \xfanete a comunidades locales",search:"Buscar comunidades...",myGroups:"Mis Grupos",allGroups:"Todos los Grupos",createGroup:"Crear Grupo",members:"miembros",swaps:"intercambios",posts:"publicaciones",events:"eventos",join:"Unirse",joined:"Unido",official:"Oficial",private:"Privado",weeklyActive:"activos semanales",noResults:"No se encontraron comunidades",filterCity:"Ciudad",filterType:"Tipo",allCities:"Todas las Ciudades",allTypes:"Todos los Tipos",typeNeighborhood:"Barrio",typeDistrict:"Distrito",typeCity:"Ciudad",typeInterest:"Inter\xe9s",loadMore:"Cargar M\xe1s",loginRequired:"Inicia sesi\xf3n para unirte",joinSuccess:"\xa1Te uniste a la comunidad!",popularTags:"Etiquetas Populares"},ca:{title:"Comunitats",subtitle:"Coneix als intercanviadors de la teva ciutat, uneix-te a comunitats locals",search:"Cercar comunitats...",myGroups:"Els Meus Grups",allGroups:"Tots els Grups",createGroup:"Crear Grup",members:"membres",swaps:"intercanvis",posts:"publicacions",events:"esdeveniments",join:"Unir-se",joined:"Unit",official:"Oficial",private:"Privat",weeklyActive:"actius setmanals",noResults:"No s'han trobat comunitats",filterCity:"Ciutat",filterType:"Tipus",allCities:"Totes les Ciutats",allTypes:"Tots els Tipus",typeNeighborhood:"Barri",typeDistrict:"Districte",typeCity:"Ciutat",typeInterest:"Inter\xe8s",loadMore:"Carregar M\xe9s",loginRequired:"Inicia sessi\xf3 per unir-te",joinSuccess:"T'has unit a la comunitat!",popularTags:"Etiquetes Populars"}},G={neighborhood:u.Z,district:p.Z,city:m.Z,interest:x.Z};function S(){let{data:e}=(0,r.useSession)(),{language:t}=(0,k.Z)(),s=(0,l.useRouter)(),u=T[t]||T.tr,[p,m]=(0,i.useState)([]),[x,S]=(0,i.useState)(!0),[M,z]=(0,i.useState)(""),[Z,A]=(0,i.useState)(""),[R,I]=(0,i.useState)(""),[D,E]=(0,i.useState)(!1),[P,q]=(0,i.useState)(!1),[O,_]=(0,i.useState)(0),[B,F]=(0,i.useState)(null),U=[{value:"neighborhood",label:u.typeNeighborhood},{value:"district",label:u.typeDistrict},{value:"city",label:u.typeCity},{value:"interest",label:u.typeInterest}],$=async(e=!1)=>{try{S(!0);let t=new URLSearchParams;M&&t.set("search",M),Z&&t.set("city",Z),R&&t.set("type",R),D&&t.set("my","true"),t.set("limit","12"),t.set("offset",e?"0":String(O));let s=await fetch(`/api/communities?${t}`);if(!s.ok)throw Error("Fetch failed");let a=await s.json();e?(m(a.communities||[]),_(12)):(m(e=>[...e,...a.communities||[]]),_(e=>e+12)),q(a.hasMore||!1)}catch(e){console.error("Communities fetch error:",e),C.Am.error("Topluluklar y\xfcklenirken hata oluştu")}finally{S(!1)}};(0,i.useEffect)(()=>{$(!0)},[M,Z,R,D]);let L=async t=>{if(!e){C.Am.error(u.loginRequired),s.push("/giris");return}F(t);try{let e=await fetch(`/api/communities/${t}/join`,{method:"POST"}),s=await e.json();e.ok?(C.Am.success(u.joinSuccess),m(e=>e.map(e=>e.id===t?{...e,isMember:!0,memberCount:e.memberCount+1,myRole:"member"}:e))):C.Am.error(s.error||"Hata oluştu")}catch(e){C.Am.error("Bir hata oluştu")}finally{F(null)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-white to-orange-50 py-8 px-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-purple-600 to-orange-500 bg-clip-text text-transparent",children:u.title})}),(0,a.jsx)("p",{className:"text-gray-600",children:u.subtitle})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-[200px] relative",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",value:M,onChange:e=>z(e.target.value),placeholder:u.search,className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,a.jsxs)("select",{value:Z,onChange:e=>A(e.target.value),className:"px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"",children:u.allCities}),["İzmir","İstanbul","Ankara","Barcelona","Madrid"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:R,onChange:e=>I(e.target.value),className:"px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"",children:u.allTypes}),U.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),e&&(0,a.jsx)("button",{onClick:()=>E(!D),className:`px-4 py-2.5 rounded-xl font-medium transition-colors ${D?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:u.myGroups}),(0,a.jsxs)("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2.5 bg-gray-300 text-gray-500 rounded-xl font-medium cursor-not-allowed opacity-50",title:"Yakında",children:[(0,a.jsx)(g.Z,{size:20}),(0,a.jsx)("span",{className:"hidden sm:inline",children:u.createGroup})]})]})}),x&&0===p.length?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 animate-pulse",children:[(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded-xl mb-4"}),(0,a.jsx)("div",{className:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},t))}):0===p.length?(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(y.Z,{className:"mx-auto text-gray-300 mb-4",size:64}),(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:u.noResults})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,a.jsx)(n.M,{children:p.map((e,t)=>{let s=G[e.type]||y.Z;return(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:.05*t},className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[(0,a.jsxs)("div",{className:"relative h-32 bg-gradient-to-r from-purple-400 to-orange-400",children:[e.coverImage&&(0,a.jsx)(c.default,{src:e.coverImage,alt:e.name,fill:!0,className:"object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 flex gap-2",children:[e.isOfficial&&(0,a.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 bg-blue-500 text-white text-xs rounded-full",children:[(0,a.jsx)(b.Z,{size:12}),u.official]}),e.isPrivate&&(0,a.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 bg-gray-700 text-white text-xs rounded-full",children:[(0,a.jsx)(f.Z,{size:12}),u.private]})]}),(0,a.jsx)("div",{className:"absolute top-3 right-3 w-10 h-10 bg-white/90 rounded-full flex items-center justify-center",children:(0,a.jsx)(s,{size:20,className:"text-purple-600"})}),(0,a.jsxs)("div",{className:"absolute bottom-3 left-3 flex items-center gap-1 text-white text-sm",children:[(0,a.jsx)(j.Z,{size:14}),(0,a.jsx)("span",{children:e.district||e.city})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(d.default,{href:`/topluluklar/${e.slug}`,children:(0,a.jsx)("h3",{className:"font-bold text-lg mb-1 hover:text-purple-600 transition-colors line-clamp-1",children:e.name})}),e.description&&(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.Z,{size:14}),e.memberCount," ",u.members]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.Z,{size:14}),e.swapCount," ",u.swaps]})]}),e.tags?.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.slice(0,3).map((e,t)=>(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:["#",e]},t))}),e.isMember?(0,a.jsxs)(d.default,{href:`/topluluklar/${e.slug}`,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-green-100 text-green-700 rounded-xl font-medium hover:bg-green-200 transition-colors",children:[(0,a.jsx)(N.Z,{size:18}),u.joined," ","admin"===e.myRole&&"(Admin)"]}):(0,a.jsxs)("button",{onClick:()=>L(e.id),disabled:B===e.id,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-purple-600 text-white rounded-xl font-medium hover:bg-purple-700 transition-colors disabled:opacity-50",children:[B===e.id?(0,a.jsx)("span",{className:"animate-spin",children:"⏳"}):(0,a.jsx)(g.Z,{size:18}),u.join]})]})]},e.id)})})}),P&&(0,a.jsx)("div",{className:"text-center mt-8",children:(0,a.jsx)("button",{onClick:()=>$(),disabled:x,className:"px-6 py-3 bg-white text-purple-600 rounded-xl font-medium shadow-lg hover:shadow-xl transition-shadow disabled:opacity-50",children:x?"⏳":u.loadMore})})]}),(0,a.jsxs)("div",{className:"mt-16 p-8 bg-white/10 backdrop-blur-md rounded-2xl text-center",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-white mb-4",children:["\uD83D\uDCF8 ","tr"===t?"Bizi Instagram'da Takip Edin!":"Follow Us on Instagram!"]}),(0,a.jsx)("p",{className:"text-white/80 mb-6",children:"tr"===t?"Topluluk etkinlikleri, takas hikayeleri ve daha fazlası i\xe7in!":"For community events, swap stories and more!"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6",children:[(0,a.jsx)("a",{href:"https://instagram.com/takasintercambiobarty",target:"_blank",rel:"noopener noreferrer",className:"relative w-36 h-36 rounded-2xl overflow-hidden shadow-xl hover:scale-105 transition-transform bg-white",children:(0,a.jsx)(c.default,{src:"/instagram-qr.png",alt:"Instagram QR Code",fill:!0,className:"object-cover"})}),(0,a.jsxs)("a",{href:"https://instagram.com/takasintercambiobarty",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-pink-500 via-purple-500 to-orange-500 text-white font-semibold rounded-xl hover:scale-105 transition-transform shadow-lg",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5"}),"@takasintercambiobarty"]})]})]})]})})}}},function(e){e.O(0,[1791,5558,0,8001,1585,6096,2717,2386,7156,1744],function(){return e(e.s=77328)}),_N_E=e.O()}]);