(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6730],{49789:function(e,t,a){Promise.resolve().then(a.bind(a,17228))},17228:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var s=a(15444),r=a(89300),l=a(75762),n=a(79047),i=a(48001),d=a(41084),o=a(59335),c=a(31587),x=a(1946),u=a(66124),m=a(66772),p=a(33485),h=a(88913),g=a(81471),b=a(29046),f=a(64624),y=a(53492),j=a(16629),N=a(23572),v=a(77248),k=a(28576),w=a(99032),D=a(70362),T=a(62492),C=a(98699),S=a(71911),z=a(64670),A=a(91117),_=a(82717),R=a(10839),q=a(32611);let O=null,F=null;async function E(){if(!O){let e=await Promise.all([a.e(6863),a.e(7290)]).then(a.bind(a,7290));O=e.Html5Qrcode,F=e.Html5QrcodeScannerState}return{Html5Qrcode:O,Html5QrcodeScannerState:F}}let Z=[{key:"pending",label:"Teklif G\xf6nderildi",icon:"\uD83D\uDCE9",shortLabel:"Teklif"},{key:"negotiating",label:"PazarlÄ±k",icon:"\uD83D\uDCAC",shortLabel:"PazarlÄ±k"},{key:"accepted",label:"AnlaÅŸma SaÄŸlandÄ±",icon:"\uD83E\uDD1D",shortLabel:"AnlaÅŸma"},{key:"delivery_proposed",label:"BuluÅŸma NoktasÄ± \xd6nerildi",icon:"\uD83D\uDCCD",shortLabel:"Konum"},{key:"qr_generated",label:"BuluÅŸma PlanlandÄ±",icon:"\uD83D\uDCF1",shortLabel:"QR Kod"},{key:"arrived",label:"Ä°ki Taraf da Geldi",icon:"\uD83D\uDEB6",shortLabel:"VarÄ±ÅŸ"},{key:"qr_scanned",label:"QR Kod Okutuldu",icon:"âœ…",shortLabel:"TaratÄ±ldÄ±"},{key:"inspection",label:"\xdcr\xfcn Kontrol Ediliyor",icon:"\uD83D\uDD0D",shortLabel:"Kontrol"},{key:"code_sent",label:"6 Haneli Kod Ä°letildi",icon:"\uD83D\uDD11",shortLabel:"Kod"},{key:"completed",label:"Takas TamamlandÄ±",icon:"\uD83C\uDF89",shortLabel:"Tamam"}],K=[{key:"pending",label:"Teklif G\xf6nderildi",icon:"\uD83D\uDCE9",shortLabel:"Teklif"},{key:"negotiating",label:"PazarlÄ±k",icon:"\uD83D\uDCAC",shortLabel:"PazarlÄ±k"},{key:"accepted",label:"AnlaÅŸma SaÄŸlandÄ±",icon:"\uD83E\uDD1D",shortLabel:"AnlaÅŸma"},{key:"delivery_proposed",label:"Teslim NoktasÄ± Belirlendi",icon:"\uD83D\uDCCD",shortLabel:"Nokta"},{key:"qr_generated",label:"HazÄ±r",icon:"\uD83D\uDCF1",shortLabel:"HazÄ±r"},{key:"dropped_off",label:"SatÄ±cÄ± BÄ±raktÄ±",icon:"\uD83D\uDCE6",shortLabel:"BÄ±raktÄ±"},{key:"inspection",label:"AlÄ±cÄ± Kontrol Ediyor",icon:"\uD83D\uDD0D",shortLabel:"Kontrol"},{key:"completed",label:"Takas TamamlandÄ±",icon:"\uD83C\uDF89",shortLabel:"Tamam"}];function B(e){return"drop_off"===e?K:Z}function P(){let{data:e,status:t}=(0,l.useSession)(),a=(0,n.useRouter)(),{t:Z,language:K}=(0,_.Z)(),[P,$]=(0,r.useState)([]),[I,L]=(0,r.useState)(null),[V,M]=(0,r.useState)([]),[U,Q]=(0,r.useState)([]),[G,H]=(0,r.useState)([]),[J,Y]=(0,r.useState)([]),[W,X]=(0,r.useState)(!0),[ee,et]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(null),[er,el]=(0,r.useState)(null),[en,ei]=(0,r.useState)(null),[ed,eo]=(0,r.useState)(""),[ec,ex]=(0,r.useState)(!1),[eu,em]=(0,r.useState)("requests"),[ep,eh]=(0,r.useState)(null),[eg,eb]=(0,r.useState)(!1),[ef,ey]=(0,r.useState)(0),ej=(0,r.useRef)(0),[eN,ev]=(0,r.useState)(!1),[ek,ew]=(0,r.useState)(null),[eD,eT]=(0,r.useState)("custom_location"),[eC,eS]=(0,r.useState)(""),[ez,eA]=(0,r.useState)(""),[e_,eR]=(0,r.useState)(""),[eq,eO]=(0,r.useState)(""),[eF,eE]=(0,r.useState)("propose"),[eZ,eK]=(0,r.useState)(!1),[eB,eP]=(0,r.useState)([]),[e$,eI]=(0,r.useState)({}),[eL,eV]=(0,r.useState)(null),[eM,eU]=(0,r.useState)({}),[eQ,eG]=(0,r.useState)({}),[eH,eJ]=(0,r.useState)(!1),[eY,eW]=(0,r.useState)({}),[eX,e0]=(0,r.useState)(!1),[e2,e1]=(0,r.useState)(null),[e5,e3]=(0,r.useState)(""),[e4,e8]=(0,r.useState)(""),[e6,e7]=(0,r.useState)([]),[e9,te]=(0,r.useState)(!1),[tt,ta]=(0,r.useState)(!1),ts=(0,r.useRef)(null),[tr,tl]=(0,r.useState)(!1),[tn,ti]=(0,r.useState)(null),[td,to]=(0,r.useState)(!1),[tc,tx]=(0,r.useState)(!1),[tu,tm]=(0,r.useState)(""),tp=(0,r.useRef)(null),th="qr-reader-container-takas",tg=e?.user?.id;(0,r.useEffect)(()=>{if("loading"!==t){if("unauthenticated"===t){a.replace("/giris");return}"authenticated"===t&&e?.user&&tb()}},[t,e?.user]);let tb=async()=>{X(!0);try{let e=new URLSearchParams;e.set("limit","10"),eg&&e.set("balanced","true"),ef>0&&e.set("minScore",ef.toString());let[t,a,s,r]=await Promise.all([(0,R.wz)(`/api/multi-swap?${e.toString()}`,{timeout:8e3}),(0,R.wz)("/api/multi-swap?type=active",{timeout:8e3}),(0,R.wz)("/api/swap-requests?type=sent",{timeout:8e3}),(0,R.wz)("/api/swap-requests?type=received",{timeout:8e3})]);if(!t.error&&t.data){let e=t.data;$(Array.isArray(e.opportunities)?e.opportunities:[]),L(e.stats||null)}else $([]);if(!a.error&&a.data){let e=a.data;M(Array.isArray(e)?e:[])}else M([]);if(!s.error&&s.data){let e=s.data,t=Array.isArray(e)?e:e.requests?e.requests:e.swapRequests?e.swapRequests:[];Q(t)}else Q([]);if(!r.error&&r.data){let e=r.data,t=Array.isArray(e)?e:e.requests?e.requests:e.swapRequests?e.swapRequests:[],a=t.filter(e=>"pending"===e.status).length;a>ej.current&&ej.current>0&&(0,q.Ue)(),ej.current=a,H(t)}else H([]);let l=["accepted","delivery_proposed","qr_generated","arrived","qr_scanned","inspection","code_sent","delivered","completed"],n=!s.error&&s.data?Array.isArray(s.data)?s.data:s.data.requests||[]:[],i=!r.error&&r.data?Array.isArray(r.data)?r.data:r.data.requests||[]:[],d=[...n,...i].filter(e=>l.includes(e.status)).filter((e,t,a)=>a.findIndex(t=>t.id===e.id)===t);Y(d)}catch(e){console.error("Fetch error:",e),$([]),M([]),Q([]),H([]),Y([])}finally{X(!1)}},tf=async()=>{et(!0),await tb(),et(!1),ty("success","Veriler g\xfcncellendi!")},ty=(e,t)=>{eh({type:e,message:t}),setTimeout(()=>eh(null),3e3)},tj=async()=>{try{let e=await fetch("/api/delivery-points");if(e.ok){let t=await e.json();eP(t.deliveryPoints||t||[])}}catch{}},tN=async()=>{if(ek){eK(!0);try{let e=await fetch("/api/swap-requests/delivery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:ek,action:eF,deliveryMethod:eD,deliveryPointId:"delivery_point"===eD?eC:void 0,customLocation:"custom_location"===eD?ez:void 0,deliveryDate:e_||void 0,deliveryTime:eq||void 0})}),t=await e.json();e.ok&&t.success?(ty("success",t.message||"Teslimat \xf6nerisi g\xf6nderildi!"),ev(!1),tk(),tb()):ty("error",t.error||"Bir hata oluÅŸtu")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eK(!1)}},tv=async e=>{eK(!0);try{let t=await fetch("/api/swap-requests/delivery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"accept"})}),a=await t.json();t.ok&&a.success?(ty("success","âœ… Teslimat noktasÄ± onaylandÄ±! QR kod oluÅŸturuldu."),tb()):ty("error",a.error||"Onaylama baÅŸarÄ±sÄ±z")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eK(!1)},tk=()=>{ew(null),eT("custom_location"),eS(""),eA(""),eR(""),eO(""),eE("propose")},tw=e=>e.ownerId===tg,tD=e=>e.requesterId===tg,tT=async e=>{eV(e+"_arrived");try{let t=await fetch("/api/swap-requests/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"arrived"})}),a=await t.json();t.ok&&a.success?(ty("success","\uD83D\uDCCD VarÄ±ÅŸÄ±nÄ±z bildirildi!"),tb()):ty("error",a.error||"Hata")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},tC=async e=>{eV(e+"_inspect");try{let t=await fetch("/api/swap-requests/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"start_inspection"})}),a=await t.json();t.ok&&a.success?(ty("success","\uD83D\uDD0D \xdcr\xfcn kontrol s\xfcreci baÅŸladÄ±"),tb()):ty("error",a.error||"Hata")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},tS=async e=>{eV(e+"_approve");try{let t=await fetch("/api/swap-requests/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"approve_product"})}),a=await t.json();t.ok&&a.success?(a.verificationCode&&eI(t=>({...t,[e]:a.verificationCode})),ty("success","âœ… \xdcr\xfcn onaylandÄ±! 6 haneli kod iletildi."),tb()):ty("error",a.error||"Hata")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},tz=async e=>{let t=eM[e];if(!t||6!==t.length){ty("error","6 haneli kodu girin");return}eV(e+"_verify");try{let a=await fetch("/api/swap-requests/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"verify_code",code:t})}),s=await a.json();a.ok&&s.success?(ty("success","\uD83C\uDF89 Takas g\xfcvenle tamamlandÄ±!"),tb()):ty("error",s.error||"Kod yanlÄ±ÅŸ")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},tA=async(e,t)=>{if(!t||!t.toUpperCase().startsWith("TAKAS-")){ty("error","Ge\xe7ersiz QR kod formatÄ±");return}eV(e+"_scan");try{let a=await fetch("/api/swap-requests/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrCode:t.toUpperCase(),action:"scan_qr"})}),s=await a.json();a.ok&&s.success?(ty("success","âœ… QR kod tarandÄ±! Åžimdi \xfcr\xfcn\xfc kontrol edebilirsiniz."),tb(),eG(t=>({...t,[e]:""}))):ty("error",s.error||"QR tarama hatasÄ±")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},t_=(0,r.useCallback)(async e=>{let t=e.toUpperCase();(t.startsWith("TAKAS-")||t.length>10)&&(tx(!1),await tq(),setTimeout(()=>{tn&&tA(tn,t),tl(!1)},300))},[tn]),tR=async()=>{tm(""),tx(!0),to(!0);try{if(await E(),tp.current){try{tp.current.getState()===F.SCANNING&&await tp.current.stop()}catch{}tp.current=null}await new Promise(e=>setTimeout(e,400));let e=document.getElementById(th);if(!e||null===e.offsetParent){tm("QR tarayÄ±cÄ± y\xfcklenemedi. SayfayÄ± yenileyin."),tx(!1),to(!1);return}tp.current=new O(th);let t=await O.getCameras();if(!t||0===t.length){tm("Kamera bulunamadÄ±. Kamera eriÅŸimini kontrol edin."),tx(!1),to(!1);return}try{await tp.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},e=>t_(e),()=>{})}catch{let e=t[t.length-1]?.id||t[0].id;await tp.current.start(e,{fps:10,qrbox:{width:250,height:250},aspectRatio:1},e=>t_(e),()=>{})}}catch(e){to(!1),tx(!1),"NotAllowedError"===e.name?tm("âš ï¸ Kamera izni verilmedi. TarayÄ±cÄ± ayarlarÄ±ndan izin verin."):"NotFoundError"===e.name?tm("âš ï¸ Kamera bulunamadÄ±."):tm(`Kamera baÅŸlatÄ±lamadÄ±: ${e.message||"Bilinmeyen hata"}`)}},tq=async()=>{if(tx(!1),to(!1),tp.current){try{tp.current.getState()===F.SCANNING&&await tp.current.stop()}catch{}tp.current=null}},tO=e=>{ti(e),tm(""),tl(!0),setTimeout(()=>tR(),500)};(0,r.useEffect)(()=>()=>{if(tp.current){try{tp.current.getState()===F.SCANNING&&tp.current.stop().catch(()=>{})}catch{}tp.current=null}},[]);let tF=async(e,t)=>{eV(e+"_delivery_type");try{let a=await fetch("/api/swap-requests/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"set_delivery_type",deliveryType:t})}),s=await a.json();a.ok&&s.success?(ty("success","face_to_face"===t?"\uD83E\uDD1D BuluÅŸma y\xf6ntemi se\xe7ildi":"\uD83D\uDCCD Teslim noktasÄ±na bÄ±rakma se\xe7ildi"),tb()):ty("error",s.error||"Hata")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},tE=async e=>{eV(e+"_dropoff");try{let t=await fetch("/api/swap-requests/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"drop_off"})}),a=await t.json();t.ok&&a.success?(ty("success","\uD83D\uDCE6 \xdcr\xfcn bÄ±rakÄ±ldÄ±! AlÄ±cÄ±ya bildirim g\xf6nderildi."),tb()):ty("error",a.error||"Hata")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},tZ=async e=>{let t=eM[e]||"";if(6!==t.length){ty("error","6 haneli teslim kodunu girin");return}eV(e+"_pickup");try{let a=await fetch("/api/swap-requests/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,action:"picked_up",code:t})}),s=await a.json();a.ok&&s.success?(ty("success","âœ… \xdcr\xfcn\xfc aldÄ±nÄ±z! Åžimdi kontrol edin."),eU(t=>({...t,[e]:""})),tb()):ty("error",s.error||"Hata")}catch{ty("error","BaÄŸlantÄ± hatasÄ±")}eV(null)},tK=e=>{e1(e),e3(""),e8(""),e7([]),e0(!0)},tB=()=>{e0(!1),e1(null),e3(""),e8(""),e7([])},tP=async e=>{let t=e.target.files;if(t&&0!==t.length){te(!0);try{for(let e of Array.from(t)){if(e.size>10485760){ty("error","FotoÄŸraf 10MB'dan k\xfc\xe7\xfck olmalÄ±");continue}if(e6.length>=5)break;let t=new FileReader,a=await new Promise((a,s)=>{t.onload=()=>a(t.result),t.onerror=s,t.readAsDataURL(e)});e7(e=>e.length>=5?e:[...e,a])}}catch{ty("error","FotoÄŸraf y\xfcklenemedi")}te(!1),e.target&&(e.target.value="")}},t$=async()=>{if(e2&&e5){if(e4.length<20){ty("error","A\xe7Ä±klama en az 20 karakter olmalÄ±");return}if(0===e6.length){ty("error","\uD83D\uDCF8 L\xfctfen en az 1 kanÄ±t fotoÄŸrafÄ± y\xfckleyin");return}ta(!0);try{let e=await fetch("/api/disputes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e2,type:e5,description:e4,evidence:e6})}),t=await e.json();if(!e.ok)throw Error(t.error||"Rapor g\xf6nderilemedi");ty("success","âš ï¸ Sorun raporu oluÅŸturuldu. Ekibimiz 24 saat i\xe7inde inceleyecek."),tB(),tb()}catch(e){ty("error",e.message)}ta(!1)}},tI=async(e,t,a)=>{if(0===a.length)return;let s=`${e}_${t}`;if((eY[s]||[]).length+a.length>5){ty("error","En fazla 5 fotoÄŸraf y\xfckleyebilirsiniz");return}eJ(!0);let r=[];try{for(let s of Array.from(a)){if(s.size>10485760){ty("error","Her fotoÄŸraf max 10MB olabilir");continue}let a=await fetch("/api/swap-requests/photos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,photoType:t,fileName:s.name,contentType:s.type||"image/jpeg"})});if(!a.ok){let e=await a.json();ty("error",e.error||"Y\xfckleme hazÄ±rlanamadÄ±");continue}let{uploadUrl:l,photoUrl:n}=await a.json();(await fetch(l,{method:"PUT",headers:{"Content-Type":s.type||"image/jpeg"},body:s})).ok?r.push(n):ty("error","FotoÄŸraf y\xfcklenemedi")}r.length>0&&(eW(e=>({...e,[s]:[...e[s]||[],...r]})),ty("success",`ðŸ“¸ ${r.length} fotoÄŸraf y\xfcklendi`))}catch(e){console.error("Photo upload error:",e),ty("error","FotoÄŸraf y\xfckleme hatasÄ±")}eJ(!1)},tL=async(e,t)=>{let a=eY[`${e}_${t}`];if(!a||0===a.length)return!1;try{return(await fetch("/api/swap-requests/photos",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapRequestId:e,photoType:t,photos:a})})).ok}catch{return!1}},tV=({swapId:e,type:t,title:a,description:r,required:l=!0})=>{let n=`${e}_${t}`,i=eY[n]||[];return(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-xl border border-gray-200 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-xs font-semibold text-gray-800",children:["\uD83D\uDCF8 ",a," ",l&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("span",{className:"text-[10px] text-gray-500",children:[i.length,"/5"]})]}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500",children:r}),i.length>0&&(0,s.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1",children:i.map((e,t)=>(0,s.jsxs)("div",{className:"relative w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"}),(0,s.jsx)("button",{onClick:()=>{eW(e=>({...e,[n]:e[n].filter((e,a)=>a!==t)}))},className:"absolute top-0 right-0 w-5 h-5 bg-red-500 text-white rounded-bl-lg flex items-center justify-center text-[10px]",children:"âœ•"})]},t))}),i.length<5&&(0,s.jsxs)("label",{className:`flex items-center justify-center gap-2 py-2.5 rounded-xl border-2 border-dashed cursor-pointer transition-all ${eH?"border-gray-300 bg-gray-100":"border-blue-300 hover:border-blue-500 hover:bg-blue-50"}`,children:[(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,capture:"environment",className:"hidden",onChange:a=>{a.target.files&&tI(e,t,a.target.files),a.target.value=""},disabled:eH}),eH?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin text-gray-400"}):(0,s.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"\uD83D\uDCF7 FotoÄŸraf \xc7ek / Se\xe7"})]}),i.length>0&&(0,s.jsxs)("p",{className:"text-[10px] text-green-600 text-center font-medium",children:["âœ… ",i.length," fotoÄŸraf hazÄ±r"]})]})},tM=async e=>{ex(!0);try{let{data:t,error:a}=await (0,R.wz)("/api/multi-swap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create",participants:e})});a?ty("error",a):(ty("success","\xc7oklu takas oluÅŸturuldu! KatÄ±lÄ±mcÄ±larÄ±n onayÄ± bekleniyor."),await tb())}catch(e){ty("error","Takas oluÅŸturulurken hata oluÅŸtu")}finally{ex(!1)}},tU=async e=>{es(e);try{let{data:t,error:a}=await (0,R.wz)("/api/multi-swap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"confirm",multiSwapId:e})});a?ty("error",a):((0,q.wk)(),ty("success",t?.message||"Onay verildi!"),await tb())}catch(e){ty("error","Onay g\xf6nderilirken hata oluÅŸtu")}finally{es(null)}},tQ=e=>{ei(e),eo("")},tG=async()=>{if(en){el(en);try{let{data:e,error:t}=await (0,R.wz)("/api/multi-swap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",multiSwapId:en,reason:ed||void 0})});t?ty("error",t):(ty("success",e?.message||"Takas reddedildi"),await tb(),ei(null),eo(""))}catch(e){ty("error","Red iÅŸlemi sÄ±rasÄ±nda hata oluÅŸtu")}finally{el(null)}}},tH=e=>({pending:{label:"Teklif G\xf6nderildi",color:"bg-yellow-100 text-yellow-700"},negotiating:{label:"PazarlÄ±k",color:"bg-orange-100 text-orange-700"},accepted:{label:"AnlaÅŸma SaÄŸlandÄ±",color:"bg-green-100 text-green-700"},delivery_proposed:{label:"Teslimat NoktasÄ± \xd6nerildi",color:"bg-blue-100 text-blue-700"},qr_generated:{label:"BuluÅŸma PlanlandÄ±",color:"bg-indigo-100 text-indigo-700"},arrived:{label:"Teslimat NoktasÄ±na Gelindi",color:"bg-orange-100 text-orange-700"},qr_scanned:{label:"QR Kod Okutuldu",color:"bg-purple-100 text-purple-700"},inspection:{label:"\xdcr\xfcn Kontrol Ediliyor",color:"bg-amber-100 text-amber-700"},code_sent:{label:"6 Haneli Kod Ä°letildi",color:"bg-cyan-100 text-cyan-700"},completed:{label:"Takas TamamlandÄ±",color:"bg-green-100 text-green-700"},disputed:{label:"Sorun Bildirildi",color:"bg-red-100 text-red-700"},rejected:{label:"Reddedildi",color:"bg-red-100 text-red-700"},cancelled:{label:"Ä°ptal Edildi",color:"bg-gray-100 text-gray-700"},refunded:{label:"Ä°ade Edildi",color:"bg-gray-100 text-gray-700"},awaiting_delivery:{label:"Teslimat Bekliyor",color:"bg-blue-100 text-blue-700"},delivered:{label:"Teslim Edildi",color:"bg-purple-100 text-purple-700"}})[e]||{label:e,color:"bg-gray-100 text-gray-700"},tJ=async(e,t)=>{try{let{data:a,error:s}=await (0,R.wz)("/api/swap-requests",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:t})});s?ty("error",s):("accepted"===t&&(0,q.wk)(),ty("success","accepted"===t?"Talep kabul edildi!":"Talep reddedildi."),await tb())}catch(e){ty("error","Ä°ÅŸlem sÄ±rasÄ±nda hata oluÅŸtu")}};if("loading"===t||W)return(0,s.jsx)("div",{className:"min-h-screen pt-24 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(x.Z,{className:"w-12 h-12 text-frozen-500 animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Y\xfckleniyor..."})]})});let tY=G.filter(e=>"pending"===e.status).length;return(0,s.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-white to-purple-50/30 pt-20 pb-12",children:[(0,s.jsx)(o.M,{children:ep&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`fixed top-24 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-xl shadow-lg flex items-center gap-2 ${"success"===ep.type?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:["success"===ep.type?(0,s.jsx)(u.Z,{className:"w-5 h-5"}):(0,s.jsx)(m.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:ep.message})]})}),(0,s.jsx)(o.M,{children:en&&(0,s.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ei(null),children:(0,s.jsxs)(c.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-red-600"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"TakasÄ± Reddet"})]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Bu takasÄ± reddettiÄŸinizde t\xfcm zincir iptal edilecek ve diÄŸer katÄ±lÄ±mcÄ±lara bildirim g\xf6nderilecektir."}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Red Nedeni (Ä°steÄŸe BaÄŸlÄ±)"}),(0,s.jsx)("div",{className:"space-y-2",children:[{id:"value_difference",label:"DeÄŸer farkÄ± \xe7ok fazla"},{id:"not_interested",label:"ArtÄ±k ilgilenmiyorum"},{id:"location_far",label:"Konum \xe7ok uzak"},{id:"changed_mind",label:"Fikrimi deÄŸiÅŸtirdim"},{id:"other",label:"DiÄŸer"}].map(e=>(0,s.jsxs)("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${ed===e.label?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("input",{type:"radio",name:"rejectReason",value:e.label,checked:ed===e.label,onChange:e=>eo(e.target.value),className:"w-4 h-4 text-red-600 focus:ring-red-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>ei(null),className:"flex-1 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition-colors",children:"Vazge\xe7"}),(0,s.jsx)("button",{onClick:tG,disabled:er===en,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-semibold hover:bg-red-600 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:er===en?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 animate-spin"})," Reddediliyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"w-5 h-5"})," Reddet"]})})]})]})})}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"w-6 h-6 text-white"})}),"tr"===K?"\uD83D\uDD04 Takas Merkezi":"\uD83D\uDD04 Swap Center"]}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"tr"===K?"T\xfcm takas iÅŸlemlerinizi tek merkezden y\xf6netin":"Manage all your swap transactions from one place"}),I&&(0,s.jsxs)("div",{className:"flex gap-3 mt-3",children:[(0,s.jsxs)("div",{className:"px-3 py-1.5 bg-purple-100 rounded-lg",children:[(0,s.jsx)("span",{className:"text-purple-600 text-xs",children:"Aktif Ä°lgi: "}),(0,s.jsx)("span",{className:"text-purple-700 font-bold text-sm",children:I.totalFound||0})]}),(0,s.jsxs)("div",{className:"px-3 py-1.5 bg-green-100 rounded-lg",children:[(0,s.jsx)("span",{className:"text-green-600 text-xs",children:"Dengeli: "}),(0,s.jsx)("span",{className:"text-green-700 font-bold text-sm",children:I.balanced||0})]})]})]}),(0,s.jsxs)("button",{onClick:tf,disabled:ee,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[(0,s.jsx)(g.Z,{className:`w-5 h-5 ${ee?"animate-spin":""}`}),(0,s.jsx)("span",{children:"Yenile"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-8 bg-white rounded-2xl p-2 shadow-sm",children:[(0,s.jsxs)("button",{onClick:()=>em("requests"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-all flex items-center justify-center gap-2 ${"requests"===eu?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)(b.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:Z("offers")}),tY>0&&(0,s.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${"requests"===eu?"bg-white/20":"bg-red-500 text-white"}`,children:tY})]}),(0,s.jsxs)("button",{onClick:()=>em("active"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-all flex items-center justify-center gap-2 ${"active"===eu?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)(f.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:Z("activeSwaps")}),V.length+J.length>0&&(0,s.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${"active"===eu?"bg-white/20":"bg-purple-500 text-white"}`,children:V.length+J.length})]}),(0,s.jsxs)("button",{onClick:()=>em("opportunities"),className:`flex-1 py-3 px-4 rounded-xl font-medium transition-all flex items-center justify-center gap-2 ${"opportunities"===eu?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)(y.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:Z("multiSwapTab")}),P.length>0&&(0,s.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${"opportunities"===eu?"bg-white/20":"bg-green-500 text-white"}`,children:P.length})]})]}),(0,s.jsxs)(o.M,{mode:"wait",children:["requests"===eu&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"w-5 h-5 text-purple-500"}),Z("incomingRequests")]}),0===G.length?(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 text-center",children:[(0,s.jsx)(b.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:Z("noIncomingRequests")}),(0,s.jsxs)(d.default,{href:"/urunler",className:"inline-flex items-center gap-2 mt-4 text-purple-600 font-medium hover:underline",children:[Z("browseProducts")," ",(0,s.jsx)(N.Z,{className:"w-4 h-4"})]})]}):(0,s.jsx)("div",{className:"space-y-4",children:G.map(e=>(0,s.jsx)(c.E.div,{layout:!0,className:`bg-white rounded-2xl p-6 shadow-sm border-2 ${"pending"===e.status?"border-purple-200":"border-transparent"}`,children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden bg-gray-100 flex-shrink-0",children:e.product.images?.[0]?(0,s.jsx)(i.default,{src:e.product.images[0],alt:"",fill:!0,className:"object-cover"}):(0,s.jsx)(j.Z,{className:"w-8 h-8 text-gray-300 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"\xdcr\xfcn\xfcn\xfcz i\xe7in talep:"}),(0,s.jsx)(d.default,{href:`/urun/${e.product.id}`,className:"font-semibold text-gray-900 hover:text-purple-600",children:e.product.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,s.jsx)("span",{className:"font-medium",children:e.requester.name||"KullanÄ±cÄ±"})," ilgi bildirdi"]})]}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${tH(e.status).color}`,children:tH(e.status).label})]}),e.offeredProduct&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-purple-50 rounded-xl",children:[(0,s.jsx)("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"Teklif edilen \xfcr\xfcn:"}),(0,s.jsxs)(d.default,{href:`/urun/${e.offeredProduct.id}`,className:"text-sm font-medium text-gray-900 hover:text-purple-600",children:[e.offeredProduct.title," (",e.offeredProduct.valorPrice," Valor)"]})]}),e.message&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-2 italic",children:['"',e.message,'"']}),"pending"===e.status&&(0,s.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,s.jsxs)("button",{onClick:()=>tJ(e.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-green-500 text-white text-sm font-medium hover:bg-green-600 transition-colors",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4"})," Kabul Et"]}),(0,s.jsxs)("button",{onClick:()=>tJ(e.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200 text-gray-700 text-sm font-medium hover:bg-gray-300 transition-colors",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"})," Reddet"]})]}),"accepted"===e.status&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-green-50 rounded-xl border border-green-200",children:[(0,s.jsx)("p",{className:"text-sm text-green-700 mb-2",children:"âœ… Teklif kabul edildi!"}),(0,s.jsxs)("button",{onClick:()=>{ew(e.id),eE("propose"),ev(!0),tj()},className:"w-full py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"\uD83D\uDCCD Teslimat NoktasÄ± \xd6ner"]})]}),"delivery_proposed"===e.status&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-xl border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 text-blue-600"}),(0,s.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Teslimat NoktasÄ± \xd6nerisi"})]}),e.customLocation&&(0,s.jsxs)("p",{className:"text-xs text-blue-700 mb-2",children:["\uD83D\uDCCD ",e.customLocation]}),e.deliveryPoint&&(0,s.jsxs)("p",{className:"text-xs text-blue-700 mb-2",children:["\uD83D\uDCCD ",e.deliveryPoint.name]}),e.lastProposedBy===tg?(0,s.jsx)("div",{className:"mt-2 p-2 bg-amber-50 rounded-lg border border-amber-200",children:(0,s.jsx)("p",{className:"text-xs text-amber-700",children:"â³ KarÅŸÄ± tarafÄ±n yanÄ±tÄ±nÄ± bekliyorsunuz. Kendi \xf6nerinizi onaylayamazsÄ±nÄ±z."})}):(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsxs)("button",{onClick:()=>tv(e.id),disabled:eZ,className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-medium text-sm disabled:opacity-50 flex items-center justify-center gap-1",children:[eZ?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(v.Z,{className:"w-4 h-4"}),"Onayla"]}),(0,s.jsxs)("button",{onClick:()=>{ew(e.id),eE("counter"),ev(!0),tj()},className:"flex-1 py-2 border border-blue-300 text-blue-600 rounded-lg font-medium text-sm flex items-center justify-center gap-1",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"FarklÄ± Yer \xd6ner"]})]})]}),"qr_generated"===e.status&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-indigo-50 rounded-xl border border-indigo-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 text-indigo-600"}),(0,s.jsx)("p",{className:"text-sm font-medium text-indigo-800",children:"QR Kod HazÄ±r"})]}),(0,s.jsx)("p",{className:"text-xs text-indigo-600 mb-2",children:"Belirlenen noktada buluÅŸun. QR kodu taratarak teslimatÄ± baÅŸlatÄ±n."}),e.qrCode&&(0,s.jsx)("div",{className:"p-2 bg-white rounded-lg text-center",children:(0,s.jsx)("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(e.qrCode)}`,alt:"QR Kod",className:"mx-auto w-24 h-24"})}),e.customLocation&&(0,s.jsxs)("p",{className:"text-xs text-indigo-600 mt-2",children:["\uD83D\uDCCD ",e.customLocation]})]})]})]})},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(w.Z,{className:"w-5 h-5 text-blue-500"}),Z("sentRequests")]}),0===U.length?(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 text-center",children:[(0,s.jsx)(j.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:Z("noSentRequests")}),(0,s.jsxs)(d.default,{href:"/urunler",className:"inline-flex items-center gap-2 mt-4 text-purple-600 font-medium hover:underline",children:[Z("browseProducts")," ",(0,s.jsx)(N.Z,{className:"w-4 h-4"})]})]}):(0,s.jsx)("div",{className:"space-y-4",children:U.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden bg-gray-100 flex-shrink-0",children:e.product.images?.[0]?(0,s.jsx)(i.default,{src:e.product.images[0],alt:"",fill:!0,className:"object-cover"}):(0,s.jsx)(j.Z,{className:"w-8 h-8 text-gray-300 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Ä°lgilendiÄŸiniz \xfcr\xfcn:"}),(0,s.jsx)(d.default,{href:`/urun/${e.product.id}`,className:"font-semibold text-gray-900 hover:text-purple-600",children:e.product.title}),(0,s.jsxs)("p",{className:"text-sm text-purple-600 font-medium",children:[e.product.valorPrice," Valor"]})]}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${tH(e.status).color}`,children:tH(e.status).label})]}),"accepted"===e.status&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-green-50 rounded-xl border border-green-200",children:[(0,s.jsx)("p",{className:"text-xs text-green-700 mb-2",children:"âœ… Kabul edildi!"}),(0,s.jsxs)("button",{onClick:()=>{ew(e.id),eE("propose"),ev(!0),tj()},className:"w-full py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"\uD83D\uDCCD Teslimat NoktasÄ± \xd6ner"]})]}),"delivery_proposed"===e.status&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded-xl border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 text-blue-600"}),(0,s.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Teslimat NoktasÄ± \xd6nerisi"})]}),e.customLocation&&(0,s.jsxs)("p",{className:"text-xs text-blue-700 mb-2",children:["\uD83D\uDCCD ",e.customLocation]}),e.deliveryPoint&&(0,s.jsxs)("p",{className:"text-xs text-blue-700 mb-2",children:["\uD83D\uDCCD ",e.deliveryPoint.name]}),e.lastProposedBy===tg?(0,s.jsx)("div",{className:"mt-2 p-2 bg-amber-50 rounded-lg border border-amber-200",children:(0,s.jsx)("p",{className:"text-xs text-amber-700",children:"â³ KarÅŸÄ± tarafÄ±n yanÄ±tÄ±nÄ± bekliyorsunuz. Kendi \xf6nerinizi onaylayamazsÄ±nÄ±z."})}):(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsxs)("button",{onClick:()=>tv(e.id),disabled:eZ,className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-medium text-sm disabled:opacity-50 flex items-center justify-center gap-1",children:[eZ?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(v.Z,{className:"w-4 h-4"}),"Onayla"]}),(0,s.jsxs)("button",{onClick:()=>{ew(e.id),eE("counter"),ev(!0),tj()},className:"flex-1 py-2 border border-blue-300 text-blue-600 rounded-lg font-medium text-sm flex items-center justify-center gap-1",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"FarklÄ± Yer"]})]})]}),"qr_generated"===e.status&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-indigo-50 rounded-xl border border-indigo-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 text-indigo-600"}),(0,s.jsx)("p",{className:"text-sm font-medium text-indigo-800",children:"QR Kod HazÄ±r"})]}),(0,s.jsx)("p",{className:"text-xs text-indigo-600 mb-2",children:"Belirlenen noktada buluÅŸun. QR kodu taratarak teslimatÄ± baÅŸlatÄ±n."}),e.qrCode&&(0,s.jsx)("div",{className:"p-2 bg-white rounded-lg text-center",children:(0,s.jsx)("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(e.qrCode)}`,alt:"QR Kod",className:"mx-auto w-24 h-24"})}),e.customLocation&&(0,s.jsxs)("p",{className:"text-xs text-indigo-600 mt-2",children:["\uD83D\uDCCD ",e.customLocation]})]})]})]})},e.id))})]})]},"requests"),"active"===eu&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[J.length>0&&(0,s.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"w-5 h-5 text-green-500"}),"Aktif Takaslar (",J.length,")"]}),J.map(e=>{let t=e.ownerId===tg,a=t?e.requester:e.product.user,r=tH(e.status),l=B(e.deliveryType),n=function(e,t){let a=B(t).findIndex(t=>t.key===e);return a>=0?a:-1}(e.status,e.deliveryType);return(0,s.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border-2 border-green-100",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"relative w-16 h-16 rounded-xl overflow-hidden bg-gray-100 flex-shrink-0",children:e.product.images?.[0]?(0,s.jsx)(i.default,{src:e.product.images[0],alt:"",fill:!0,className:"object-cover"}):(0,s.jsx)(j.Z,{className:"w-6 h-6 text-gray-300 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 text-sm",children:e.product.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[t?"AlÄ±cÄ±":"SatÄ±cÄ±",": ",a?.name||"KullanÄ±cÄ±"]})]}),(0,s.jsx)("span",{className:`px-2 py-1 rounded-full text-[10px] font-medium ${r.color}`,children:r.label})]}),n>=0&&(0,s.jsxs)("div",{className:"mt-3 mb-2",children:[e.deliveryType&&(0,s.jsx)("div",{className:"mb-2 text-center",children:(0,s.jsx)("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${"drop_off"===e.deliveryType?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:"drop_off"===e.deliveryType?"\uD83D\uDCCD Teslim NoktasÄ±na BÄ±rakma":"\uD83E\uDD1D BuluÅŸma"})}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-1.5",children:l.map((e,t)=>{let a=t<n,r=t===n;return(0,s.jsxs)("div",{className:`relative flex flex-col items-center p-1.5 rounded-xl border-2 transition-all ${a?"bg-green-50 border-green-400":r?"bg-purple-50 border-purple-500 shadow-md shadow-purple-200":"bg-gray-50 border-gray-200"}`,children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold ${a?"bg-green-500 text-white":r?"bg-purple-500 text-white animate-pulse":"bg-gray-200 text-gray-400"}`,children:a?"âœ“":e.icon}),(0,s.jsx)("span",{className:`text-[8px] mt-1 text-center leading-tight font-medium ${a?"text-green-700":r?"text-purple-700 font-bold":"text-gray-400"}`,children:e.shortLabel}),r&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-purple-500 rounded-full border-2 border-white animate-ping"})]},e.key)})}),(0,s.jsx)("div",{className:"mt-2 text-center",children:(0,s.jsxs)("span",{className:`text-[11px] font-semibold px-3 py-1 rounded-full inline-flex items-center gap-1 ${"completed"===e.status?"bg-green-100 text-green-700":"disputed"===e.status?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700"}`,children:[l[n]?.icon," ",l[n]?.label||e.status]})})]}),"accepted"===e.status&&(0,s.jsxs)("div",{className:"mt-3 space-y-3",children:[!e.deliveryType&&(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-blue-800 mb-3",children:"\uD83D\uDCE6 Teslimat Y\xf6ntemi Se\xe7in"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>tF(e.id,"face_to_face"),disabled:eL===e.id+"_delivery_type",className:"p-3 bg-white rounded-xl border-2 border-blue-200 hover:border-blue-500 transition-all text-center disabled:opacity-50",children:[(0,s.jsx)("div",{className:"text-2xl mb-1",children:"\uD83E\uDD1D"}),(0,s.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"BuluÅŸma"}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 mt-1",children:"Ä°ki taraf aynÄ± yerde buluÅŸur"})]}),(0,s.jsxs)("button",{onClick:()=>tF(e.id,"drop_off"),disabled:eL===e.id+"_delivery_type",className:"p-3 bg-white rounded-xl border-2 border-orange-200 hover:border-orange-500 transition-all text-center disabled:opacity-50",children:[(0,s.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCCD"}),(0,s.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"Teslim NoktasÄ±"}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 mt-1",children:"SatÄ±cÄ± bÄ±rakÄ±r, alÄ±cÄ± sonra alÄ±r"})]})]})]}),e.deliveryType&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"p-2 bg-gray-50 rounded-lg flex items-center gap-2 text-xs text-gray-600",children:"face_to_face"===e.deliveryType?"\uD83E\uDD1D BuluÅŸma":"\uD83D\uDCCD Teslim NoktasÄ±na BÄ±rakma"}),(0,s.jsxs)("button",{onClick:()=>{ew(e.id),eE("propose"),ev(!0),tj()},className:"w-full py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl font-medium text-sm flex items-center justify-center gap-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"\uD83D\uDCCD ","drop_off"===e.deliveryType?"Teslim NoktasÄ± Se\xe7":"BuluÅŸma NoktasÄ± \xd6ner"]})]})]}),"delivery_proposed"===e.status&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded-xl border border-blue-200",children:[(0,s.jsxs)("p",{className:"text-xs text-blue-700 mb-2",children:["\uD83D\uDCCD ",e.customLocation||e.deliveryPoint?.name||"Konum belirtilmedi"]}),e.lastProposedBy===tg?(0,s.jsx)("p",{className:"text-xs text-amber-700 bg-amber-50 p-2 rounded-lg",children:"â³ KarÅŸÄ± tarafÄ±n yanÄ±tÄ±nÄ± bekliyorsunuz"}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>tv(e.id),disabled:eZ,className:"flex-1 py-2 bg-green-500 text-white rounded-lg text-sm font-medium disabled:opacity-50 flex items-center justify-center gap-1",children:"âœ… Onayla"}),(0,s.jsx)("button",{onClick:()=>{ew(e.id),eE("counter"),ev(!0),tj()},className:"flex-1 py-2 border border-blue-300 text-blue-600 rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:"\uD83D\uDCCD FarklÄ± Yer"})]})]}),"qr_generated"===e.status&&(0,s.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,s.jsxs)("div",{className:"p-3 bg-indigo-50 rounded-xl text-center border border-indigo-200",children:[(0,s.jsx)("p",{className:"text-xs text-indigo-700 font-semibold mb-2",children:"\uD83D\uDCF1 QR Kod HazÄ±r"}),e.qrCode&&(0,s.jsx)("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(e.qrCode)}`,alt:"QR",className:"mx-auto w-20 h-20"}),(0,s.jsxs)("p",{className:"text-[10px] text-indigo-500 mt-1",children:["\uD83D\uDCCD ",e.customLocation||e.deliveryPoint?.name||""]})]}),tw(e)&&(0,s.jsx)(tV,{swapId:e.id,type:"packaging",title:"Paketleme FotoÄŸrafÄ±",description:"\xdcr\xfcn\xfc paketledikten sonra fotoÄŸrafÄ±nÄ± \xe7ekin. Bu fotoÄŸraf teslim anlaÅŸmazlÄ±ÄŸÄ±nda kanÄ±t olarak kullanÄ±lÄ±r."}),"drop_off"===e.deliveryType?(0,s.jsx)(s.Fragment,{children:tw(e)?(0,s.jsx)("button",{onClick:async()=>{let t=`${e.id}_packaging`;if(!eY[t]||0===eY[t].length){ty("error","\uD83D\uDCF8 \xd6nce paketleme fotoÄŸrafÄ± y\xfckleyin");return}await tL(e.id,"packaging"),tE(e.id)},disabled:eL===e.id+"_dropoff",className:"w-full py-2.5 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl font-medium text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:eL===e.id+"_dropoff"?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"\uD83D\uDCE6 \xdcr\xfcn\xfc Teslim NoktasÄ±na BÄ±raktÄ±m"})}):(0,s.jsx)("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-200 text-center",children:(0,s.jsx)("p",{className:"text-xs text-amber-700",children:"â³ SatÄ±cÄ±nÄ±n \xfcr\xfcn\xfc teslim noktasÄ±na bÄ±rakmasÄ±nÄ± bekliyorsunuz"})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-xl border border-gray-200",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"\uD83D\uDCCD VarÄ±ÅŸ Durumu"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:`flex-1 text-center p-2 rounded-lg ${e.ownerArrived?"bg-green-100 border border-green-300":"bg-gray-100 border border-gray-200"}`,children:[(0,s.jsx)("p",{className:"text-[10px] text-gray-500",children:"SatÄ±cÄ±"}),(0,s.jsx)("p",{className:"text-sm font-bold",children:e.ownerArrived?"âœ… Geldi":"â³ Bekleniyor"})]}),(0,s.jsxs)("div",{className:`flex-1 text-center p-2 rounded-lg ${e.requesterArrived?"bg-green-100 border border-green-300":"bg-gray-100 border border-gray-200"}`,children:[(0,s.jsx)("p",{className:"text-[10px] text-gray-500",children:"AlÄ±cÄ±"}),(0,s.jsx)("p",{className:"text-sm font-bold",children:e.requesterArrived?"âœ… Geldi":"â³ Bekleniyor"})]})]})]}),(tw(e)&&!e.ownerArrived||tD(e)&&!e.requesterArrived)&&(0,s.jsx)("button",{onClick:async()=>{if(tw(e)){let t=`${e.id}_packaging`;if(!eY[t]||0===eY[t].length){ty("error","\uD83D\uDCF8 L\xfctfen \xf6nce \xfcr\xfcn\xfcn paketleme fotoÄŸrafÄ±nÄ± y\xfckleyin");return}if(!await tL(e.id,"packaging")){ty("error","FotoÄŸraf kaydedilemedi");return}}tT(e.id)},disabled:eL===e.id+"_arrived",className:"w-full py-2.5 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl font-medium text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:eL===e.id+"_arrived"?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"\uD83D\uDCCD Teslimat NoktasÄ±na Geldim"})}),(tw(e)&&e.ownerArrived&&!e.requesterArrived||tD(e)&&e.requesterArrived&&!e.ownerArrived)&&(0,s.jsx)("div",{className:"p-3 bg-amber-50 rounded-lg text-center border border-amber-200",children:(0,s.jsx)("p",{className:"text-xs text-amber-700 font-medium",children:"â³ GeldiÄŸinizi bildirdiniz. KarÅŸÄ± tarafÄ± bekliyorsunuz..."})})]})]}),"arrived"===e.status&&(0,s.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,s.jsxs)("div",{className:"p-3 bg-green-50 rounded-xl border border-green-200 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-green-800 font-semibold",children:"âœ… Her Ä°ki Taraf da Geldi!"}),(0,s.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Åžimdi QR kodu taratarak takasÄ± baÅŸlatÄ±n."})]}),e.qrCode&&(0,s.jsxs)("div",{className:"p-4 bg-white rounded-xl border-2 border-purple-200 text-center",children:[(0,s.jsx)("p",{className:"text-xs text-purple-700 font-semibold mb-2",children:"\uD83D\uDCF1 Bu QR Kodu TaratÄ±n"}),(0,s.jsx)("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(e.qrCode)}`,alt:"QR",className:"mx-auto w-40 h-40"}),(0,s.jsxs)("p",{className:"text-[10px] text-gray-500 mt-2",children:["Ref: ",e.qrCode?.slice(0,20),"..."]})]}),(0,s.jsx)("button",{onClick:()=>tO(e.id),disabled:eL===e.id+"_scan",className:"w-full py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:eL===e.id+"_scan"?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"\uD83D\uDCF7 Kamera ile QR Tarat"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:eQ[e.id]||"",onChange:t=>eG(a=>({...a,[e.id]:t.target.value.toUpperCase()})),placeholder:"QR kodu manuel girin (TAKAS-...)",className:"flex-1 px-3 py-2 rounded-xl border-2 border-gray-200 text-sm focus:border-purple-400 focus:ring-0"}),(0,s.jsx)("button",{onClick:()=>tA(e.id,eQ[e.id]||""),disabled:!(eQ[e.id]||"").startsWith("TAKAS-")||eL===e.id+"_scan",className:"px-4 py-2 bg-purple-500 text-white rounded-xl text-sm font-medium disabled:opacity-50",children:"Tarat"})]})]}),"dropped_off"===e.status&&"drop_off"===e.deliveryType&&(0,s.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"\uD83D\uDCE6 \xdcr\xfcn Teslim NoktasÄ±nda!"}),(0,s.jsx)("p",{className:"text-xs text-green-600 mt-1",children:tD(e)?`3 iÅŸ g\xfcn\xfc i\xe7inde teslim noktasÄ±ndan \xfcr\xfcn\xfc almalÄ±sÄ±nÄ±z.`:"\xdcr\xfcn\xfc teslim noktasÄ±na bÄ±raktÄ±nÄ±z. AlÄ±cÄ±nÄ±n almasÄ±nÄ± bekliyorsunuz."}),e.dropOffDeadline&&(0,s.jsxs)("p",{className:"text-xs text-red-600 font-semibold mt-2",children:["â° Son tarih: ",new Date(e.dropOffDeadline).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})]}),(0,s.jsxs)("p",{className:"text-[10px] text-green-500 mt-2",children:["\uD83D\uDCCD ",e.customLocation||e.deliveryPoint?.name||""]})]}),tD(e)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-200",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-blue-800 mb-2",children:"\uD83D\uDD11 Teslim Kodunu Girin"}),(0,s.jsx)("p",{className:"text-[10px] text-blue-600 mb-2",children:"MesajlarÄ±nÄ±za g\xf6nderilen 6 haneli kodu girin"}),(0,s.jsx)("input",{type:"text",inputMode:"numeric",maxLength:6,value:eM[e.id]||"",onChange:t=>eU(a=>({...a,[e.id]:t.target.value.replace(/\D/g,"").slice(0,6)})),placeholder:"000000",className:"w-full text-center text-2xl font-black tracking-[8px] p-3 rounded-xl border-2 border-blue-300 bg-white"})]}),(0,s.jsx)("button",{onClick:()=>tZ(e.id),disabled:eL===e.id+"_pickup"||6!==(eM[e.id]||"").length,className:`w-full py-2.5 rounded-xl font-medium text-sm flex items-center justify-center gap-2 ${6===(eM[e.id]||"").length?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-gray-200 text-gray-400"}`,children:eL===e.id+"_pickup"?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"âœ… \xdcr\xfcn\xfc AldÄ±m â€” Kodu DoÄŸrula"})})]})]}),"qr_scanned"===e.status&&(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsxs)("div",{className:"p-3 bg-purple-50 rounded-xl border border-purple-200 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-purple-800 font-semibold",children:"âœ… QR Kod Okutuldu!"}),(0,s.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:tD(e)?"\xdcr\xfcn\xfc kontrol edin ve onaylayÄ±n.":"AlÄ±cÄ± \xfcr\xfcn\xfc kontrol ediyor..."})]}),tw(e)&&(0,s.jsx)(tV,{swapId:e.id,type:"delivery",title:"Teslim FotoÄŸrafÄ±",description:"\xdcr\xfcn\xfc alÄ±cÄ±ya teslim ederken fotoÄŸraf \xe7ekin."}),tD(e)&&(0,s.jsx)("button",{onClick:()=>tC(e.id),disabled:eL===e.id+"_inspect",className:"w-full py-2.5 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-xl font-medium text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:eL===e.id+"_inspect"?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"\uD83D\uDD0D \xdcr\xfcn\xfc Kontrol Ediyorum"})}),tw(e)&&(0,s.jsx)("p",{className:"text-xs text-purple-600 text-center",children:"AlÄ±cÄ±nÄ±n \xfcr\xfcn\xfc kontrol etmesini bekleyin."})]}),"inspection"===e.status&&(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsxs)("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-200 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-amber-800 font-semibold",children:"\uD83D\uDD0D \xdcr\xfcn Kontrol Ediliyor"}),(0,s.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:tD(e)?"\xdcr\xfcn\xfc inceleyip onaylayÄ±n veya sorun bildirin.":"AlÄ±cÄ± \xfcr\xfcn\xfc inceliyor, l\xfctfen bekleyin."})]}),tD(e)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tV,{swapId:e.id,type:"receiving",title:"AlÄ±m FotoÄŸrafÄ±",description:"AldÄ±ÄŸÄ±nÄ±z \xfcr\xfcn\xfcn fotoÄŸrafÄ±nÄ± \xe7ekin. Bu fotoÄŸraf \xfcr\xfcn kontrol\xfc kanÄ±tÄ±dÄ±r."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:async()=>{let t=`${e.id}_receiving`;if(!eY[t]||0===eY[t].length){ty("error","\uD83D\uDCF8 L\xfctfen \xf6nce \xfcr\xfcn\xfcn alÄ±m fotoÄŸrafÄ±nÄ± y\xfckleyin");return}if(!await tL(e.id,"receiving")){ty("error","FotoÄŸraf kaydedilemedi");return}tS(e.id)},disabled:eL===e.id+"_approve",className:"flex-1 py-2.5 bg-green-500 text-white rounded-xl font-medium text-sm flex items-center justify-center gap-2 disabled:opacity-50",children:eL===e.id+"_approve"?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"âœ… \xdcr\xfcn\xfc OnaylÄ±yorum"})}),(0,s.jsx)("button",{onClick:()=>tK(e.id),className:"flex-1 py-2.5 bg-red-500 text-white rounded-xl font-medium text-sm flex items-center justify-center gap-2",children:"âš ï¸ Sorun Var"})]})]}),tw(e)&&(0,s.jsx)("p",{className:"text-xs text-amber-600 text-center",children:"AlÄ±cÄ± \xfcr\xfcn\xfc inceliyor, l\xfctfen bekleyin."})]}),"code_sent"===e.status&&(0,s.jsx)("div",{className:"mt-3 space-y-3",children:tD(e)?(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl border-2 border-green-300 text-center",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-green-800 mb-2",children:"\uD83D\uDD11 DoÄŸrulama Kodunuz"}),(0,s.jsx)("span",{className:"text-3xl font-black text-green-700 tracking-[8px]",children:e$[e.id]||"â€¢â€¢â€¢â€¢â€¢â€¢"}),(0,s.jsx)("p",{className:"text-[10px] text-green-600 mt-2",children:"âš ï¸ Bu kodu teslim noktasÄ±nda satÄ±cÄ±ya s\xf6yleyin"}),!e$[e.id]&&(0,s.jsx)("p",{className:"text-[10px] text-gray-500 mt-1",children:"\uD83D\uDCA1 Kodu g\xf6remiyorsanÄ±z mesajlarÄ±nÄ±zÄ± veya e-postanÄ±zÄ± kontrol edin"})]}):(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl border-2 border-blue-200",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-blue-800 text-center mb-1",children:"\uD83D\uDD11 DoÄŸrulama Kodu Girin"}),(0,s.jsx)("p",{className:"text-xs text-blue-600 text-center mb-3",children:"AlÄ±cÄ±nÄ±n size s\xf6ylediÄŸi 6 haneli kodu girin"}),(0,s.jsx)("input",{type:"text",inputMode:"numeric",maxLength:6,value:eM[e.id]||"",onChange:t=>eU(a=>({...a,[e.id]:t.target.value.replace(/\D/g,"").slice(0,6)})),placeholder:"000000",className:"w-full text-center text-3xl font-black tracking-[10px] p-4 rounded-xl border-2 border-blue-300 bg-white focus:border-blue-500 focus:ring-0"}),(0,s.jsx)("button",{onClick:()=>tz(e.id),disabled:eL===e.id+"_verify"||6!==(eM[e.id]||"").length,className:`w-full mt-3 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${6===(eM[e.id]||"").length?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:eL===e.id+"_verify"?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"âœ… Kodu DoÄŸrula ve TakasÄ± Tamamla"})}),(0,s.jsx)("p",{className:"text-[10px] text-gray-400 text-center mt-2",children:"\uD83D\uDCA1 AlÄ±cÄ± kodu mesajlarÄ±ndan veya e-postasÄ±ndan bulabilir"})]})}),"completed"===e.status&&(0,s.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,s.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-300 text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold text-green-700",children:"\uD83C\uDF89 Takas G\xfcvenle TamamlandÄ±!"}),(0,s.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"KarÅŸÄ± tarafÄ± deÄŸerlendirmeyi unutmayÄ±n."})]}),e.disputeWindowEndsAt&&(()=>{let t=new Date,a=new Date(e.disputeWindowEndsAt).getTime()-t.getTime(),r=Math.max(0,Math.floor(a/36e5)),l=r<6;return a<=0?null:(0,s.jsxs)("div",{className:`p-3 rounded-xl border-2 ${l?"bg-red-50 border-red-300":"bg-amber-50 border-amber-200"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("p",{className:`text-xs font-bold ${l?"text-red-800":"text-amber-800"}`,children:"â° AnlaÅŸmazlÄ±k Bildirim S\xfcresi"}),(0,s.jsxs)("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${l?"bg-red-200 text-red-700":"bg-amber-200 text-amber-700"}`,children:[r,"s ",Math.max(0,Math.floor(a%36e5/6e4)),"dk kaldÄ±"]})]}),(0,s.jsx)("p",{className:"text-[10px] text-gray-600",children:l?"âš ï¸ S\xfcre dolmak \xfczere! Sorun varsa hemen bildirin.":"\xdcr\xfcnle ilgili bir sorun varsa bu s\xfcre i\xe7inde bildirebilirsiniz."}),(0,s.jsx)("button",{onClick:()=>tK(e.id),className:`w-full mt-2 py-2 rounded-lg text-xs font-medium border ${l?"border-red-400 text-red-700 hover:bg-red-100":"border-amber-400 text-amber-700 hover:bg-amber-100"}`,children:"âš ï¸ Sorun Bildir"})]})})()]}),"disputed"===e.status&&(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsxs)("div",{className:"p-4 bg-red-50 rounded-xl border-2 border-red-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(D.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsx)("p",{className:"text-sm font-bold text-red-800",children:"AnlaÅŸmazlÄ±k Ä°nceleniyor"})]}),(0,s.jsx)("p",{className:"text-xs text-red-600 mb-3",children:"Sorun raporu oluÅŸturuldu. Destek ekibimiz 24 saat i\xe7inde inceleyecek."}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-red-700",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full"}),"Teminatlar donduruldu"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-red-700",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full"}),"Her iki taraf bilgilendirildi"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-orange-600",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse"}),"UzlaÅŸma s\xfcreci baÅŸlatÄ±lacak"]})]}),(0,s.jsx)("div",{className:"mt-3 p-2 bg-white rounded-lg border border-red-100",children:(0,s.jsx)("p",{className:"text-[10px] text-gray-500",children:"\uD83D\uDCA1 Ä°pucu: KarÅŸÄ± tarafla mesajlaÅŸarak sorunu \xe7\xf6zmeye \xe7alÄ±ÅŸabilirsiniz. UzlaÅŸma saÄŸlanÄ±rsa anlaÅŸmazlÄ±k kapanÄ±r."})})]}),(0,s.jsx)("button",{onClick:()=>{let t=tD(e)?e.owner||e.product?.user:e.requester;t?.id&&(window.location.href=`/profil?tab=messages&user=${t.id}`)},className:"w-full py-2 border border-blue-300 text-blue-600 rounded-xl text-sm font-medium flex items-center justify-center gap-2",children:"\uD83D\uDCAC KarÅŸÄ± Tarafla MesajlaÅŸ"})]}),"refunded"===e.status&&(0,s.jsxs)("div",{className:"mt-3 p-4 bg-gray-50 rounded-xl border border-gray-200 text-center",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:"\uD83D\uDCB0 Teminat Ä°ade Edildi"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"AnlaÅŸmazlÄ±k \xe7\xf6z\xfcld\xfc ve teminatÄ±nÄ±z iade edildi."})]}),["arrived","qr_scanned"].includes(e.status)&&(0,s.jsx)("button",{onClick:()=>tK(e.id),className:"w-full mt-2 py-1.5 text-red-500 text-xs font-medium underline",children:"âš ï¸ Sorun mu var? Bildir"})]})]})},e.id)})]}),0===V.length&&0===J.length?(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-12 text-center",children:[(0,s.jsx)(f.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aktif Takas Yok"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Åžu anda katÄ±ldÄ±ÄŸÄ±nÄ±z aktif bir takas bulunmuyor."})]}):V.length>0&&(0,s.jsx)("div",{className:"space-y-6",children:V.map(t=>{let a=t.participants.find(t=>t.user?.email===e?.user?.email),r=a?.confirmed,l=t.participants.filter(e=>e.confirmed).length,n=t.participants.length-l;return(0,s.jsxs)("div",{className:`bg-white rounded-2xl p-6 shadow-sm border-2 ${"confirmed"===t.status?"border-green-200":"border-yellow-100"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900",children:[t.participants.length," KiÅŸilik Takas"]}),t.isInitiator&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-purple-100 text-purple-700 text-xs font-medium",children:"BaÅŸlatan"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===t.status&&null!==t.timeRemaining&&(0,s.jsxs)("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${t.timeRemaining<120?"bg-red-100 text-red-700":t.timeRemaining<480?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:[(0,s.jsx)(T.Z,{className:"w-3 h-3"}),t.timeRemaining<60?`${t.timeRemaining} dk`:`${Math.floor(t.timeRemaining/60)} sa ${t.timeRemaining%60} dk`]}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"pending"===t.status?"bg-yellow-100 text-yellow-700":"confirmed"===t.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:"pending"===t.status?`${l}/${t.participants.length} Onay`:"confirmed"===t.status?"âœ“ OnaylandÄ±":t.status})]})]}),"pending"===t.status&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-500 transition-all duration-500",style:{width:`${l/t.participants.length*100}%`}})})}),(0,s.jsx)("div",{className:"flex items-center gap-4 overflow-x-auto pb-4",children:t.participants.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:`relative w-16 h-16 rounded-xl overflow-hidden bg-gray-100 mb-2 border-2 ${e.confirmed?"border-green-300":"border-gray-200"}`,children:[e.givesProduct.images?.[0]?(0,s.jsx)(i.default,{src:e.givesProduct.images[0],alt:"",fill:!0,className:"object-cover"}):(0,s.jsx)(j.Z,{className:"w-6 h-6 text-gray-300 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"}),(0,s.jsxs)("div",{className:"absolute bottom-0.5 right-0.5 bg-white/90 px-1 py-0.5 rounded text-xs font-bold text-purple-700",children:[e.givesProduct.valorPrice,"V"]})]}),(0,s.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate max-w-[80px]",children:e.user.name||"KullanÄ±cÄ±"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 truncate max-w-[80px]",children:e.givesProduct.title}),e.confirmed?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-green-600 mt-1",children:[(0,s.jsx)(u.Z,{className:"w-3 h-3"})," OnayladÄ±"]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-yellow-600 mt-1",children:[(0,s.jsx)(T.Z,{className:"w-3 h-3"})," Bekliyor"]})]}),a<t.participants.length-1&&(0,s.jsx)(w.Z,{className:"w-5 h-5 text-gray-300"})]},e.id))}),"pending"===t.status&&(0,s.jsx)("div",{className:"flex gap-3 mt-4",children:r?(0,s.jsxs)("div",{className:"flex-1 py-3 rounded-xl bg-green-50 text-green-700 font-medium text-center flex items-center justify-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5"}),"OnayÄ±nÄ±z alÄ±ndÄ±. ",n>0?`${n} kiÅŸi bekleniyor.`:""]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>tU(t.id),disabled:ea===t.id,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold hover:opacity-90 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:ea===t.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 animate-spin"})," OnaylanÄ±yor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"w-5 h-5"})," Onayla"]})}),(0,s.jsxs)("button",{onClick:()=>tQ(t.id),disabled:er===t.id,className:"px-6 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:[er===t.id?(0,s.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}):(0,s.jsx)(p.Z,{className:"w-5 h-5"}),"Reddet"]})]})}),"confirmed"===t.status&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-700 font-semibold mb-2",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5"}),"Takas OnaylandÄ±!"]}),(0,s.jsx)("p",{className:"text-sm text-green-600",children:"T\xfcm katÄ±lÄ±mcÄ±lar onayladÄ±. Teslim detaylarÄ± i\xe7in diÄŸer kullanÄ±cÄ±larla iletiÅŸime ge\xe7in."})]})]},t.id)})})]},"active"),"opportunities"===eu&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[(0,s.jsx)("div",{className:"bg-white rounded-2xl p-4 mb-6 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filtreler:"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:eg,onChange:e=>{eb(e.target.checked),setTimeout(tb,100)},className:"w-4 h-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Sadece Dengeli"})]}),(0,s.jsxs)("select",{value:ef,onChange:e=>{ey(parseInt(e.target.value)),setTimeout(tb,100)},className:"text-sm border border-gray-200 rounded-lg px-3 py-1.5 focus:ring-purple-500 focus:border-purple-500",children:[(0,s.jsx)("option",{value:"0",children:"T\xfcm Skorlar"}),(0,s.jsx)("option",{value:"30",children:"Min. 30 Puan"}),(0,s.jsx)("option",{value:"50",children:"Min. 50 Puan"}),(0,s.jsx)("option",{value:"70",children:"Min. 70 Puan"})]})]}),I&&(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:I.totalFound})," fÄ±rsat"]}),(0,s.jsxs)("span",{className:"text-green-600",children:[(0,s.jsx)("span",{className:"font-semibold",children:I.balanced})," dengeli"]}),(0,s.jsxs)("span",{className:"text-orange-600",children:[(0,s.jsx)("span",{className:"font-semibold",children:I.unbalanced})," dengesiz"]}),I.averageScore>0&&(0,s.jsxs)("span",{className:"text-purple-600",children:["Ort. ",(0,s.jsx)("span",{className:"font-semibold",children:I.averageScore})," puan"]})]})]})}),0===P.length?(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 text-center",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDD04"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:eg||ef>0?"Filtrelere Uygun FÄ±rsat Yok":"Hen\xfcz \xc7oklu Takas FÄ±rsatÄ± Yok"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:eg||ef>0?"Se\xe7ili filtrelere uygun takas bulunamadÄ±. Filtreleri deÄŸiÅŸtirmeyi deneyin.":"\xc7oklu takas fÄ±rsatlarÄ±, kullanÄ±cÄ±lar \xfcr\xfcnlere ilgi bildirdik\xe7e otomatik olarak oluÅŸur. ÅžansÄ±nÄ±zÄ± artÄ±rmak i\xe7in:"}),!(eg||ef>0)&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl text-center",children:[(0,s.jsx)("span",{className:"text-2xl",children:"1ï¸âƒ£"}),(0,s.jsx)("p",{className:"text-sm font-bold text-gray-800 mt-2",children:"\xdcr\xfcnlere g\xf6z atÄ±n"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"BeÄŸendiÄŸiniz \xfcr\xfcnleri bulun"})]}),(0,s.jsxs)("div",{className:"p-4 bg-purple-50 rounded-xl text-center",children:[(0,s.jsx)("span",{className:"text-2xl",children:"2ï¸âƒ£"}),(0,s.jsx)("p",{className:"text-sm font-bold text-gray-800 mt-2",children:"Takas teklif edin"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:'"HÄ±zlÄ± Takas" butonuna basÄ±n'})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl text-center",children:[(0,s.jsx)("span",{className:"text-2xl",children:"3ï¸âƒ£"}),(0,s.jsx)("p",{className:"text-sm font-bold text-gray-800 mt-2",children:"FÄ±rsatlar oluÅŸsun"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Algoritma otomatik eÅŸleÅŸtirir"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[(0,s.jsxs)(d.default,{href:"/urunler",className:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white font-semibold hover:opacity-90",children:["\uD83D\uDECDï¸ ",Z("browseProducts")]}),(0,s.jsxs)(d.default,{href:"/istek-panosu",className:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl border-2 border-purple-300 text-purple-600 font-semibold hover:bg-purple-50",children:["\uD83C\uDFAF ",Z("wishBoard")]})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-blue-100 rounded-2xl p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-white flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(y.Z,{className:"w-6 h-6 text-purple-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"AkÄ±llÄ± Takas AlgoritmasÄ±"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"AlgoritmamÄ±z deÄŸer dengesi (\xb1%20 tolerans) ve konum yakÄ±nlÄ±ÄŸÄ±nÄ± analiz ederek en adil ve pratik takas d\xf6ng\xfclerini \xf6nceliklendirir. YeÅŸil badge = dengeli deÄŸerler, y\xfcksek skor = daha iyi eÅŸleÅŸme!"})]})]})}),P.map((e,t)=>(0,s.jsxs)("div",{className:`bg-white rounded-2xl p-6 shadow-sm border-2 transition-all ${e.isValueBalanced?"border-green-200 hover:border-green-300":"border-orange-200 hover:border-orange-300"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-2",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5 text-purple-500"}),e.chainLength," KiÅŸilik Takas FÄ±rsatÄ±"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.isValueBalanced?(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium flex items-center gap-1",children:[(0,s.jsx)(S.Z,{className:"w-3 h-3"})," Dengeli"]}):(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-medium flex items-center gap-1",children:[(0,s.jsx)(m.Z,{className:"w-3 h-3"})," %",e.valueDifference," Fark"]}),(0,s.jsxs)("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${e.totalScore>=70?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":e.totalScore>=50?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[e.totalScore," Puan"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-gray-50 rounded-xl",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-600 mb-1",children:[(0,s.jsx)(S.Z,{className:"w-3 h-3"})," DeÄŸer Dengesi"]}),(0,s.jsx)("div",{className:`text-lg font-bold ${e.valueBalanceScore>=70?"text-green-600":e.valueBalanceScore>=40?"text-orange-500":"text-red-500"}`,children:e.valueBalanceScore})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-600 mb-1",children:[(0,s.jsx)(k.Z,{className:"w-3 h-3"})," Konum Skoru"]}),(0,s.jsx)("div",{className:`text-lg font-bold ${e.locationScore>=70?"text-green-600":e.locationScore>=40?"text-orange-500":"text-red-500"}`,children:e.locationScore})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-600 mb-1",children:[(0,s.jsx)(z.Z,{className:"w-3 h-3"})," Ort. DeÄŸer"]}),(0,s.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[e.averageValorPrice," V"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 overflow-x-auto pb-4",children:[e.participants.map((t,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden bg-gray-100 mb-2 border-2 border-purple-200",children:[t.productImage?(0,s.jsx)(i.default,{src:t.productImage,alt:"",fill:!0,className:"object-cover"}):(0,s.jsx)(j.Z,{className:"w-8 h-8 text-gray-300 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"}),(0,s.jsxs)("div",{className:"absolute bottom-1 right-1 bg-white/90 backdrop-blur-sm px-1.5 py-0.5 rounded text-xs font-bold text-purple-700",children:[t.productValorPrice,"V"]})]}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.userName}),(0,s.jsx)("p",{className:"text-xs text-gray-600 truncate max-w-[100px]",children:t.productTitle}),t.productLocation&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-0.5 mt-0.5",children:[(0,s.jsx)(k.Z,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[80px]",children:t.productLocation})]})]}),a<e.participants.length-1&&(0,s.jsx)(w.Z,{className:"w-6 h-6 text-purple-400"})]},a)),(0,s.jsx)(w.Z,{className:"w-6 h-6 text-purple-400 rotate-180 flex-shrink-0"})]}),!e.isValueBalanced&&(0,s.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-orange-50 rounded-xl mb-4",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("p",{className:"text-xs text-orange-700",children:["Bu takas zincirinde \xfcr\xfcn deÄŸerleri arasÄ±nda %",e.valueDifference," farklÄ±lÄ±k var. Yine de katÄ±lmak isterseniz, t\xfcm taraflarÄ±n onayÄ± gerekecektir."]})]}),(0,s.jsx)("button",{onClick:()=>tM(e.participants),disabled:ec,className:`w-full py-3 rounded-xl font-semibold hover:opacity-90 disabled:opacity-50 transition-all flex items-center justify-center gap-2 ${e.isValueBalanced?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-gradient-to-r from-orange-400 to-amber-500 text-white"}`,children:ec?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 animate-spin"})," OluÅŸturuluyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"w-5 h-5"})," Bu TakasÄ± BaÅŸlat"]})})]},t))]})]},"opportunities")]})]}),(0,s.jsx)(o.M,{children:eN&&(0,s.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>{ev(!1),tk()},children:(0,s.jsxs)(c.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl w-full max-w-md max-h-[85vh] overflow-y-auto shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(k.Z,{className:"w-5 h-5 text-blue-500"}),(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"counter"===eF?"\uD83D\uDD04 KarÅŸÄ± \xd6neri Yap":"\uD83D\uDCCD Teslimat NoktasÄ± Belirle"})]}),(0,s.jsx)("button",{onClick:()=>{ev(!1),tk()},className:"p-1 hover:bg-gray-100 rounded-full",children:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Teslim Yeri Tipi"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("button",{onClick:()=>eT("delivery_point"),className:`p-3 rounded-xl border-2 text-center text-sm transition-all ${"delivery_point"===eD?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600"}`,children:"\uD83C\uDFEA Teslim NoktasÄ±"}),(0,s.jsx)("button",{onClick:()=>eT("custom_location"),className:`p-3 rounded-xl border-2 text-center text-sm transition-all ${"custom_location"===eD?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600"}`,children:"\uD83D\uDCCD \xd6zel Konum"})]})]}),"delivery_point"===eD&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Teslim NoktasÄ± Se\xe7in"}),eB.length>0?(0,s.jsxs)("select",{value:eC,onChange:e=>eS(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-gray-900 text-sm",children:[(0,s.jsx)("option",{value:"",children:"Se\xe7iniz..."}),eB.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," â€” ",e.address]},e.id))]}):(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Teslim noktasÄ± y\xfckleniyor..."})]}),"custom_location"===eD&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"BuluÅŸma NoktasÄ±"}),(0,s.jsx)("input",{type:"text",value:ez,onChange:e=>eA(e.target.value),placeholder:"\xd6rn: Konak MeydanÄ±, Starbucks \xf6n\xfc",className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-gray-900 text-sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"\uD83D\uDCC5 Tarih"}),(0,s.jsx)("input",{type:"date",value:e_,onChange:e=>eR(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-gray-900 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"â° Saat"}),(0,s.jsx)("input",{type:"time",value:eq,onChange:e=>eO(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-gray-900 text-sm"})]})]}),(0,s.jsx)("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-200",children:(0,s.jsxs)("p",{className:"text-xs text-amber-700",children:["\uD83D\uDCA1 ","counter"===eF?"KarÅŸÄ± \xf6neriniz karÅŸÄ± tarafa iletilecek. OnayladÄ±ÄŸÄ±nda QR kod oluÅŸturulur.":"\xd6neriniz karÅŸÄ± tarafa iletilecek. OnayladÄ±ÄŸÄ±nda veya karÅŸÄ± \xf6neri yaptÄ±ÄŸÄ±nda bilgilendirileceksiniz."]})}),(0,s.jsx)("button",{onClick:tN,disabled:eZ||"delivery_point"===eD&&!eC||"custom_location"===eD&&!ez,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:eZ?(0,s.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{className:"w-4 h-4"}),"counter"===eF?"KarÅŸÄ± \xd6neri G\xf6nder":"Teslimat \xd6nerisi G\xf6nder"]})})]})]})})}),eX&&e2&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>tB(),children:(0,s.jsx)("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,s.jsx)(D.Z,{className:"w-7 h-7 text-red-500"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Sorun Bildir"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"\xdcr\xfcnle ilgili bir sorun mu var? DetaylarÄ± paylaÅŸÄ±n."})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Sorun T\xfcr\xfc ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:e5,onChange:e=>e3(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-0 bg-white text-gray-900 text-sm",children:[(0,s.jsx)("option",{value:"",children:"Se\xe7iniz..."}),(0,s.jsx)("option",{value:"not_as_described",children:"\uD83D\uDCCB A\xe7Ä±klamayla uyuÅŸmuyor"}),(0,s.jsx)("option",{value:"defect",children:"\uD83D\uDD27 ArÄ±za / Bozukluk var"}),(0,s.jsx)("option",{value:"damaged",children:"\uD83D\uDCA5 HasarlÄ± / KÄ±rÄ±k"}),(0,s.jsx)("option",{value:"missing_parts",children:"\uD83D\uDCE6 Eksik par\xe7a"}),(0,s.jsx)("option",{value:"wrong_item",children:"âŒ YanlÄ±ÅŸ \xfcr\xfcn g\xf6nderilmiÅŸ"}),(0,s.jsx)("option",{value:"no_show",children:"\uD83D\uDEAB KarÅŸÄ± taraf gelmedi"}),(0,s.jsx)("option",{value:"other",children:"\uD83D\uDCAC DiÄŸer"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["DetaylÄ± A\xe7Ä±klama ",(0,s.jsx)("span",{className:"text-red-500",children:"*"}),(0,s.jsx)("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"(min. 20 karakter)"})]}),(0,s.jsx)("textarea",{value:e4,onChange:e=>e8(e.target.value),placeholder:"Sorunu detaylÄ± bir ÅŸekilde a\xe7Ä±klayÄ±n. Ne bekliyordunuz ve ne aldÄ±nÄ±z?",rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-0 text-sm resize-none"}),(0,s.jsx)("div",{className:"flex justify-between mt-1",children:(0,s.jsxs)("p",{className:`text-xs ${e4.length>=20?"text-green-500":"text-red-400"}`,children:[e4.length,"/20 karakter ",e4.length>=20?"âœ“":""]})})]}),(0,s.jsxs)("div",{className:"mb-4 p-4 rounded-xl bg-red-50 border-2 border-red-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("p",{className:"text-sm font-bold text-red-800",children:["\uD83D\uDCF8 KanÄ±t FotoÄŸraflarÄ± ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("span",{className:"text-xs text-red-600 bg-red-100 px-2 py-0.5 rounded-full",children:[e6.length,"/5"]})]}),(0,s.jsx)("p",{className:"text-xs text-red-600 mb-3",children:"Sorunu g\xf6steren fotoÄŸraflar y\xfckleyin. En az 1, en fazla 5 fotoÄŸraf zorunlu."}),(0,s.jsx)("input",{ref:ts,type:"file",accept:"image/*",multiple:!0,capture:"environment",onChange:tP,className:"hidden"}),e6.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-3",children:e6.map((e,t)=>(0,s.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:e,alt:`KanÄ±t ${t+1}`,className:"w-full h-full object-cover"}),(0,s.jsx)("button",{onClick:()=>e7(e=>e.filter((e,a)=>a!==t)),className:"absolute top-0 right-0 w-5 h-5 bg-red-500 text-white rounded-bl-lg flex items-center justify-center text-[10px] font-bold",children:"âœ•"})]},t))}),e6.length<5&&(0,s.jsx)("button",{onClick:()=>ts.current?.click(),disabled:e9,className:"w-full py-2.5 border-2 border-dashed border-red-300 rounded-xl text-red-600 text-sm font-medium hover:bg-red-50 transition-all flex items-center justify-center gap-2",children:e9?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:["\uD83D\uDCF7 ",0===e6.length?"FotoÄŸraf Ekle (Zorunlu)":"FotoÄŸraf Ekle"]})}),e6.length>0&&(0,s.jsxs)("p",{className:"mt-2 text-xs text-green-600 text-center font-medium",children:["âœ… ",e6.length," fotoÄŸraf y\xfcklendi"]})]}),(0,s.jsx)("div",{className:"p-3 rounded-xl bg-amber-50 border border-amber-200 mb-5",children:(0,s.jsxs)("p",{className:"text-xs text-amber-700 flex items-start gap-1.5",children:[(0,s.jsx)(D.Z,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),(0,s.jsx)("span",{children:"AsÄ±lsÄ±z veya yanlÄ±ÅŸ raporlar g\xfcven puanÄ±nÄ±zÄ± d\xfcÅŸ\xfcrebilir. L\xfctfen sadece ger\xe7ek sorunlarÄ± bildirin."})]})}),(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50 border border-blue-200 mb-5",children:[(0,s.jsx)("p",{className:"text-xs text-blue-700 font-semibold mb-1",children:"\uD83D\uDCCB S\xfcre\xe7 nasÄ±l iÅŸler?"}),(0,s.jsxs)("ol",{className:"text-[10px] text-blue-600 space-y-1 list-decimal pl-4",children:[(0,s.jsx)("li",{children:"Raporunuz 24 saat i\xe7inde incelenir"}),(0,s.jsx)("li",{children:"KarÅŸÄ± tarafa bildirim g\xf6nderilir"}),(0,s.jsx)("li",{children:"UzlaÅŸma se\xe7enekleri sunulur (eÅŸit paylaÅŸÄ±m, alÄ±cÄ± lehine, tam iade, cezasÄ±z iptal)"}),(0,s.jsx)("li",{children:"AnlaÅŸma saÄŸlanamazsa admin ekibi karar verir"}),(0,s.jsx)("li",{children:"Teminatlar karara g\xf6re daÄŸÄ±tÄ±lÄ±r"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:tB,className:"flex-1 py-3 border-2 border-gray-200 text-gray-600 rounded-xl font-medium text-sm",children:"Ä°ptal"}),(0,s.jsx)("button",{onClick:t$,disabled:tt||!e5||e4.length<20||0===e6.length,className:`flex-1 py-3 rounded-xl font-bold text-sm text-white flex items-center justify-center gap-2 ${e6.length>0&&e5&&e4.length>=20?"bg-red-500 hover:bg-red-600":"bg-gray-300 cursor-not-allowed"}`,children:tt?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:"\uD83D\uDCE9 Rapor G\xf6nder"})})]})]})})}),tr&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/80 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-black/50",children:[(0,s.jsx)("h3",{className:"text-white font-bold text-lg",children:"\uD83D\uDCF7 QR Kod Tarat"}),(0,s.jsx)("button",{onClick:()=>{tq(),tl(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white",children:"âœ•"})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[(0,s.jsx)("div",{id:th,className:"w-full max-w-[300px] aspect-square rounded-2xl overflow-hidden bg-gray-900",style:{minHeight:"300px"}}),tu&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-red-500/20 rounded-xl max-w-sm",children:(0,s.jsx)("p",{className:"text-sm text-red-200 text-center",children:tu})}),tc&&!tu&&(0,s.jsx)("p",{className:"mt-4 text-white/70 text-sm animate-pulse",children:"\uD83D\uDCF1 QR kodu kameraya g\xf6sterin..."})]}),(0,s.jsxs)("div",{className:"p-4 bg-black/50 space-y-3",children:[!tc&&!tu&&(0,s.jsx)("button",{onClick:()=>tR(),className:"w-full py-3 bg-purple-500 text-white rounded-xl font-bold text-sm",children:"\uD83D\uDCF7 KamerayÄ± Yeniden BaÅŸlat"}),tu&&(0,s.jsx)("button",{onClick:()=>tR(),className:"w-full py-3 bg-purple-500 text-white rounded-xl font-bold text-sm",children:"\uD83D\uDD04 Tekrar Dene"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:eQ[tn||""]||"",onChange:e=>eG(t=>({...t,[tn||""]:e.target.value.toUpperCase()})),placeholder:"Manuel: TAKAS-...",className:"flex-1 px-3 py-3 rounded-xl bg-white/10 text-white border border-white/20 text-sm placeholder-white/40"}),(0,s.jsx)("button",{onClick:()=>{let e=eQ[tn||""]||"";e.startsWith("TAKAS-")&&tn&&(tq(),tA(tn,e),tl(!1))},disabled:!(eQ[tn||""]||"").startsWith("TAKAS-"),className:"px-5 py-3 bg-green-500 text-white rounded-xl text-sm font-bold disabled:opacity-30",children:"âœ“"})]})]})]})]})}},32611:function(e,t,a){"use strict";a.d(t,{FC:function(){return i},JE:function(){return m},KB:function(){return n},Ue:function(){return x},hh:function(){return c},jA:function(){return d},rH:function(){return l},s_:function(){return o},wk:function(){return u}});let s=null;function r(){return s||(s=new(window.AudioContext||window.webkitAudioContext)),s}function l(){try{return"off"!==localStorage.getItem("takas-a-sound")}catch{return!0}}function n(e){try{localStorage.setItem("takas-a-sound",e?"on":"off")}catch{}}function i(){try{let e=localStorage.getItem("takas-a-volume");return e?parseFloat(e):.5}catch{return .5}}function d(e){try{localStorage.setItem("takas-a-volume",Math.min(1,Math.max(0,e)).toString())}catch{}}function o(){if(l())try{let e=r(),t=i(),a=e.createOscillator(),s=e.createGain();a.connect(s),s.connect(e.destination),a.frequency.setValueAtTime(880,e.currentTime),a.frequency.setValueAtTime(1108,e.currentTime+.1),a.type="sine",s.gain.setValueAtTime(.3*t,e.currentTime),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.3),a.start(e.currentTime),a.stop(e.currentTime+.3)}catch{}}function c(){if(l())try{let e=r(),t=i(),a=e.createOscillator(),s=e.createGain();a.connect(s),s.connect(e.destination),a.frequency.setValueAtTime(523,e.currentTime),a.frequency.setValueAtTime(659,e.currentTime+.08),a.type="sine",s.gain.setValueAtTime(.25*t,e.currentTime),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2),a.start(e.currentTime),a.stop(e.currentTime+.2)}catch{}}function x(){if(l())try{let e=r(),t=i();[{freq:523,start:0,dur:.15},{freq:659,start:.15,dur:.15},{freq:784,start:.3,dur:.3}].forEach(({freq:a,start:s,dur:r})=>{let l=e.createOscillator(),n=e.createGain();l.connect(n),n.connect(e.destination),l.frequency.value=a,l.type="sine",n.gain.setValueAtTime(.3*t,e.currentTime+s),n.gain.exponentialRampToValueAtTime(.001,e.currentTime+s+r),l.start(e.currentTime+s),l.stop(e.currentTime+s+r)})}catch{}}function u(){if(l())try{let e=r(),t=i();[523,659,784,1047].forEach((a,s)=>{let r=e.createOscillator(),l=e.createGain();r.connect(l),l.connect(e.destination),r.frequency.value=a,r.type="sine";let n=e.currentTime+.12*s;l.gain.setValueAtTime(.25*t,n),l.gain.exponentialRampToValueAtTime(.001,n+.2),r.start(n),r.stop(n+.2)})}catch{}}function m(){if(l())try{let e=r(),t=i(),a=e.createOscillator(),s=e.createGain();a.connect(s),s.connect(e.destination),a.frequency.setValueAtTime(440,e.currentTime),a.frequency.setValueAtTime(550,e.currentTime+.05),a.type="sine",s.gain.setValueAtTime(.15*t,e.currentTime),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.15),a.start(e.currentTime),a.stop(e.currentTime+.15)}catch{}}},10839:function(e,t,a){"use strict";async function s(e){try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.type,message:e.message,severity:e.severity||"error",userId:e.userId,url:window.location.href,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,metadata:e.metadata?JSON.stringify(e.metadata):void 0})})}catch{console.error("Error reporter failed:",e.message)}}function r(){return!navigator.onLine}a.d(t,{s9:function(){return r},wz:function(){return i},DV:function(){return d},Pe:function(){return o}});let l={OFFLINE:"Ä°nternet baÄŸlantÄ±nÄ±z yok. L\xfctfen baÄŸlantÄ±nÄ±zÄ± kontrol edin.",TIMEOUT:"Sunucu yanÄ±t vermedi. L\xfctfen tekrar deneyin.",SERVER_ERROR:"Sunucu hatasÄ± oluÅŸtu. L\xfctfen daha sonra tekrar deneyin.",NETWORK_ERROR:"BaÄŸlantÄ± hatasÄ±. L\xfctfen internet baÄŸlantÄ±nÄ±zÄ± kontrol edin.",UNAUTHORIZED:"Oturum s\xfcreniz doldu. L\xfctfen tekrar giriÅŸ yapÄ±n.",FORBIDDEN:"Bu iÅŸlem i\xe7in yetkiniz yok.",NOT_FOUND:"Ä°stenen kaynak bulunamadÄ±.",RATE_LIMITED:"\xc7ok fazla istek g\xf6nderdiniz. L\xfctfen biraz bekleyin.",UNKNOWN:"Beklenmeyen bir hata oluÅŸtu."};async function n(e,t,a){let n=new AbortController,i=setTimeout(()=>n.abort(),a);try{let a=await fetch(e,{...t,signal:n.signal,headers:{"Content-Type":"application/json",...t.headers}});clearTimeout(i);let r=null,d=a.headers.get("content-type");if(d?.includes("application/json"))try{r=await a.json()}catch{r=null}if(!a.ok){let t=r?.error||r?.message||function(e,t){switch(e){case 401:return l.UNAUTHORIZED;case 403:return l.FORBIDDEN;case 404:return l.NOT_FOUND;case 429:return l.RATE_LIMITED;case 500:case 502:case 503:case 504:return l.SERVER_ERROR;default:return l.UNKNOWN}}(a.status);return a.status>=500&&s({type:"api_error",message:`API ${a.status}: ${e}`,severity:"error",metadata:{url:e,status:a.status,errorMsg:t}}),{data:null,error:t,status:a.status,ok:!1,isOffline:!1,isTimeout:!1}}return{data:r,error:null,status:a.status,ok:!0,isOffline:!1,isTimeout:!1}}catch(e){if(clearTimeout(i),"AbortError"===e.name)return{data:null,error:l.TIMEOUT,status:0,ok:!1,isOffline:!1,isTimeout:!0};return{data:null,error:l.NETWORK_ERROR,status:0,ok:!1,isOffline:r(),isTimeout:!1}}}async function i(e,t={}){let{timeout:a=1e4,retries:s=2,retryDelay:i=1e3,...d}=t;if(r())return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};let o=null;for(let t=0;t<=s;t++){if(t>0&&(await new Promise(e=>setTimeout(e,i)),r()))return{data:null,error:l.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};if((o=await n(e,d,a)).ok||401===o.status||403===o.status||404===o.status||429===o.status)break}return o}async function d(e,t){return i(e,{...t,method:"GET"})}async function o(e,t,a){return i(e,{...a,method:"POST",body:t?JSON.stringify(t):void 0})}}},function(e){e.O(0,[1791,5558,0,8001,3672,2717,2386,7156,1744],function(){return e(e.s=49789)}),_N_E=e.O()}]);