(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6099],{46176:function(e,a,t){Promise.resolve().then(t.bind(t,89469))},89469:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eC}});var s=t(15444),r=t(89300),i=t(75762),l=t(79047),n=t(17839),d=t(59335),c=t(31587),o=t(48001),m=t(41084),x=t(1946),u=t(16629),h=t(65407),g=t(28764),p=t(79582),f=t(29876),b=t(1780),y=t(66124),j=t(70362),v=t(33485),w=t(4693),N=t(58510),k=t(19484),D=t(36237),z=t(88382),S=t(43691),C=t(4805),E=t(29046),T=t(90185),A=t(458),Z=t(64624),P=t(39429),B=t(98155),$=t(60572),I=t(27242),F=t(77248),R=t(81178),M=t(9573),O=t(23269),V=t(23572),K=t(4464),G=t(18218),U=t(62492),L=t(58274),H=t(25076),q=t(19154),_=t(93034),Y=t(25422),J=t(78539),W=t(52429),X=t(85397),Q=t(2422),ee=t(74678),ea=t(67012),et=t(62312),es=t(65522);let er=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(et.fC,{className:(0,es.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:t,children:(0,s.jsx)(et.bU,{className:(0,es.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));er.displayName=et.fC.displayName;var ei=t(39291),el=t(38392),en=t(82717);let ed="app-badge-enabled";function ec(){return"setAppBadge"in navigator&&"clearAppBadge"in navigator}async function eo(){if(!ec())return!1;try{return await navigator.clearAppBadge(),console.log("[AppBadge] Badge temizlendi"),!0}catch(e){return console.error("[AppBadge] Temizleme hatasƒ±:",e),!1}}var em=t(10839),ex=t(42611),eu=t(16886),eh=t(33394);let eg=()=>(0,s.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),ep=()=>(0,s.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),ef=()=>(0,s.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})}),eb=()=>(0,s.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})});function ey({shareType:e,contentId:a,title:t="TAKAS-A - \xdccretsiz Takas Platformu",description:l="Para \xf6demeden e≈üyalarƒ±nƒ± takas et!",url:n,compact:o=!1}){let{data:m}=(0,i.useSession)(),[x,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),k=n||window.location.href,D=async()=>{if(m?.user)try{let e=await fetch("/api/social-share");if(e.ok){let a=await e.json();p(a)}}catch(e){console.error("Stats fetch error:",e)}};(0,r.useEffect)(()=>{x&&m?.user&&D()},[x,m]);let z=async t=>{if(m?.user){j(!0);try{let s=await fetch("/api/social-share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:t,shareType:e,contentId:a,shareUrl:k})});if(s.ok){let e=await s.json();e.valorAwarded>0&&(N({valor:e.valorAwarded,message:e.message}),setTimeout(()=>N(null),5e3)),D()}}catch(e){console.error("Share record error:",e)}finally{j(!1)}}},S=e=>{let a=encodeURIComponent(k),s=encodeURIComponent(t);switch(encodeURIComponent(l),e){case"twitter":return`https://twitter.com/intent/tweet?url=${a}&text=${s}`;case"facebook":return`https://www.facebook.com/sharer/sharer.php?u=${a}`;case"instagram":return"https://www.instagram.com/";case"whatsapp":return`https://wa.me/?text=${s}%20${a}`;default:return k}},C=async e=>{let a=S(e);"instagram"!==e?window.open(a,"_blank","width=600,height=400"):(await navigator.clipboard.writeText(k),alert("Link kopyalandƒ±! Instagram'da story veya post olarak payla≈üabilirsiniz.")),await z(e)};return o?(0,s.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium hover:shadow-lg transition-all",children:[(0,s.jsx)(ex.Z,{className:"w-4 h-4"}),"Payla≈ü & Kazan"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white font-semibold hover:shadow-lg transition-all hover:scale-105",children:[(0,s.jsx)(ex.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Payla≈ü & Valor Kazan"}),(0,s.jsx)(eu.Z,{className:"w-4 h-4"})]}),(0,s.jsx)(d.M,{children:x&&(0,s.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:()=>u(!1),children:(0,s.jsxs)(c.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 p-6 text-white",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-1",children:"Payla≈ü & Kazan! \uD83C\uDF89"}),(0,s.jsx)("p",{className:"text-white/80 text-sm",children:h?.userLevel===0?"ƒ∞lk takasƒ±nƒ± tamamla, payla≈üƒ±m bonusu a\xe7ƒ±lsƒ±n! \uD83D\uDD13":`Her ${h?.sharesForReward||5} payla≈üƒ±mda +${h?.valorReward||1} Valor kazan`})]}),(0,s.jsx)("button",{onClick:()=>u(!1),className:"p-1 rounded-full hover:bg-white/20 transition-colors",children:(0,s.jsx)(v.Z,{className:"w-5 h-5"})})]}),m?.user&&h&&(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-4 gap-2",children:[(0,s.jsxs)("div",{className:"bg-white/20 rounded-xl p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:h.totalShares}),(0,s.jsx)("div",{className:"text-xs text-white/80",children:"Payla≈üƒ±m"})]}),(0,s.jsxs)("div",{className:"bg-white/20 rounded-xl p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:h.totalValorEarned}),(0,s.jsx)("div",{className:"text-xs text-white/80",children:"Kazanƒ±lan"})]}),(0,s.jsxs)("div",{className:"bg-white/20 rounded-xl p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:0===h.userLevel?"\uD83D\uDD12":0===h.sharesUntilReward?"‚úî":h.sharesUntilReward}),(0,s.jsx)("div",{className:"text-xs text-white/80",children:"\xd6d\xfcle Kalan"})]}),(0,s.jsxs)("div",{className:"bg-white/20 rounded-xl p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:["\uD83C\uDF31","‚≠ê","\uD83D\uDD25","\uD83C\uDFC6","\uD83D\uDC8E","\uD83D\uDC51"][h.userLevel]||"\uD83C\uDF31"}),(0,s.jsxs)("div",{className:"text-xs text-white/80",children:["Seviye ",h.userLevel]})]})]})]}),(0,s.jsx)(d.M,{children:w&&(0,s.jsx)(c.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-green-100 border-b border-green-200",children:(0,s.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center",children:(0,s.jsx)(y.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold text-green-800",children:["+",w.valor," Valor Kazandƒ±n!"]}),(0,s.jsx)("p",{className:"text-sm text-green-600",children:w.message})]})]})})}),(0,s.jsxs)("div",{className:"p-6",children:[h?.userLevel===0&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-xl flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD12"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-bold text-amber-800",children:"Payla≈üƒ±m Bonusu Kilitli"}),(0,s.jsx)("p",{className:"text-xs text-amber-600",children:"ƒ∞lk takasƒ±nƒ± tamamla, Seviye 1'e \xe7ƒ±k ve payla≈üarak kazan!"})]})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:"A≈üaƒüƒ±daki platformlardan birinde payla≈üƒ±n:"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{id:"twitter",name:"X (Twitter)",icon:eg,color:"bg-black hover:bg-gray-800"},{id:"facebook",name:"Facebook",icon:ep,color:"bg-[#1877F2] hover:bg-[#166FE5]"},{id:"instagram",name:"Instagram",icon:ef,color:"bg-gradient-to-tr from-[#F58529] via-[#DD2A7B] to-[#8134AF] hover:opacity-90"},{id:"whatsapp",name:"WhatsApp",icon:eb,color:"bg-[#25D366] hover:bg-[#20BD5A]"}].map(e=>(0,s.jsxs)("button",{onClick:()=>C(e.id),disabled:b,className:`${e.color} text-white py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-all disabled:opacity-50`,children:[(0,s.jsx)(e.icon,{}),(0,s.jsx)("span",{className:"font-medium",children:e.name}),(0,s.jsx)(eh.Z,{className:"w-3 h-3 opacity-60"})]},e.id))}),m?.user&&h&&h.userLevel>0&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,s.jsx)("span",{children:"Bir sonraki \xf6d\xfcle ilerleme"}),(0,s.jsxs)("span",{children:[(h.sharesForReward||5)-(h.sharesUntilReward||0),"/",h.sharesForReward||5," payla≈üƒ±m"]})]}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)(c.E.div,{initial:{width:0},animate:{width:`${((h.sharesForReward||5)-(h.sharesUntilReward||0))/(h.sharesForReward||5)*100}%`},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500"})})]}),!m?.user&&(0,s.jsx)("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(f.Z,{className:"w-8 h-8 text-amber-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-amber-800",children:"Giri≈ü yapƒ±n!"}),(0,s.jsx)("p",{className:"text-sm text-amber-700",children:"Payla≈üƒ±mlarƒ±nƒ±zdan Valor kazanmak i\xe7in giri≈ü yapƒ±n."})]})]})}),(0,s.jsx)("div",{className:"mt-6 p-4 bg-purple-50 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(g.Z,{className:"w-6 h-6 text-purple-500 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-purple-700",children:[(0,s.jsx)("p",{className:"font-semibold mb-1",children:"Nasƒ±l \xc7alƒ±≈üƒ±r?"}),(0,s.jsx)("ul",{className:"space-y-1 text-purple-600",children:h?.userLevel===0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:"‚Ä¢ ƒ∞lk takasƒ±nƒ± tamamla ‚Üí payla≈üƒ±m bonusu a\xe7ƒ±lƒ±r!"}),(0,s.jsx)("li",{children:"‚Ä¢ Seviyen arttƒ±k\xe7a bonus da artar"}),(0,s.jsx)("li",{children:"‚Ä¢ Payla≈üƒ±mlarƒ±n sayƒ±lƒ±r, bonus geldiƒüinde ge\xe7erli olur"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("li",{children:["‚Ä¢ Seviye ",h?.userLevel,": Her ",h?.sharesForReward," payla≈üƒ±mda +",h?.valorReward," Valor"]}),(0,s.jsxs)("li",{children:["‚Ä¢ G\xfcnde maksimum ",h?.maxDailyValor," Valor kazanabilirsin"]}),(0,s.jsx)("li",{children:"‚Ä¢ Seviyen arttƒ±k\xe7a bonus artar! Takas yap, seviye atla!"}),(0,s.jsx)("li",{children:"‚Ä¢ T\xfcm platformlar ge\xe7erli"})]})})]})]})})]})]})})})]})}var ej=t(35879),ev=t(32611);(0,n.default)(()=>t.e(8297).then(t.bind(t,88297)).then(e=>({default:e.SwapManagement})),{loadableGenerated:{webpack:()=>[88297]},loading:()=>(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsx)(x.Z,{className:"w-6 h-6 animate-spin text-emerald-500"})}),ssr:!1});let ew=(0,n.default)(()=>t.e(8715).then(t.bind(t,68715)).then(e=>({default:e.BadgeDisplay})),{loadableGenerated:{webpack:()=>[68715]},loading:()=>(0,s.jsx)("div",{className:"animate-pulse bg-gray-200 rounded-lg h-32"}),ssr:!1}),eN=(0,n.default)(()=>t.e(778).then(t.bind(t,80778)).then(e=>({default:e.UserRatingSummary})),{loadableGenerated:{webpack:()=>[80778]},ssr:!1}),ek=(0,n.default)(()=>t.e(778).then(t.bind(t,80778)).then(e=>({default:e.ReviewList})),{loadableGenerated:{webpack:()=>[80778]},ssr:!1}),eD=(0,n.default)(()=>t.e(778).then(t.bind(t,80778)).then(e=>({default:e.TrustBadge})),{loadableGenerated:{webpack:()=>[80778]},ssr:!1}),ez=(0,n.default)(()=>t.e(6953).then(t.bind(t,66953)).then(e=>({default:e.ReviewModal})),{loadableGenerated:{webpack:()=>[66953]},ssr:!1}),eS=[{id:"interests",question:"Hangi kategorilerle ilgileniyorsunuz?",type:"multiple",options:["Elektronik","Giyim","Kitap","Spor","Ev & Ya≈üam","Oyuncak","Bebek \xdcr\xfcnleri","Koleksiyon","M\xfczik Aletleri","Bah\xe7e"]},{id:"frequency",question:"Ne sƒ±klƒ±kla takas yapmayƒ± planlƒ±yorsunuz?",type:"single",options:["Haftada birka\xe7 kez","Haftada bir","Ayda birka\xe7 kez","Ayda bir","Nadiren"]},{id:"preference",question:"Takas i\xe7in en \xe7ok hangi t\xfcr \xfcr\xfcnleri tercih edersiniz?",type:"single",options:["Yeni veya az kullanƒ±lmƒ±≈ü \xfcr\xfcnler","ƒ∞yi durumda ikinci el","Fiyatƒ± uygun olan herhangi biri","Nadir/koleksiyon \xfcr\xfcnleri"]},{id:"distance",question:"Takas i\xe7in ne kadar mesafe gitmeyi kabul edersiniz?",type:"single",options:["Sadece mahallemde","ƒ∞l\xe7em i\xe7inde","≈ûehir genelinde","Farklƒ± ≈üehirlere bile giderim"]},{id:"motivation",question:"TAKAS-A'yƒ± kullanma motivasyonunuz nedir?",type:"multiple",options:["Tasarruf etmek","S\xfcrd\xfcr\xfclebilir ya≈üam","Kullanmadƒ±ƒüƒ±m e≈üyalarƒ± deƒüerlendirmek","Yeni insanlarla tanƒ±≈ümak","Nadir \xfcr\xfcnler bulmak"]},{id:"communication",question:"Nasƒ±l ileti≈üim kurmayƒ± tercih edersiniz?",type:"single",options:["Uygulama i\xe7i mesajla≈üma","Telefon","Video g\xf6r\xfc≈üme","Y\xfcz y\xfcze g\xf6r\xfc≈üme"]},{id:"improvement",question:"TAKAS-A'da en \xe7ok g\xf6rmek istediƒüiniz \xf6zellik?",type:"single",options:["Daha fazla \xfcr\xfcn \xe7e≈üitliliƒüi","Daha fazla teslim noktasƒ±","Mobil uygulama","Topluluk etkinlikleri","Puan/\xf6d\xfcl sistemi"]}];function eC(){let{data:e,status:a}=(0,i.useSession)(),t=(0,l.useRouter)(),n=(0,l.useSearchParams)(),{language:et}=(0,en.Z)(),es=n?.get("tab")||"products",[ei,ex]=(0,r.useState)(es);(0,r.useEffect)(()=>{let e=n?.get("tab");if("foryou"===e||"swaps"===e){t.replace("/takas-firsatlari");return}e&&e!==ei&&ex(e)},[n,t]),(0,r.useEffect)(()=>{an(ec()),ac(function(){let e=localStorage.getItem(ed);return null===e||"true"===e}())},[]);let[eu,eh]=(0,r.useState)(null),[eg,ep]=(0,r.useState)([]),[ef,eb]=(0,r.useState)(!0),[ez,eC]=(0,r.useState)(null),[eA,eZ]=(0,r.useState)(!1),[eP,eB]=(0,r.useState)({name:"",nickname:"",bio:"",phone:"",location:""}),[e$,eI]=(0,r.useState)(!1),[eF,eR]=(0,r.useState)(!1),[eM,eO]=(0,r.useState)(null),[eV,eK]=(0,r.useState)(null),[eG,eU]=(0,r.useState)(null),[eL,eH]=(0,r.useState)("idle"),[eq,e_]=(0,r.useState)(""),[eY,eJ]=(0,r.useState)(""),[eW,eX]=(0,r.useState)(""),[eQ,e0]=(0,r.useState)(""),[e1,e5]=(0,r.useState)(""),[e2,e4]=(0,r.useState)("idle"),{supported:e3,subscribed:e8,loading:e6,subscribe:e7,unsubscribe:e9}=(0,el.usePushNotifications)(),[ae,aa]=(0,r.useState)(!1),[at,as]=(0,r.useState)(null),[ar,ai]=(0,r.useState)("idle"),[al,an]=(0,r.useState)(!1),[ad,ac]=(0,r.useState)(!0),[ao,am]=(0,r.useState)(null),[ax,au]=(0,r.useState)(!1),[ah,ag]=(0,r.useState)(""),[ap,af]=(0,r.useState)("");(0,r.useRef)(null),(0,r.useRef)(null);let ab=(0,r.useRef)(null),[ay,aj]=(0,r.useState)(null),[av,aw]=(0,r.useState)("all"),[aN,ak]=(0,r.useState)("newest"),[aD,az]=(0,r.useState)(""),[aS,aC]=(0,r.useState)(!1),[aE,aT]=(0,r.useState)(0),[aA,aZ]=(0,r.useState)({}),[aP,aB]=(0,r.useState)(!1),[a$,aI]=(0,r.useState)([]),[aF,aR]=(0,r.useState)(null),[aM,aO]=(0,r.useState)([]),[aV,aK]=(0,r.useState)(""),[aG,aU]=(0,r.useState)(!1),[aL,aH]=(0,r.useState)(null),[aq,a_]=(0,r.useState)(!1),[aY,aJ]=(0,r.useState)({totalMessages:0,readMessages:0,unreadMessages:0}),aW=(0,r.useRef)(null),aX=(0,r.useRef)(0),[aQ,a0]=(0,r.useState)("direct"),[a1,a5]=(0,r.useState)([]),[a2,a4]=(0,r.useState)(null),[a3,a8]=(0,r.useState)([]),[a6,a7]=(0,r.useState)(!1),[a9,te]=(0,r.useState)(""),[ta,tt]=(0,r.useState)(""),[ts,tr]=(0,r.useState)([]),[ti,tl]=(0,r.useState)([]),[tn,td]=(0,r.useState)(!1),[tc,to]=(0,r.useState)(!1),[tm,tx]=(0,r.useState)(""),[tu,th]=(0,r.useState)(!1),[tg,tp]=(0,r.useState)(!1),tf=(0,r.useRef)(null),[tb,ty]=(0,r.useState)(!1),[tj,tv]=(0,r.useState)(!1),[tw,tN]=(0,r.useState)(null),[tk,tD]=(0,r.useState)(null),[tz,tS]=(0,r.useState)(!1),[tC,tE]=(0,r.useState)(!1),tT=(0,r.useRef)(null),tA=(0,r.useRef)(null),tZ=(0,r.useRef)(null),tP=(0,r.useRef)(null),[tB,t$]=(0,r.useState)(null),[tI,tF]=(0,r.useState)(null),tR={y√ºzler:["\uD83D\uDE00","\uD83D\uDE0A","\uD83D\uDE04","\uD83D\uDE01","\uD83D\uDE06","\uD83E\uDD70","\uD83D\uDE0D","\uD83E\uDD29","\uD83D\uDE18","\uD83D\uDE17","\uD83D\uDE1A","\uD83D\uDE0B","\uD83D\uDE1C","\uD83E\uDD2A","\uD83D\uDE1D","\uD83E\uDD17","\uD83E\uDD2D","\uD83E\uDD2B","\uD83E\uDD14","\uD83D\uDE0F"],eller:["\uD83D\uDC4D","\uD83D\uDC4E","\uD83D\uDC4F","\uD83D\uDE4C","\uD83E\uDD1D","\uD83E\uDD32","‚úåÔ∏è","\uD83E\uDD1E","\uD83E\uDD1F","\uD83E\uDD18","\uD83D\uDC4C","\uD83E\uDD0C","\uD83D\uDC4B","\uD83D\uDD90Ô∏è","‚úã","\uD83D\uDC4A"],kalpler:["‚ù§Ô∏è","\uD83E\uDDE1","\uD83D\uDC9B","\uD83D\uDC9A","\uD83D\uDC99","\uD83D\uDC9C","\uD83D\uDDA4","\uD83E\uDD0D","\uD83D\uDC95","\uD83D\uDC9E","\uD83D\uDC93","\uD83D\uDC97","\uD83D\uDC96","\uD83D\uDC98","\uD83D\uDC9D","\uD83D\uDC9F"],nesneler:["\uD83D\uDCE6","\uD83C\uDF81","\uD83C\uDFF7Ô∏è","\uD83D\uDCB0","\uD83D\uDCB5","\uD83D\uDED2","\uD83D\uDECDÔ∏è","\uD83D\uDCF1","\uD83D\uDCBB","‚åö","\uD83D\uDCF7","\uD83C\uDFAE","\uD83D\uDE97","\uD83C\uDFE0","\uD83D\uDD11","‚ú®"],semboller:["‚úÖ","‚ùå","‚ö†Ô∏è","‚ùì","‚ùó","\uD83D\uDCAF","\uD83C\uDD97","\uD83C\uDD95","\uD83C\uDD93","\uD83D\uDCCD","\uD83D\uDD14","\uD83D\uDCAC","\uD83D\uDCDD","\uD83D\uDCCC","\uD83D\uDD17","‚è∞"]},[tM,tO]=(0,r.useState)(null),[tV,tK]=(0,r.useState)(null),[tG,tU]=(0,r.useState)(null),[tL,tH]=(0,r.useState)(null),[tq,t_]=(0,r.useState)(null),[tY,tJ]=(0,r.useState)([]),[tW,tX]=(0,r.useState)(!1),[tQ,t0]=(0,r.useState)(null),t1=(0,r.useRef)(null),[t5,t2]=(0,r.useState)(!1),[t4,t3]=(0,r.useState)(!1),[t8,t6]=(0,r.useState)(null),t7=(0,r.useRef)(null),t9=(0,r.useRef)(null),[se,sa]=(0,r.useState)(!1),[st,ss]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[sr,si]=(0,r.useState)(!1),[sl,sn]=(0,r.useState)(!1),[sd,sc]=(0,r.useState)(!1),[so,sm]=(0,r.useState)(""),[sx,su]=(0,r.useState)(""),[sh,sg]=(0,r.useState)(!1),[sp,sf]=(0,r.useState)(null),[sb,sy]=(0,r.useState)(!1),sj=async()=>{sy(!0);try{let e=await fetch("/api/profile/valor-history");e.ok&&sf(await e.json())}catch{}sy(!1)},sv=async()=>{try{let[e,a]=await Promise.all([fetch("/api/swap-requests?type=received"),fetch("/api/swap-requests?type=sent")]),t=[];if(e.ok){let a=await e.json(),s=Array.isArray(a)?a:a.requests||[];s.filter(e=>"price_agreed"===e.negotiationStatus&&"pending"===e.status).slice(0,3).forEach(e=>{t.push({id:`price-agreed-owner-${e.id}`,type:"swap",title:"Fiyat Anla≈üƒ±ldƒ±! \uD83E\uDD1D",message:`${e.product?.title} i\xe7in ${e.agreedPriceRequester||e.agreedPriceOwner} Valor'da anla≈ütƒ±nƒ±z. Takasƒ± onaylayabilirsiniz.`,read:!1,createdAt:e.priceAgreedAt||e.updatedAt||e.createdAt,swapId:e.id,link:"/profil?tab=swaps"})}),s.filter(e=>"price_proposed"===e.negotiationStatus&&e.agreedPriceRequester&&!e.agreedPriceOwner).slice(0,3).forEach(e=>{t.push({id:`price-proposed-owner-${e.id}`,type:"offer",title:"Fiyat Teklifi Geldi \uD83D\uDCB0",message:`${e.product?.title} i\xe7in alƒ±cƒ± ${e.agreedPriceRequester} Valor teklif etti.`,read:!1,createdAt:e.updatedAt||e.createdAt,swapId:e.id,link:"/profil?tab=swaps"})}),s.filter(e=>"pending"===e.status&&!e.negotiationStatus).slice(0,5).forEach(e=>{t.push({id:`offer-${e.id}`,type:"offer",title:"Yeni Teklif!",message:`${e.product?.title||"\xdcr\xfcn"} \xfcr\xfcn\xfcn\xfcz i\xe7in yeni bir teklif aldƒ±nƒ±z.`,read:!1,createdAt:e.createdAt,swapId:e.id,link:"/profil?tab=swaps"})}),s.filter(e=>"awaiting_delivery"===e.status).slice(0,3).forEach(e=>{t.push({id:`delivery-${e.id}`,type:"swap",title:"Teslimat Bekliyor \uD83D\uDCE6",message:`${e.product?.title} i\xe7in alƒ±cƒ± teslimatƒ± bekliyor.`,read:!1,createdAt:e.updatedAt||e.createdAt,swapId:e.id,link:"/profil?tab=swaps"})}),s.filter(e=>"delivered"===e.status).slice(0,3).forEach(e=>{t.push({id:`confirm-${e.id}`,type:"swap",title:"Onay Bekliyor ‚úÖ",message:`${e.product?.title} teslim edildi. Alƒ±cƒ±nƒ±n onayƒ± bekleniyor.`,read:!1,createdAt:e.deliveredAt||e.createdAt,swapId:e.id,link:"/profil?tab=swaps"})})}if(a.ok){let e=await a.json(),s=Array.isArray(e)?e:e.requests||[];s.filter(e=>"price_agreed"===e.negotiationStatus&&"pending"===e.status).slice(0,3).forEach(e=>{t.push({id:`price-agreed-${e.id}`,type:"swap",title:"Fiyat Anla≈üƒ±ldƒ±! \uD83E\uDD1D",message:`${e.product?.title} i\xe7in ${e.agreedPriceRequester||e.agreedPriceOwner} Valor'da anla≈ütƒ±nƒ±z. Takasƒ± ba≈ülatabilirsiniz.`,read:!1,createdAt:e.priceAgreedAt||e.updatedAt||e.createdAt,swapId:e.id,link:"/profil?tab=swaps"})}),s.filter(e=>"price_proposed"===e.negotiationStatus&&e.agreedPriceOwner&&!e.agreedPriceRequester).slice(0,3).forEach(e=>{t.push({id:`price-proposed-${e.id}`,type:"offer",title:"Fiyat Teklifi Geldi \uD83D\uDCB0",message:`${e.product?.title} i\xe7in satƒ±cƒ± ${e.agreedPriceOwner} Valor teklif etti.`,read:!1,createdAt:e.updatedAt||e.createdAt,swapId:e.id,link:"/profil?tab=swaps"})}),s.filter(e=>"accepted"===e.status).slice(0,3).forEach(e=>{t.push({id:`accepted-${e.id}`,type:"swap",title:"Teklif Kabul Edildi! ‚úÖ",message:`${e.product?.title} i\xe7in teklifiniz kabul edildi.`,read:!1,createdAt:e.updatedAt||e.createdAt,link:"/profil?tab=swaps"})}),s.filter(e=>"awaiting_delivery"===e.status&&e.qrCode).slice(0,3).forEach(e=>{t.push({id:`qr-ready-${e.id}`,type:"swap",title:"QR Kod Hazƒ±r \uD83D\uDCF1",message:`${e.product?.title} i\xe7in QR kodu hazƒ±r. \xdcr\xfcn\xfc teslim almak i\xe7in tarayƒ±n.`,read:!1,createdAt:e.qrCodeGeneratedAt||e.createdAt,link:"/profil?tab=swaps"})}),s.filter(e=>"completed"===e.status).slice(0,2).forEach(e=>{t.push({id:`complete-${e.id}`,type:"swap",title:"Takas Tamamlandƒ± \uD83C\uDF89",message:`${e.product?.title} takasƒ± ba≈üarƒ±yla tamamlandƒ±.`,read:!0,createdAt:e.updatedAt||e.createdAt,link:"/profil?tab=swaps"})}),s.filter(e=>"rejected"===e.status).slice(0,2).forEach(e=>{t.push({id:`rejected-${e.id}`,type:"system",title:"Teklif Reddedildi ‚ùå",message:`${e.product?.title} i\xe7in teklifiniz reddedildi.`,read:!0,createdAt:e.updatedAt||e.createdAt,link:"/profil?tab=offers"})})}eu&&eu.trustScore<100&&t.push({id:"profile-complete",type:"system",title:"Profil Tamamlama",message:"Profilinizi tamamlayarak g\xfcven puanƒ±nƒ±zƒ± artƒ±rƒ±n.",read:!1,createdAt:new Date(Date.now()-1728e5).toISOString(),action:()=>{let e=document.querySelector('[data-tab="profile"]');e&&e.click()}}),eu&&!localStorage.getItem("welcomeBonusShown")&&(t.push({id:"welcome-bonus",type:"campaign",title:"\uD83D\uDC4B Ho≈ü Geldiniz!",message:"ƒ∞lk Valor'unuz hesabƒ±nƒ±za eklendi! Takas yaptƒ±k\xe7a daha \xe7ok bonus kazanacaksƒ±nƒ±z. Seviyeniz arttƒ±k\xe7a bonuslarƒ±nƒ±z da artar!",read:!0,createdAt:eu.createdAt||new Date(Date.now()-864e5).toISOString()}),localStorage.setItem("welcomeBonusShown","true")),t.sort((e,a)=>new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime()),tJ(t.slice(0,15))}catch(e){console.error("Notifications fetch error:",e)}},sw=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if("loading"!==a){if("unauthenticated"===a){t.replace("/giris");return}"authenticated"!==a||sw.current||(sw.current=!0,eb(!1),sZ(),sP(),sv(),sB())}},[a]),(0,r.useEffect)(()=>{eu&&sv()},[eu?.trustScore]),(0,r.useEffect)(()=>{let e=e=>{tT.current&&!tT.current.contains(e.target)&&ty(!1),tA.current&&!tA.current.contains(e.target)&&tv(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let sN=e=>{aK(a=>a+e)},sk=e=>{tx(a=>a+e)},sD=async e=>{let a=e.target.files?.[0];if(!a)return;if(a.size>5242880){eO({message:"Dosya boyutu 5MB'dan k\xfc\xe7\xfck olmalƒ±dƒ±r",type:"error"});return}if(!a.type.startsWith("image/")){eO({message:"Sadece resim dosyalarƒ± y\xfcklenebilir",type:"error"});return}tS(!0);let t=new FileReader;t.onload=()=>{tN(t.result),tS(!1)},t.readAsDataURL(a)},sz=async e=>{let a=e.target.files?.[0];if(!a)return;if(a.size>5242880){eO({message:"Dosya boyutu 5MB'dan k\xfc\xe7\xfck olmalƒ±dƒ±r",type:"error"});return}if(!a.type.startsWith("image/")){eO({message:"Sadece resim dosyalarƒ± y\xfcklenebilir",type:"error"});return}tE(!0);let t=new FileReader;t.onload=()=>{tD(t.result),tE(!1)},t.readAsDataURL(a)};(0,r.useEffect)(()=>()=>{ay&&ay.getTracks().forEach(e=>e.stop())},[ay]);let sS=async()=>{console.log("[ProfileCamera] Kamera a\xe7ƒ±lƒ±yor..."),t2(!1),t3(!0);try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:640}},audio:!1});console.log("[ProfileCamera] Kamera stream alƒ±ndƒ±"),t6(e),setTimeout(()=>{t7.current&&(t7.current.srcObject=e,t7.current.play().catch(console.error),console.log("[ProfileCamera] Video ba≈ülatƒ±ldƒ±"))},100)}catch(e){console.error("[ProfileCamera] Kamera hatasƒ±:",e),eO({message:"Kamera a\xe7ƒ±lamadƒ±. ƒ∞zin verildiƒüinden emin olun.",type:"error"}),t3(!1)}},sC=()=>{console.log("[ProfileCamera] Kamera kapatƒ±lƒ±yor..."),t8&&(t8.getTracks().forEach(e=>e.stop()),t6(null)),t3(!1),t0(null)},sE=async()=>{if(tQ){tX(!0);try{let e=await fetch("/api/profile/photo",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64Image:tQ,fileName:`profile-camera-${Date.now()}.jpg`,contentType:"image/jpeg"})});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.error||"Fotoƒüraf y\xfcklenemedi")}let{imageUrl:a}=await e.json();eh(e=>e?{...e,image:a}:null),eO({message:"Profil fotoƒürafƒ± g\xfcncellendi!",type:"success"}),sC()}catch(e){eO({message:e.message||"Fotoƒüraf y\xfcklenemedi",type:"error"})}finally{tX(!1)}}},sT=async e=>{let a=e.target.files?.[0];if(a){if(a.size>5242880){eO({message:"Fotoƒüraf 5MB'dan k\xfc\xe7\xfck olmalƒ±",type:"error"});return}if(!a.type.startsWith("image/")){eO({message:"Sadece resim dosyalarƒ± y\xfcklenebilir",type:"error"});return}tX(!0),t2(!1);try{let e=new FileReader,t=await new Promise((t,s)=>{e.onload=()=>t(e.result),e.onerror=()=>s(Error("Dosya okunamadƒ±")),e.readAsDataURL(a)}),s=await fetch("/api/profile/photo",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64Image:t,fileName:a.name,contentType:a.type})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||"Fotoƒüraf y\xfcklenemedi")}let{imageUrl:r}=await s.json();eh(e=>e?{...e,image:r}:null),t0(null),eO({message:"Profil fotoƒürafƒ± g\xfcncellendi!",type:"success"})}catch(e){eO({message:e.message||"Fotoƒüraf y\xfcklenemedi",type:"error"})}finally{tX(!1),t1.current&&(t1.current.value="")}}},sA=async e=>{if(e.preventDefault(),sm(""),su(""),!st.currentPassword||!st.newPassword||!st.confirmPassword){sm("T\xfcm alanlarƒ± doldurun");return}if(st.newPassword!==st.confirmPassword){sm("Yeni ≈üifreler e≈üle≈ümiyor");return}if(st.newPassword.length<8){sm("≈ûifre en az 8 karakter olmalƒ±dƒ±r");return}try{sc(!0);let e=await fetch("/api/profile/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(st)}),a=await e.json();if(!e.ok){sm(a.error||"≈ûifre deƒüi≈ütirilemedi");return}su("≈ûifreniz ba≈üarƒ±yla g\xfcncellendi"),ss({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{sa(!1),su("")},2e3)}catch(e){sm("Bir hata olu≈ütu")}finally{sc(!1)}},sZ=async()=>{if((0,em.s9)()){eO({message:"ƒ∞nternet baƒülantƒ±nƒ±z yok",type:"error"}),eb(!1);return}try{let{data:e,ok:a,error:t}=await (0,em.DV)("/api/profile",{timeout:15e3});a&&e?(eh(e),eB({name:e.name||"",nickname:e.nickname||"",bio:e.bio||"",phone:e.phone||"",location:e.location||""}),e.surveyData&&aZ(e.surveyData),e.nickname||sessionStorage.getItem("nicknamePromptDismissed")||eI(!0)):t&&console.error("Profil y\xfcklenemedi:",t);let s=await (0,em.DV)("/api/valor/status",{timeout:1e4});s.ok&&s.data&&(am(s.data),s.data.productValueStatus?.hasQualifiedProduct||sessionStorage.getItem("productValueWarningDismissed")||au(!0))}catch(e){console.error("Profil y\xfcklenemedi:",e)}finally{eb(!1)}},sP=async()=>{try{let e=await fetch("/api/products?mine=true&all=true");if(e.ok){let a=await e.json();ep(a.products||[])}}catch(e){console.error("\xdcr\xfcnler y\xfcklenemedi:",e)}},sB=async()=>{try{let e=await fetch("/api/products/boost");if(e.ok){let a=await e.json();tF(a)}}catch(e){console.error("Boost info y\xfcklenemedi:",e)}},s$=async e=>{if(tI){t$(e);try{let a=await fetch("/api/products/boost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})}),t=await a.json();a.ok?(eO({message:t.message,type:"success"}),sP(),sZ(),sB()):eO({message:t.error,type:"error"})}catch(e){eO({message:"Bir hata olu≈ütu",type:"error"})}t$(null)}},sI=async(e,a)=>{eK(e),eU(null);try{let t="active"===a?"unpublish":"publish",s=await fetch(`/api/products/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t})}),r=await s.json();s.ok?(ep(a=>a.map(a=>a.id===e?{...a,status:"publish"===t?"active":"inactive"}:a)),eO({message:r.message,type:"success"})):eO({message:r.error||"Bir hata olu≈ütu",type:"error"})}catch(e){console.error("Product status update error:",e),eO({message:"Bir hata olu≈ütu",type:"error"})}finally{eK(null),setTimeout(()=>eO(null),3e3)}},sF=async()=>{try{let e=await fetch("/api/valor?action=bonus_status");if(e.ok){let a=await e.json();tO(a)}let a=await fetch("/api/valor?action=user_level");if(a.ok){let e=await a.json();t_(e)}}catch(e){console.error("Bonus durumu y\xfcklenemedi:",e)}},sR=async()=>{try{let e=await fetch("/api/valor?action=achievements");if(e.ok){let a=await e.json();tK(a)}}catch(e){console.error("Ba≈üarƒ±lar y\xfcklenemedi:",e)}},sM=async()=>{tU("daily"),tH(null);try{let e=await fetch("/api/valor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"claim_daily_bonus"})}),a=await e.json();e.ok?(tH({type:"success",text:`üéâ +${a.bonus} Valor! ${a.nextLevelInfo||""}`}),sF(),sZ()):tH({type:"error",text:a.error})}catch(e){tH({type:"error",text:"Bir hata olu≈ütu"})}finally{tU(null)}},sO=async e=>{tU(e),tH(null);try{let a=await fetch("/api/valor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"claim_achievement",achievementId:e})}),t=await a.json();a.ok?(tH({type:"success",text:`üèÜ ${t.message} +${t.bonus} Valor!`}),sR(),sZ()):tH({type:"error",text:t.error})}catch(e){tH({type:"error",text:"Bir hata olu≈ütu"})}finally{tU(null)}},sV=async()=>{if(!(0,em.s9)()){a_(!0);try{let{data:e,ok:a,error:t}=await (0,em.DV)("/api/messages",{timeout:12e3});if(a&&e){let a=e.conversations||e||[];aI(Array.isArray(a)?a:[]);let t=e.stats||{totalMessages:0,readMessages:0,unreadMessages:0};t.unreadMessages>aX.current&&aX.current>0&&(0,ev.hh)(),aX.current=t.unreadMessages,aJ(t)}else t&&console.error("Konu≈ümalar y\xfcklenemedi:",t)}catch(e){console.error("Konu≈ümalar y\xfcklenemedi:",e)}finally{a_(!1)}}},sK=async()=>{try{let e=await fetch("/api/messages/groups");if(e.ok){let a=await e.json();a5(a||[])}}catch(e){console.error("Grup konu≈ümalarƒ± y\xfcklenemedi:",e)}},sG=async e=>{th(!0);try{let a=await fetch(`/api/messages/groups/${e}`);if(a.ok){let e=await a.json();a8(e.messages||[]),a4(a=>({...a,members:e.group?.members||a?.members})),setTimeout(()=>{tf.current?.scrollIntoView({behavior:"smooth"})},100)}}catch(e){console.error("Grup mesajlarƒ± y\xfcklenemedi:",e)}finally{th(!1)}},sU=async()=>{if((tm.trim()||tk)&&a2&&!tg){tp(!0);try{let e=tm.trim();tk&&(e=`[IMAGE]${tk}[/IMAGE]${e?"\n"+e:""}`);let a=await fetch(`/api/messages/groups/${a2.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})});if(a.ok){let e=await a.json();a8(a=>[...a,e]),tx(""),tD(null),tP.current&&(tP.current.value=""),window.dispatchEvent(new CustomEvent("messageSent")),setTimeout(()=>{tf.current?.scrollIntoView({behavior:"smooth"})},100)}}catch(e){console.error("Grup mesajƒ± g\xf6nderilemedi:",e)}finally{tp(!1)}}},sL=e=>{a4(e),sG(e.id)},sH=async(e,a)=>{a_(!0);try{let t=a?`/api/messages?userId=${e}&productId=${a}`:`/api/messages?userId=${e}&productId=general`,s=await fetch(t);if(s.ok){let e=await s.json();aO(e),setTimeout(()=>{aW.current?.scrollIntoView({behavior:"smooth"})},100)}}catch(e){console.error("Mesajlar y\xfcklenemedi:",e)}finally{a_(!1)}},sq=async()=>{if((aV.trim()||tw)&&aF&&!aG){aU(!0),aH(null);try{let e=aV.trim();tw&&(e=`[IMAGE]${tw}[/IMAGE]${e?"\n"+e:""}`);let a=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:aF.otherUser.id,content:e,productId:aF.product?.id})}),t=await a.json();if(!a.ok){if(t.blocked||t.suspended){aH(t.error);return}throw Error(t.error)}t.warning&&aH(t.warning),aO(e=>[...e,t]),aK(""),tN(null),tZ.current&&(tZ.current.value=""),window.dispatchEvent(new CustomEvent("messageSent")),setTimeout(()=>{aW.current?.scrollIntoView({behavior:"smooth"})},100)}catch(e){console.error("Mesaj g\xf6nderilemedi:",e),aH("Mesaj g\xf6nderilirken bir hata olu≈ütu.")}finally{aU(!1)}}},s_=e=>{aR(e),aH(null),sH(e.otherUser.id,e.product?.id||null)};(0,r.useEffect)(()=>{"messages"===ei&&"authenticated"===a&&eu&&(sV(),sK())},[ei,a,eu]),(0,r.useEffect)(()=>{"valor"===ei&&"authenticated"===a&&(sF(),sR(),sj())},[ei,a]),(0,r.useEffect)(()=>{let e=()=>{eG&&eU(null)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[eG]);let sY=async()=>{eR(!0);try{let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(eP)});if(e.ok){let a=await e.json();eh(e=>e?{...e,...a}:e),eZ(!1)}}catch(e){console.error("Profil g\xfcncellenemedi:",e)}finally{eR(!1)}},sJ=(e,a,t)=>{aZ(s=>{if(!t)return{...s,[e]:a};{let t=s[e]||[];return t.includes(a)?{...s,[e]:t.filter(e=>e!==a)}:{...s,[e]:[...t,a]}}})},sW=async()=>{aB(!0);try{let e=await fetch("/api/profile/survey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({surveyData:aA})});if(e.ok){let a=await e.json();eh(e=>e?{...e,surveyCompleted:!0,surveyData:aA,valorBalance:e.valorBalance+(a.bonus||0)}:e),a.bonus>0&&alert(a.message||`üéâ ${a.bonus} Valor anket bonusu kazandƒ±nƒ±z!`),ex("products")}}catch(e){console.error("Anket g\xf6nderilemedi:",e)}finally{aB(!1)}},sX=eg.filter(e=>"active"===av?"active"===e.status:"inactive"===av?"inactive"===e.status:"pending"!==av||"pending"===e.status).filter(e=>!aD||e.title.toLowerCase().includes(aD.toLowerCase())).sort((e,a)=>{switch(aN){case"oldest":return new Date(e.createdAt).getTime()-new Date(a.createdAt).getTime();case"valor-high":return a.valorPrice-e.valorPrice;case"valor-low":return e.valorPrice-a.valorPrice;case"views":return a.views-e.views;default:return new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime()}});if(tY.filter(e=>!e.read).length,"loading"===a||ef)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-frozen-500"})});if(!eu)return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Profil y\xfcklenemedi"}),(0,s.jsx)(Q.z,{onClick:()=>{eb(!0),e?.user?.email?sZ():t.push("/giris")},className:"bg-purple-600 hover:bg-purple-700",children:"Tekrar Dene"})]});aY.unreadMessages;let sQ=[{id:"products",label:"\xdcr\xfcnlerim",icon:u.Z},{id:"favorites",label:"Favorilerim",icon:h.Z},{id:"badges",label:"Rozetlerim",icon:g.Z},{id:"reviews",label:"Deƒüerlendirmeler",icon:p.Z},{id:"valor",label:"Valor",icon:f.Z},{id:"survey",label:"Anket",icon:b.Z,showBadge:!eu.surveyCompleted}];return(0,s.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pt-24 pb-12",children:[(0,s.jsx)(d.M,{children:eM&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`fixed top-20 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-xl shadow-lg flex items-center gap-3 ${"success"===eM.type?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:["success"===eM.type?(0,s.jsx)(y.Z,{className:"w-5 h-5"}):(0,s.jsx)(j.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:eM.message}),(0,s.jsx)("button",{onClick:()=>eO(null),className:"ml-2 p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,s.jsx)(v.Z,{className:"w-4 h-4"})})]})}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[e$&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-gradient-to-r from-frozen-50 to-blue-50 rounded-2xl border border-frozen-200 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-frozen-100 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(w.Z,{className:"w-5 h-5 text-frozen-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"\uD83C\uDFAD Takma Ad Kullanmak ƒ∞ster misiniz?"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:['Gizliliƒüinizi korumak i\xe7in platformda ger\xe7ek adƒ±nƒ±z yerine bir takma ad g\xf6sterebilirsiniz. ≈ûu anda adƒ±nƒ±z "',eu?.name,'" olarak g\xf6r\xfcn\xfcyor.']}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(Q.z,{size:"sm",onClick:()=>{eZ(!0),eI(!1),sessionStorage.setItem("nicknamePromptDismissed","true")},className:"bg-frozen-500 hover:bg-frozen-600",children:"Takma Ad Ekle"}),(0,s.jsx)(Q.z,{variant:"outline",size:"sm",onClick:()=>{eI(!1),sessionStorage.setItem("nicknamePromptDismissed","true")},children:"Daha Sonra"})]})]}),(0,s.jsx)("button",{onClick:()=>{eI(!1),sessionStorage.setItem("nicknamePromptDismissed","true")},className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(v.Z,{className:"w-5 h-5"})})]})}),(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-4",children:[(0,s.jsx)("div",{className:"h-20 gradient-frozen"}),(0,s.jsxs)("div",{className:"px-4 pb-4 -mt-10",children:[(0,s.jsxs)("div",{className:"flex items-end gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,s.jsx)("button",{type:"button",onClick:()=>!tW&&t2(!0),disabled:tW,className:"w-20 h-20 rounded-full border-4 border-white shadow-lg overflow-hidden bg-gray-200 cursor-pointer hover:opacity-90 transition-opacity",children:tW?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-frozen-100",children:(0,s.jsx)(x.Z,{className:"w-8 h-8 text-frozen-600 animate-spin"})}):tQ?(0,s.jsx)("img",{src:tQ,alt:"\xd6nizleme",className:"w-full h-full object-cover"}):eu.image?(0,s.jsx)(o.default,{src:eu.image,alt:eu.name||"",width:80,height:80,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-frozen-100",children:(0,s.jsx)(w.Z,{className:"w-10 h-10 text-frozen-400"})})}),(0,s.jsx)("input",{type:"file",ref:t1,onChange:sT,accept:"image/jpeg,image/png,image/webp",className:"hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 pb-1",children:[(0,s.jsx)("h1",{className:"text-lg font-bold text-gray-800 truncate",children:eu.nickname||eu.name}),eu.nickname&&(0,s.jsx)("p",{className:"text-xs text-gray-400 truncate",children:eu.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:eu.email})]}),(0,s.jsxs)("div",{className:"flex gap-2 pb-1",children:[(0,s.jsxs)("button",{onClick:()=>{sg(!0),sj()},className:"text-center px-3 py-1.5 bg-frozen-50 rounded-xl hover:bg-frozen-100 transition-colors cursor-pointer",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-frozen-600",children:eu.valorBalance-(eu.lockedValor||0)}),(0,s.jsx)("div",{className:"text-[10px] text-gray-500",children:"Valor"}),eu.lockedValor>0&&(0,s.jsxs)("div",{className:"text-[9px] text-amber-600",children:["(",eu.lockedValor," kilitli)"]})]}),(0,s.jsxs)("div",{className:`text-center px-3 py-1.5 rounded-xl ${eu.trustScore<30?"bg-red-50 dark:bg-red-900/20":eu.trustScore<60?"bg-orange-50 dark:bg-orange-900/20":eu.trustScore<80?"bg-yellow-50 dark:bg-yellow-900/20":"bg-green-50 dark:bg-green-900/20"}`,children:[(0,s.jsx)("div",{className:`text-lg font-bold ${eu.trustScore<30?"text-red-600":eu.trustScore<60?"text-orange-600":eu.trustScore<80?"text-yellow-600":"text-green-600"}`,children:eu.trustScore}),(0,s.jsx)("div",{className:"text-[10px] text-gray-500",children:"G\xfcven"})]})]})]}),eu.trustScore<80&&(0,s.jsx)("div",{className:`p-3 rounded-xl border mt-3 ${eu.trustScore<30?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":eu.trustScore<60?"bg-orange-50 dark:bg-orange-900/20 border-orange-300 dark:border-orange-700":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-700"}`,children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:eu.trustScore<30?"\uD83D\uDEAB":eu.trustScore<60?"\uD83D\uDD34":"‚ö†Ô∏è"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["G\xfcven Puanƒ±: ",eu.trustScore,"/100"]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-0.5",children:eu.trustScore<30?"Hesabƒ±nƒ±z askƒ±da. Destek ile ileti≈üime ge\xe7in.":eu.trustScore<60?"G\xfcven puanƒ±nƒ±z kritik. G\xfcnl\xfck takas limitiniz kƒ±sƒ±tlandƒ±.":"G\xfcven puanƒ±nƒ±z d\xfc≈ü\xfck. Ba≈üarƒ±lƒ± takaslarla geri kazanabilirsiniz."}),(0,s.jsx)("div",{className:"mt-2 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:`h-full rounded-full transition-all ${eu.trustScore<30?"bg-red-500":eu.trustScore<60?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${eu.trustScore}%`}})})]})]})}),(0,s.jsxs)("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[(0,s.jsxs)("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium ${eu.isPhoneVerified?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,children:[(0,s.jsx)(N.Z,{className:"w-3.5 h-3.5"}),eu.isPhoneVerified?"Telefon ‚úì":"Telefon"]}),(0,s.jsxs)("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium ${eu.isIdentityVerified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[(0,s.jsx)(k.Z,{className:"w-3.5 h-3.5"}),eu.isIdentityVerified?"Kimlik ‚úì":"Kimlik"]}),(0,s.jsxs)("button",{onClick:()=>eZ(!eA),className:"ml-auto flex items-center gap-1 text-xs text-frozen-600 hover:text-frozen-700 font-medium",children:[(0,s.jsx)(D.Z,{className:"w-3.5 h-3.5"}),eA?"Kapat":"D\xfczenle"]})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,s.jsx)(ey,{shareType:"profile",title:`${eu.nickname||eu.name} TAKAS-A'da!`,description:"Benimle takas yapmak ister misin? TAKAS-A'da binlerce \xfcr\xfcn seni bekliyor!",url:`https://takas-a.com/profil?user=${eu.id}`})}),(0,s.jsx)(d.M,{children:eA&&(0,s.jsx)(c.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t overflow-hidden",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Ad Soyad"}),(0,s.jsx)(ee.I,{value:eP.name,onChange:e=>eB(a=>({...a,name:e.target.value})),placeholder:"Adƒ±nƒ±z Soyadƒ±nƒ±z",className:"h-9 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Takma Ad"}),(0,s.jsx)(ee.I,{value:eP.nickname,onChange:e=>eB(a=>({...a,nickname:e.target.value})),placeholder:"\xd6rn: SwapMaster",maxLength:20,className:"h-9 text-sm"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Hakkƒ±mda"}),(0,s.jsx)(ea.g,{value:eP.bio,onChange:e=>eB(a=>({...a,bio:e.target.value})),placeholder:"Kendinizi kƒ±saca tanƒ±tƒ±n...",rows:2,className:"text-sm"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Telefon"}),(0,s.jsx)(ee.I,{value:eP.phone,onChange:e=>eB(a=>({...a,phone:e.target.value})),placeholder:"05XX XXX XX XX",className:"h-9 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Konum"}),(0,s.jsx)(ee.I,{value:eP.location,onChange:e=>eB(a=>({...a,location:e.target.value})),placeholder:"≈ûehir, ƒ∞l\xe7e",className:"h-9 text-sm"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[(0,s.jsxs)(Q.z,{onClick:sY,size:"sm",disabled:eF,className:"bg-frozen-500 hover:bg-frozen-600",children:[(0,s.jsx)(z.Z,{className:"w-4 h-4 mr-1"}),eF?"Kaydediliyor...":"Kaydet"]}),(0,s.jsxs)(Q.z,{onClick:()=>eZ(!1),variant:"outline",size:"sm",className:"border-gray-300 text-gray-700 hover:bg-gray-100",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),"ƒ∞ptal"]}),(0,s.jsxs)(Q.z,{onClick:()=>sa(!0),variant:"outline",size:"sm",className:"border-amber-300 text-amber-700 hover:bg-amber-50",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 mr-1"}),"≈ûifre Deƒüi≈ütir"]})]}),!eu.isIdentityVerified&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 text-blue-600"}),"Kimlik Doƒürulama"]}),(0,s.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-2",children:"tr"===et?"Kimlik belgenizin \xf6n y\xfcz\xfcn\xfcn net bir fotoƒürafƒ±nƒ± y\xfckleyin. AI ile otomatik doƒürulama yapƒ±lacaktƒ±r.":"Upload a clear photo of the front of your ID document. AI will automatically verify it."}),(0,s.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mb-3",children:["‚úì ","tr"===et?"Kabul edilen belgeler":"Accepted documents",":","tr"===et?" Kimlik kartƒ±, Pasaport, Ehliyet, Oturma izni":" ID Card, Passport, Driver's License, Residence Permit"]}),ah&&(0,s.jsx)("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-xs",children:ah}),ap&&(0,s.jsx)("div",{className:"mb-3 p-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-xs",children:ap}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(Q.z,{onClick:()=>alert("Kamera doƒürulama \xf6zelliƒüi yakƒ±nda aktif olacak!"),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(S.Z,{className:"w-4 h-4 mr-1"}),"Kamera A\xe7"]}),(0,s.jsxs)(Q.z,{size:"sm",variant:"outline",className:"border-gray-400 text-gray-800 bg-white hover:bg-gray-100 dark:border-gray-500 dark:text-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600",onClick:()=>ab.current?.click(),disabled:ef,children:[(0,s.jsx)(C.Z,{className:"w-4 h-4 mr-1"}),ef?"Y\xfckleniyor...":"Dosya Y\xfckle"]}),(0,s.jsx)("input",{ref:ab,type:"file",accept:"image/*",className:"hidden",onChange:async e=>{let a=e.target.files?.[0];if(a){ag(""),af(""),eb(!0);try{let e=new FormData;e.append("image",a);let t=await fetch("/api/verify-identity",{method:"POST",body:e}),s=await t.json();t.ok&&s.success?(af(s.message||"Kimliƒüiniz ba≈üarƒ±yla doƒürulandƒ±!"),eh(e=>e?{...e,isIdentityVerified:!0,trustScore:Math.min(100,e.trustScore+15)}:e)):ag(s.error||"Doƒürulama ba≈üarƒ±sƒ±z")}catch(e){console.error("Identity verification error:",e),ag("Bir hata olu≈ütu. L\xfctfen tekrar deneyin.")}finally{eb(!1),e.target.value=""}}}})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"\uD83D\uDCCB Kimlik bilgileriniz g\xfcvenli sunucularda ≈üifreli olarak saklanƒ±r ve sadece doƒürulama amacƒ±yla kullanƒ±lƒ±r."})]})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t dark:border-gray-700",children:(0,s.jsx)(ej.l,{})}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t dark:border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"w-4 h-4 text-blue-600"}),"Bildirim Ayarlarƒ±"]}),(0,s.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/40 dark:to-indigo-900/40 rounded-xl border border-blue-200 dark:border-blue-700 space-y-4",children:[(0,s.jsxs)("div",{className:"p-3 bg-white/80 dark:bg-gray-800/80 rounded-xl border border-blue-100 dark:border-blue-800",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${e8?"bg-green-500 animate-pulse":"bg-gray-400"}`}),(0,s.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Push Bildirim Durumu"})]}),(0,s.jsx)("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${e8?"bg-green-500 text-white":e3?"bg-yellow-500 text-white":"bg-gray-400 text-white"}`,children:e8?"‚úì Aktif":e3?"Devre Dƒ±≈üƒ±":"Desteklenmiyor"})]}),!e3&&(0,s.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-400 mb-2",children:"‚ö†Ô∏è Push bildirimleri i\xe7in uygulamayƒ± ana ekrana ekleyin (iOS 16.4+ veya Android)"}),e3&&!e8&&(0,s.jsx)(Q.z,{onClick:async()=>{try{await e7(),eO({message:"Push bildirimleri aktifle≈ütirildi!",type:"success"})}catch(e){console.error("Push subscription hatasƒ±:",e),eO({message:"Bildirim izni verilemedi",type:"error"})}},disabled:e6,size:"sm",className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold",children:e6?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Aktifle≈ütiriliyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.Z,{className:"w-4 h-4 mr-2"})," Push Bildirimlerini A\xe7"]})}),e8&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(Q.z,{onClick:async()=>{ai("testing");try{if((await fetch("/api/push/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"SYSTEM",data:{title:"\uD83D\uDD14 TAKAS-A Test",body:"Tebrikler! Push bildirimleri ba≈üarƒ±yla \xe7alƒ±≈üƒ±yor.",url:"/profil"}})})).ok)ai("success"),eO({message:"Test bildirimi g\xf6nderildi!",type:"success"});else throw Error("Sunucu hatasƒ±")}catch(e){console.error("Push test hatasƒ±:",e),ai("error"),eO({message:"Bildirim g\xf6nderilemedi",type:"error"})}setTimeout(()=>ai("idle"),3e3)},disabled:"testing"===ar,size:"sm",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold",children:"testing"===ar?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Test..."]}):"success"===ar?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-2"})," G\xf6nderildi!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.Z,{className:"w-4 h-4 mr-2"})," Test Et"]})}),(0,s.jsx)(Q.z,{onClick:async()=>{try{await e9(),eO({message:"Push bildirimleri kapatƒ±ldƒ±",type:"success"})}catch(e){console.error("Unsubscribe hatasƒ±:",e)}},disabled:e6,size:"sm",variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Kapat"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Mesaj Bildirimleri"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${!1!==eu.notificationsEnabled?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:!1!==eu.notificationsEnabled?"A\xe7ƒ±k":"Kapalƒ±"}),(0,s.jsx)(er,{checked:!1!==eu.notificationsEnabled,onCheckedChange:async e=>{try{await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationsEnabled:e})}),eh(a=>a?{...a,notificationsEnabled:e}:a)}catch(e){console.error("Bildirim ayarƒ± g\xfcncellenemedi:",e)}}})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Takas Bildirimleri"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${!1!==eu.swapNotificationsEnabled?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:!1!==eu.swapNotificationsEnabled?"A\xe7ƒ±k":"Kapalƒ±"}),(0,s.jsx)(er,{checked:!1!==eu.swapNotificationsEnabled,onCheckedChange:async e=>{try{await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({swapNotificationsEnabled:e})}),eh(a=>a?{...a,swapNotificationsEnabled:e}:a)}catch(e){console.error("Bildirim ayarƒ± g\xfcncellenemedi:",e)}}})]})]}),al&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs font-bold text-white",children:"3"})}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Uygulama ƒ∞konu Rozeti"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-9",children:"Ana ekrandaki uygulama ikonunun \xfczerinde okunmamƒ±≈ü bildirim sayƒ±sƒ±nƒ± g\xf6sterir"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${ad?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:ad?"A\xe7ƒ±k":"Kapalƒ±"}),(0,s.jsx)(er,{checked:ad,onCheckedChange:e=>{localStorage.setItem(ed,String(e)),e||eo(),ac(e)}})]})]}),(0,s.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300 text-center",children:"\uD83D\uDCA1 Push bildirimlerini aktifle≈ütirerek mesaj ve takas g\xfcncellemelerinden anƒ±nda haberdar olun"})]})]})]})})})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-sm mb-4 overflow-hidden",children:(0,s.jsx)("div",{className:"flex overflow-x-auto scrollbar-hide gap-0.5",children:[].map(e=>{let a=e.icon,t=ei===e.id,r=e.highlight;return(0,s.jsxs)("button",{"data-tab":e.id,onClick:()=>ex(e.id),className:`min-w-[72px] w-[72px] sm:min-w-[85px] sm:w-auto sm:flex-1 flex flex-col items-center gap-1 py-3 px-1 border-b-2 transition-all relative ${t?"border-frozen-500 text-frozen-600 bg-frozen-50/50":r?"border-transparent text-purple-600 hover:text-purple-700 hover:bg-purple-50 bg-purple-50/30":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[(0,s.jsx)("div",{className:`relative ${r&&!t?"animate-pulse":""}`,children:(0,s.jsx)(a,{className:`w-5 h-5 ${r&&!t?"text-purple-500":""}`})}),(0,s.jsx)("span",{className:`text-[9px] sm:text-xs font-medium text-center leading-tight ${r&&!t?"font-bold":""}`,children:e.label}),e.badge&&e.badge>0&&(0,s.jsx)("span",{className:"absolute top-1 right-1/4 w-4 h-4 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center",children:e.badge})]},e.id)})})}),(0,s.jsx)("div",{className:"flex gap-2 mb-4 bg-white rounded-xl p-1.5 shadow-sm overflow-x-auto scrollbar-hide",children:sQ.map(e=>{let a=e.icon,t=ei===e.id;return(0,s.jsxs)("button",{"data-tab":e.id,onClick:()=>ex(e.id),className:`flex items-center justify-center gap-1.5 py-2.5 px-3 rounded-lg font-medium transition-all relative text-xs sm:text-sm whitespace-nowrap min-w-fit ${t?"gradient-frozen text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)(a,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{children:e.label}),e.showBadge&&(0,s.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]},e.id)})}),(0,s.jsxs)(d.M,{mode:"wait",children:["messages"===ei&&eu&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-4 p-1 flex gap-1",children:[(0,s.jsxs)("button",{onClick:()=>a0("direct"),className:`flex-1 py-2.5 px-4 rounded-lg font-medium text-sm transition-all flex items-center justify-center gap-2 ${"direct"===aQ?"gradient-frozen text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)(T.Z,{className:"w-4 h-4"}),"Mesajlar",aY.unreadMessages>0&&(0,s.jsx)("span",{className:"ml-1 w-5 h-5 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center",children:aY.unreadMessages})]}),(0,s.jsxs)("button",{onClick:()=>a0("group"),className:`flex-1 py-2.5 px-4 rounded-lg font-medium text-sm transition-all flex items-center justify-center gap-2 relative ${"group"===aQ?"gradient-frozen text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)(Z.Z,{className:"w-4 h-4"}),"\xc7oklu Mesaj"]}),(0,s.jsx)("button",{onClick:()=>a7(!0),className:"w-10 h-10 rounded-lg bg-gradient-to-r from-orange-500 to-amber-500 text-white flex items-center justify-center hover:from-orange-600 hover:to-amber-600 transition-all shadow-md",title:"\xc7oklu Mesaj Grubu Olu≈ütur",children:(0,s.jsx)(P.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)(d.M,{mode:"wait",children:["direct"===aQ&&(0,s.jsx)(c.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:aF?(0,s.jsxs)("div",{className:"flex flex-col h-[500px]",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>{aR(null),aO([]),aH(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)(B.Z,{className:"w-5 h-5"})}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden",children:aF.otherUser.image?(0,s.jsx)(o.default,{src:aF.otherUser.image,alt:"",width:40,height:40,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-frozen-100",children:(0,s.jsx)(w.Z,{className:"w-5 h-5 text-frozen-400"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800",children:aF.otherUser.name}),aF.product&&(0,s.jsx)(m.default,{href:`/urun/${aF.product.id}`,className:"text-xs text-frozen-600 hover:underline",children:aF.product.title})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[aq?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-frozen-500"})}):0===aM.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,s.jsx)("p",{children:"Hen\xfcz mesaj yok. ƒ∞lk mesajƒ± siz g\xf6nderin!"})}):aM.map(e=>{let a=e.sender.id===eu?.id,t=e.content.match(/\[IMAGE\](.*?)\[\/IMAGE\]/s),r=t?t[1]:null,i=e.content.replace(/\[IMAGE\].*?\[\/IMAGE\]/s,"").trim();return(0,s.jsx)("div",{className:`flex ${a?"justify-end":"justify-start"}`,children:(0,s.jsxs)("div",{className:`max-w-[75%] ${a?"order-1":""}`,children:[(0,s.jsxs)("div",{className:`px-4 py-2 rounded-2xl ${a?"bg-frozen-500 text-white rounded-br-md":"bg-gray-100 text-gray-800 rounded-bl-md"}`,children:[r&&(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("img",{src:r,alt:"Payla≈üƒ±lan fotoƒüraf",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(r,"_blank")})}),i&&(0,s.jsx)("p",{className:"text-sm",children:i}),r&&!i&&(0,s.jsxs)("p",{className:"text-xs opacity-70 flex items-center gap-1",children:[(0,s.jsx)($.Z,{className:"w-3 h-3"})," Fotoƒüraf"]})]}),(0,s.jsxs)("p",{className:`text-[10px] text-gray-400 mt-1 flex items-center gap-1 ${a?"justify-end":""}`,children:[new Date(e.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),a&&(e.isRead?(0,s.jsx)(I.Z,{className:"w-3.5 h-3.5 text-blue-500"}):(0,s.jsx)(F.Z,{className:"w-3.5 h-3.5 text-gray-400"}))]})]})},e.id)}),(0,s.jsx)("div",{ref:aW})]}),aL&&(0,s.jsx)("div",{className:"px-4 py-2 bg-amber-50 border-t border-amber-200",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-xs text-amber-800 whitespace-pre-line",children:aL}),(0,s.jsx)("button",{onClick:()=>aH(null),className:"ml-auto",children:(0,s.jsx)(v.Z,{className:"w-4 h-4 text-amber-600"})})]})}),(0,s.jsxs)("div",{className:"p-3 md:p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[tw&&(0,s.jsxs)("div",{className:"mb-3 relative inline-block",children:[(0,s.jsx)("div",{className:"relative w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden border-2 border-frozen-500",children:(0,s.jsx)("img",{src:tw,alt:"Se\xe7ili fotoƒüraf",className:"w-full h-full object-cover"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{tN(null),tZ.current&&(tZ.current.value="")},className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,s.jsx)(v.Z,{className:"w-3 h-3"})})]}),(0,s.jsx)("input",{type:"file",ref:tZ,onChange:sD,accept:"image/*",className:"hidden"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[(0,s.jsx)("input",{type:"text",value:aV,onChange:e=>aK(e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&sq(),placeholder:"Mesajƒ±nƒ±zƒ± yazƒ±n...",className:"flex-1 px-3 md:px-4 py-2.5 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-frozen-500 focus:border-frozen-500 text-sm md:text-base"}),(0,s.jsx)(Q.z,{onClick:sq,disabled:aG||!aV.trim()&&!tw,className:"rounded-full w-10 h-10 md:w-11 md:h-11 p-0 bg-gradient-to-r from-frozen-500 to-frozen-600 hover:from-frozen-600 hover:to-frozen-700 flex-shrink-0 shadow-md",children:aG?(0,s.jsx)(x.Z,{className:"w-4 h-4 md:w-5 md:h-5 text-white animate-spin"}):(0,s.jsx)(R.Z,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>tZ.current?.click(),disabled:aG||tz,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-all disabled:opacity-50 text-xs md:text-sm",title:"Fotoƒüraf ekle",children:[tz?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(M.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Fotoƒüraf"})]}),(0,s.jsxs)("div",{className:"relative",ref:tT,children:[(0,s.jsxs)("button",{type:"button",onClick:()=>ty(!tb),disabled:aG,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-all disabled:opacity-50 text-xs md:text-sm",title:"Emoji ekle",children:[(0,s.jsx)(O.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Emoji"})]}),(0,s.jsx)(d.M,{children:tb&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"absolute bottom-full left-0 mb-2 w-56 md:w-64 max-h-48 md:max-h-56 overflow-y-auto bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 p-2 md:p-3 z-50",children:Object.entries(tR).map(([e,a])=>(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 capitalize font-medium",children:e}),(0,s.jsx)("div",{className:"flex flex-wrap gap-0.5 md:gap-1",children:a.map((e,a)=>(0,s.jsx)("button",{type:"button",onClick:()=>sN(e),className:"w-6 h-6 md:w-7 md:h-7 flex items-center justify-center text-base md:text-lg hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e},a))})]},e))})})]})]})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-frozen-50 to-frozen-100 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-frozen-600",children:aY.totalMessages}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Toplam"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-green-600",children:aY.readMessages}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Okunmu≈ü"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-amber-600",children:aY.unreadMessages}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Okunmamƒ±≈ü"})]})]})}),aq?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-frozen-500 mx-auto mb-3 animate-spin"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Mesajlar y\xfckleniyor..."})]}):0===a$.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(T.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:"Hen\xfcz Mesajƒ±nƒ±z Yok"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"\xdcr\xfcnlerle ilgilendiƒüinizde burada g\xf6r\xfc≈ümeler ba≈ülayacak."})]}):(0,s.jsx)("div",{className:"divide-y max-h-[400px] overflow-y-auto",children:a$.map((e,a)=>(0,s.jsxs)("button",{onClick:()=>s_(e),className:"w-full p-4 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden flex-shrink-0",children:e.otherUser.image?(0,s.jsx)(o.default,{src:e.otherUser.image,alt:"",width:48,height:48,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-frozen-100",children:(0,s.jsx)(w.Z,{className:"w-6 h-6 text-frozen-400"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 truncate",children:e.otherUser.name}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.lastMessage.createdAt).toLocaleDateString("tr-TR")})]}),e.product&&(0,s.jsx)("p",{className:"text-xs text-frozen-600 truncate",children:e.product.title}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.lastMessage.content})]}),e.unreadCount>0&&(0,s.jsx)("span",{className:"w-5 h-5 bg-frozen-500 text-white text-xs rounded-full flex items-center justify-center",children:e.unreadCount})]},a))})]})},"direct-messages"),"group"===aQ&&(0,s.jsx)(c.E.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:a2?(0,s.jsxs)("div",{className:"flex flex-col h-[500px]",children:[(0,s.jsxs)("div",{className:"p-4 border-b bg-gradient-to-r from-orange-50 to-amber-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>{a4(null),a8([])},className:"p-2 hover:bg-white/50 rounded-lg transition-colors",children:(0,s.jsx)(B.Z,{className:"w-5 h-5 text-gray-600"})}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-orange-400 to-amber-400 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(Z.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 truncate",children:a2.name||"\xc7oklu Takas Grubu"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[a2.members?.length||0," \xfcye"]})]}),(0,s.jsx)("div",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded-lg",children:"Multi-Swap"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-2 overflow-x-auto",children:[a2.members?.slice(0,5).map((e,a)=>s.jsxs("div",{className:"flex items-center gap-1 bg-white/70 px-2 py-1 rounded-full text-xs",children:[e.image?s.jsx(o.default,{src:e.image,alt:e.name||"",width:16,height:16,className:"rounded-full"}):s.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300 flex items-center justify-center text-[10px]",children:(e.nickname||e.name)?.charAt(0)}),s.jsx("span",{className:"text-gray-700",children:e.nickname||e.name?.split(" ")[0]})]},e.id||a)),(a2.members?.length||0)>5&&(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["+",(a2.members?.length||0)-5]})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[tu?(0,s.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,s.jsx)(x.Z,{className:"w-6 h-6 animate-spin text-orange-500"})}):0===a3.length?(0,s.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,s.jsx)(T.Z,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),(0,s.jsx)("p",{children:"Hen\xfcz mesaj yok"}),(0,s.jsx)("p",{className:"text-xs",children:"ƒ∞lk mesajƒ± siz g\xf6nderin!"})]}):a3.map(e=>{let a=e.senderId===eu?.id,t=e.content.match(/\[IMAGE\](.*?)\[\/IMAGE\]/s),r=t?t[1]:null,i=e.content.replace(/\[IMAGE\].*?\[\/IMAGE\]/s,"").trim();return(0,s.jsx)("div",{className:`flex ${a?"justify-end":"justify-start"}`,children:(0,s.jsxs)("div",{className:`max-w-[75%] ${a?"order-2":"order-1"}`,children:[!a&&(0,s.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[e.sender?.image?(0,s.jsx)(o.default,{src:e.sender.image,alt:"",width:16,height:16,className:"rounded-full"}):(0,s.jsx)("div",{className:"w-4 h-4 rounded-full bg-orange-200 flex items-center justify-center text-[10px]",children:(e.sender?.nickname||e.sender?.name)?.charAt(0)}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.sender?.nickname||e.sender?.name?.split(" ")[0]})]}),(0,s.jsxs)("div",{className:`p-3 rounded-2xl ${e.isSystem?"bg-orange-100 text-orange-800 text-center mx-auto text-sm":a?"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:[r&&(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("img",{src:r,alt:"Payla≈üƒ±lan fotoƒüraf",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(r,"_blank")})}),i&&(0,s.jsx)("span",{className:"text-sm",children:i}),r&&!i&&(0,s.jsxs)("p",{className:"text-xs opacity-70 flex items-center gap-1",children:[(0,s.jsx)($.Z,{className:"w-3 h-3"})," Fotoƒüraf"]})]}),(0,s.jsxs)("p",{className:`text-[10px] text-gray-400 mt-1 flex items-center gap-1 ${a?"justify-end":"justify-start"}`,children:[new Date(e.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),a&&(e.isRead?(0,s.jsx)(I.Z,{className:"w-3.5 h-3.5 text-blue-400"}):(0,s.jsx)(F.Z,{className:"w-3.5 h-3.5 text-white/70"}))]})]})},e.id)}),(0,s.jsx)("div",{ref:tf})]}),(0,s.jsxs)("div",{className:"p-3 md:p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[tk&&(0,s.jsxs)("div",{className:"mb-3 relative inline-block",children:[(0,s.jsx)("div",{className:"relative w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden border-2 border-orange-500",children:(0,s.jsx)("img",{src:tk,alt:"Se\xe7ili fotoƒüraf",className:"w-full h-full object-cover"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{tD(null),tP.current&&(tP.current.value="")},className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,s.jsx)(v.Z,{className:"w-3 h-3"})})]}),(0,s.jsx)("input",{type:"file",ref:tP,onChange:sz,accept:"image/*",className:"hidden"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[(0,s.jsx)(ee.I,{value:tm,onChange:e=>tx(e.target.value),placeholder:"Gruba mesaj yaz...",className:"flex-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 text-sm md:text-base",onKeyPress:e=>"Enter"===e.key&&sU()}),(0,s.jsx)(Q.z,{onClick:sU,disabled:!tm.trim()&&!tk||tg,className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-full w-10 h-10 md:w-11 md:h-11 p-0 flex-shrink-0 shadow-md",children:tg?(0,s.jsx)(x.Z,{className:"w-4 h-4 md:w-5 md:h-5 animate-spin"}):(0,s.jsx)(R.Z,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>tP.current?.click(),disabled:tg||tC,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-all disabled:opacity-50 text-xs md:text-sm",title:"Fotoƒüraf ekle",children:[tC?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(M.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Fotoƒüraf"})]}),(0,s.jsxs)("div",{className:"relative",ref:tA,children:[(0,s.jsxs)("button",{type:"button",onClick:()=>tv(!tj),disabled:tg,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-all disabled:opacity-50 text-xs md:text-sm",title:"Emoji ekle",children:[(0,s.jsx)(O.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Emoji"})]}),(0,s.jsx)(d.M,{children:tj&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"absolute bottom-full left-0 mb-2 w-56 md:w-64 max-h-48 md:max-h-56 overflow-y-auto bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 p-2 md:p-3 z-50",children:Object.entries(tR).map(([e,a])=>(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 capitalize font-medium",children:e}),(0,s.jsx)("div",{className:"flex flex-wrap gap-0.5 md:gap-1",children:a.map((e,a)=>(0,s.jsx)("button",{type:"button",onClick:()=>sk(e),className:"w-6 h-6 md:w-7 md:h-7 flex items-center justify-center text-base md:text-lg hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e},a))})]},e))})})]})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800",children:"\xc7oklu Takas Mesajlarƒ±"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"\xc7oklu takasa uygun kullanƒ±cƒ±larla grup sohbeti"})]}),(0,s.jsxs)(Q.z,{onClick:()=>a7(!0),size:"sm",className:"bg-gradient-to-r from-orange-500 to-amber-500",children:[(0,s.jsx)(P.Z,{className:"w-4 h-4 mr-1"}),"Yeni"]})]})}),0===a1.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(Z.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:"Hen\xfcz Grup Mesajƒ±nƒ±z Yok"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"\xc7oklu takas i\xe7in grup olu≈üturabilir veya davet alabilirsiniz"}),(0,s.jsxs)(Q.z,{onClick:()=>a7(!0),className:"bg-gradient-to-r from-orange-500 to-amber-500",children:[(0,s.jsx)(P.Z,{className:"w-4 h-4 mr-2"}),"Grup Olu≈ütur"]})]}):(0,s.jsx)("div",{className:"divide-y max-h-[400px] overflow-y-auto",children:a1.map(e=>(0,s.jsxs)("button",{onClick:()=>sL(e),className:"w-full p-4 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-orange-100 to-amber-100 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(Z.Z,{className:"w-6 h-6 text-orange-500"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 truncate",children:e.name||"\xc7oklu Takas Grubu"}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:[e.members?.length||0," \xfcye"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.lastMessage?.content||"Hen\xfcz mesaj yok"})]}),(0,s.jsx)(V.Z,{className:"w-4 h-4 text-gray-400"})]},e.id))})]})},"group-messages")]})]},"messages"),"valor"===ei&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[tL&&(0,s.jsx)("div",{className:`p-4 rounded-xl ${"success"===tL.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:tL.text}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-500 rounded-2xl p-6 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-white/80",children:"Mevcut Bakiye"}),(0,s.jsxs)("p",{className:"text-3xl font-bold",children:[eu?.valorBalance||0," Valor"]})]}),(0,s.jsx)(f.Z,{className:"w-12 h-12 text-white/80"})]}),tM?.totalEarned>0&&(0,s.jsxs)("p",{className:"text-sm text-white/80",children:["Toplam kazanƒ±lan: ",tM.totalEarned," Valor"]}),ao&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/20 space-y-2",children:[ao.lockedBonus>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-white/10 rounded-lg p-2",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{children:[(0,s.jsxs)("strong",{children:[ao.lockedBonus,"V"]})," bonus kilitli (ilk takas sonrasƒ± a\xe7ƒ±lƒ±r)"]})]}),ao.isInFirstSwapsPeriod&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-white/10 rounded-lg p-2",children:[(0,s.jsx)(K.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{children:["ƒ∞lk 3 takasta max kazan\xe7: ",(0,s.jsxs)("strong",{children:[ao.remainingGainAllowance,"V"]})," kaldƒ±"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-white",children:"Kullanƒ±labilir:"}),(0,s.jsxs)("span",{className:"font-semibold text-white",children:[ao.usableBalance," Valor"]})]})]})]}),ao&&!ao.productValueStatus.hasQualifiedProduct&&(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(j.Z,{className:"w-5 h-5 text-amber-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-amber-800 mb-1",children:"\xdcr\xfcn Deƒüeri Yetersiz"}),(0,s.jsx)("p",{className:"text-sm text-amber-700 mb-3",children:ao.productValueStatus.recommendation}),(0,s.jsx)(m.default,{href:"/urun-ekle",children:(0,s.jsxs)(Q.z,{size:"sm",className:"bg-amber-500 hover:bg-amber-600 text-white",children:[(0,s.jsx)(P.Z,{className:"w-4 h-4 mr-1"}),"\xdcr\xfcn Ekle"]})})]})]})}),tq&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl border border-purple-200 dark:border-purple-800",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Mevcut Seviyen"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-purple-800 dark:text-purple-200",children:[tq.emoji," Seviye ",tq.level,": ",tq.name]})]})}),tq.nextLevel&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[(0,s.jsxs)("span",{children:["Sonraki: ",tq.nextLevel.emoji," ",tq.nextLevel.name]}),(0,s.jsxs)("span",{children:[tq.swapsToNext," takas kaldƒ±"]})]}),(0,s.jsx)("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500 rounded-full transition-all duration-500",style:{width:`${tq.progress}%`}})})]}),(0,s.jsxs)("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-2 text-center",children:[(0,s.jsxs)("div",{className:"p-2 bg-white dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"G\xfcnl\xfck"}),(0,s.jsxs)("p",{className:"text-sm font-bold text-green-600",children:["+",tq.dailyBonus,"V"]})]}),(0,s.jsxs)("div",{className:"p-2 bg-white dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Takas"}),(0,s.jsx)("p",{className:"text-sm font-bold text-blue-600",children:tq.swapBonusMax>0?`+${tq.swapBonusMin}-${tq.swapBonusMax}V`:"\uD83D\uDD12"})]}),(0,s.jsxs)("div",{className:"p-2 bg-white dark:bg-gray-700 rounded-lg col-span-2 sm:col-span-1",children:[(0,s.jsx)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Aylƒ±k Kalan"}),(0,s.jsxs)("p",{className:"text-sm font-bold text-purple-600",children:[tq.monthlyRemaining,"V"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center",children:(0,s.jsx)(G.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold dark:text-white",children:"G\xfcnl\xfck Giri≈ü Bonusu"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:tq?`Her g\xfcn +${tq.dailyBonus} Valor kazan!`:"Her g\xfcn bonus kazan!"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-lg text-frozen-600 dark:text-frozen-400",children:["+",tq?.dailyBonus||1]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Valor"})]})]}),tM?.dailyBonus?.canClaim?(0,s.jsx)(Q.z,{onClick:sM,disabled:"daily"===tG,className:"w-full gradient-frozen",children:"daily"===tG?"Alƒ±nƒ±yor...":"\uD83C\uDF81 G\xfcnl\xfck Bonusu Al"}):(0,s.jsxs)("div",{className:"text-center py-2 text-gray-500 dark:text-gray-400 text-sm",children:[(0,s.jsx)(U.Z,{className:"w-4 h-4 inline mr-1"}),tM?.dailyBonus?.hoursUntilNext||24," saat sonra tekrar alabilirsiniz"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border dark:border-gray-700",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2 dark:text-white",children:[(0,s.jsx)(K.Z,{className:"w-5 h-5 text-frozen-500"}),"Bonus Fƒ±rsatlarƒ±"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 text-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-white",children:"\xdcr\xfcn Ekle"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:tq?.productBonus&&tq.productBonus>0?`Her \xfcr\xfcn i\xe7in +${tq.productBonus} Valor (max 5 \xfcr\xfcn)`:"\uD83D\uDD12 ƒ∞lk takasƒ±nƒ± tamamla, \xfcr\xfcn bonusu a\xe7ƒ±lsƒ±n!"})]})]}),tq?.productBonus&&tq.productBonus>0?(0,s.jsx)(m.default,{href:"/urun-ekle",children:(0,s.jsx)(Q.z,{size:"sm",variant:"outline",children:"Ekle"})}):(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDD12"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.Z,{className:"w-8 h-8 text-yellow-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-white",children:"Deƒüerlendirme Yap"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:tq?.reviewBonus&&tq.reviewBonus>0?`Her deƒüerlendirme +${tq.reviewBonus} Valor (ayda max 10)`:"\uD83D\uDD12 ƒ∞lk takasƒ±nƒ± tamamla, review bonusu a\xe7ƒ±lsƒ±n!"})]})]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[tM?.reviewBonus?.claimed||0,"/10"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(b.Z,{className:"w-8 h-8 text-purple-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-white",children:"Anket Tamamla"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"+5 Valor (bir kez)"})]})]}),tM?.surveyBonus?.claimed?(0,s.jsx)(y.Z,{className:"w-6 h-6 text-green-500"}):(0,s.jsx)(Q.z,{size:"sm",variant:"outline",onClick:()=>ex("survey"),children:"Ba≈üla"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(w.Z,{className:"w-8 h-8 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-white",children:"Arkada≈ü Davet Et"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:tq?.referralBonus&&tq.referralBonus>0?`Her davet +${tq.referralBonus} Valor`:"\uD83D\uDD12 ƒ∞lk takasƒ±nƒ± tamamla, davet bonusu a\xe7ƒ±lsƒ±n!"})]})]}),(0,s.jsx)(m.default,{href:"/davet",children:(0,s.jsx)(Q.z,{size:"sm",variant:"outline",children:"Davet Et"})})]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border dark:border-gray-700",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white",children:[(0,s.jsx)(U.Z,{className:"w-5 h-5 text-frozen-500"}),"Valor ƒ∞≈ülem Ge\xe7mi≈üi"]}),sb?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(x.Z,{className:"w-6 h-6 animate-spin text-frozen-500"})}):sp?.history&&0!==sp.history.length?(0,s.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:sp.history.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${"in"===e.direction?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:(0,s.jsx)("span",{className:"text-sm",children:"in"===e.direction?"‚Üì":"‚Üë"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:e.description}),e.productTitle&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["\uD83D\uDCE6 ",e.productTitle]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(e.date).toLocaleDateString("tr-TR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,s.jsxs)("span",{className:`font-bold text-sm ${"in"===e.direction?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["in"===e.direction?"+":"-",e.amount,"V"]})]},e.id))}):(0,s.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Hen\xfcz i≈ülem ge\xe7mi≈üi yok"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(L.Z,{className:"w-5 h-5 text-amber-500"}),"Ba≈üarƒ±lar & G\xf6revler"]}),tV?.claimable&&tV.claimable.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-green-600 mb-2",children:"\uD83C\uDF89 \xd6d\xfcl Bekliyor!"}),(0,s.jsx)("div",{className:"space-y-2",children:tV.claimable.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]}),(0,s.jsx)(Q.z,{size:"sm",className:"gradient-frozen",onClick:()=>sO(e.id),disabled:tG===e.id,children:tG===e.id?"...":`+${e.reward}`})]},e.id))})]}),tV?.available&&tV.available.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Devam Eden"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:tV.available.slice(0,6).map(e=>(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-xl text-center",children:[(0,s.jsx)("span",{className:"text-xl",children:e.icon}),(0,s.jsx)("p",{className:"text-xs font-medium mt-1",children:e.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["+",e.reward," V"]})]},e.id))})]}),tV?.completed&&tV.completed.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:["Tamamlanan (",tV.completed.length,")"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:tV.completed.map(e=>(0,s.jsxs)("div",{className:"px-3 py-1.5 bg-frozen-50 text-frozen-700 rounded-full text-xs flex items-center gap-1",children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{children:e.title}),(0,s.jsx)(y.Z,{className:"w-3 h-3"})]},e.id))})]})]})]},"valor"),"products"===ei&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold text-gray-800 dark:text-white",children:["\xdcr\xfcnlerim (",eg.length,")"]}),(0,s.jsx)(m.default,{href:"/urun-ekle",children:(0,s.jsxs)(Q.z,{size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Yeni \xdcr\xfcn"]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-4 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(H.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400"}),(0,s.jsx)(ee.I,{placeholder:"\xdcr\xfcn ara...",value:aD,onChange:e=>az(e.target.value),className:"pl-9 h-9 text-sm bg-white dark:bg-slate-700 text-gray-900 dark:text-white border-gray-300 dark:border-slate-600"})]}),(0,s.jsxs)(Q.z,{variant:"outline",size:"sm",onClick:()=>aC(!aS),className:`h-9 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200 font-medium ${aS?"bg-purple-100 dark:bg-purple-900/30 border-purple-400 dark:border-purple-500 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:[(0,s.jsx)(q.Z,{className:"w-4 h-4 mr-2"}),"Filtreler"]})]}),(0,s.jsx)(d.M,{children:aS&&(0,s.jsx)(c.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4 p-3 bg-gray-50 rounded-xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Durum"}),(0,s.jsx)("div",{className:"flex gap-1",children:[{value:"all",label:"T\xfcm\xfc"},{value:"active",label:"Aktif"},{value:"inactive",label:"Pasif"},{value:"pending",label:"Beklemede"}].map(e=>(0,s.jsx)("button",{onClick:()=>aw(e.value),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${av===e.value?"bg-frozen-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Sƒ±ralama"}),(0,s.jsx)("div",{className:"flex gap-1 flex-wrap",children:[{value:"newest",label:"En Yeni",icon:U.Z},{value:"oldest",label:"En Eski",icon:U.Z},{value:"valor-high",label:"Valor ‚Üì",icon:_.Z},{value:"valor-low",label:"Valor ‚Üë",icon:_.Z},{value:"views",label:"G\xf6r\xfcnt\xfclenme",icon:Y.Z}].map(e=>(0,s.jsx)("button",{onClick:()=>ak(e.value),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${aN===e.value?"bg-frozen-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:e.label},e.value))})]})]})})}),("all"!==av||aD)&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:[sX.length," \xfcr\xfcn bulundu"]}),0===sX.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(u.Z,{className:"w-14 h-14 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-700 dark:text-gray-200 mb-2",children:0===eg.length?"Hen\xfcz \xfcr\xfcn\xfcn\xfcz yok":"Filtrelerle e≈üle≈üen \xfcr\xfcn yok"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:0===eg.length?"Takas yapmak i\xe7in ilk \xfcr\xfcn\xfcn\xfcz\xfc ekleyin":"Farklƒ± filtreler deneyin"}),0===eg.length&&(0,s.jsx)(m.default,{href:"/urun-ekle",children:(0,s.jsx)(Q.z,{className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold",children:"\xdcr\xfcn Ekle"})})]}):(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:sX.map(e=>(0,s.jsxs)("div",{className:"group border rounded-xl overflow-hidden hover:shadow-lg transition-all relative",children:[(0,s.jsxs)(m.default,{href:`/urun/${e.id}`,children:[(0,s.jsxs)("div",{className:"aspect-square relative bg-gray-100",children:[e.images?.[0]&&(0,s.jsx)(o.default,{src:e.images[0],alt:e.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 flex flex-col gap-1 items-end",children:[e.isBoosted&&e.boostExpiresAt&&new Date(e.boostExpiresAt)>new Date&&(0,s.jsx)("div",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium bg-gradient-to-r from-amber-400 to-orange-500 text-white shadow-sm",children:"\uD83D\uDE80 \xd6ne \xc7ƒ±kmƒ±≈ü"}),(0,s.jsx)("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${"active"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:"active"===e.status?"Aktif":"pending"===e.status?"Beklemede":"Pasif"})]})]}),(0,s.jsxs)("div",{className:"p-2.5",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-800 text-sm truncate",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,s.jsxs)("span",{className:"text-frozen-600 font-bold text-sm",children:[e.valorPrice," V"]}),(0,s.jsxs)("span",{className:"text-[10px] text-gray-500 flex items-center gap-0.5",children:[(0,s.jsx)(Y.Z,{className:"w-3 h-3"}),e.views]})]})]})]}),(0,s.jsxs)("div",{className:"absolute top-2 left-2",children:[(0,s.jsx)("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),eU(eG===e.id?null:e.id)},className:"p-1.5 bg-white/90 hover:bg-white rounded-full shadow-sm transition-all",children:(0,s.jsx)(J.Z,{className:"w-4 h-4 text-gray-600"})}),eG===e.id&&(0,s.jsxs)("div",{className:"absolute top-8 left-0 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[180px] z-10",children:["active"===e.status&&tI?.available&&(0,s.jsxs)("button",{onClick:a=>{if(a.preventDefault(),a.stopPropagation(),e.isBoosted&&e.boostExpiresAt&&new Date(e.boostExpiresAt)>new Date)return;let t=tI.freeBoostsRemaining>0?"Bedava":`${tI.cost}V`;confirm(`${t} harcayarak \xfcr\xfcn\xfc ${tI.durationHours} saat \xf6ne \xe7ƒ±karmak ister misiniz?`)&&(s$(e.id),eU(null))},disabled:tB===e.id||!!(e.isBoosted&&e.boostExpiresAt&&new Date(e.boostExpiresAt)>new Date),className:"w-full px-3 py-2.5 text-left text-sm hover:bg-amber-50 flex items-center gap-2 disabled:opacity-50 text-gray-800 font-medium border-b border-gray-100",children:[tB===e.id?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin text-amber-600"}):(0,s.jsx)("span",{className:"text-base",children:"\uD83D\uDE80"}),(0,s.jsx)("span",{className:"text-gray-800",children:e.isBoosted&&e.boostExpiresAt&&new Date(e.boostExpiresAt)>new Date?"‚≠ê \xd6ne \xc7ƒ±kmƒ±≈ü":`\xd6ne \xc7ƒ±kar ${tI.freeBoostsRemaining>0?"(Bedava)":`(${tI.cost}V)`}`})]}),(0,s.jsxs)("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),sI(e.id,e.status)},disabled:eV===e.id,className:"w-full px-3 py-2.5 text-left text-sm hover:bg-gray-100 flex items-center gap-2 disabled:opacity-50 text-gray-800 font-medium",children:[eV===e.id?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin text-gray-600"}):"active"===e.status?(0,s.jsx)(W.Z,{className:"w-4 h-4 text-orange-600"}):(0,s.jsx)(Y.Z,{className:"w-4 h-4 text-green-600"}),(0,s.jsx)("span",{className:"text-gray-800",children:"active"===e.status?"Yayƒ±ndan Kaldƒ±r":"Yayƒ±na Al"})]})]})]})]},e.id))})]},"products"),"favorites"===ei&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Favorilerim"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Beƒüendiƒüiniz \xfcr\xfcnler"})]})}),(0,s.jsx)(eE,{})]},"favorites"),"reviews"===ei&&eu&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Deƒüerlendirmelerim"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Diƒüer kullanƒ±cƒ±larƒ±n sizin hakkƒ±nƒ±zdaki yorumlarƒ±"})]}),(0,s.jsx)(eD,{trustScore:eu.trustScore,size:"lg"})]}),(0,s.jsx)(eN,{userId:eu.id})]}),(0,s.jsx)(eT,{}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-800 mb-4",children:"T\xfcm Yorumlar"}),(0,s.jsx)(ek,{userId:eu.id})]})]},"reviews"),"badges"===ei&&eu&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:(0,s.jsx)(ew,{userId:eu.id,showAll:!0,onBadgeToggle:(e,a)=>{console.log("Badge toggled:",e,a)}})},"badges"),"survey"===ei&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white rounded-2xl shadow-sm p-6",children:eu.surveyCompleted?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(y.Z,{className:"w-14 h-14 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:"Anket Tamamlandƒ±!"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Katƒ±lƒ±mƒ±nƒ±z i\xe7in te≈üekk\xfcr ederiz."}),(0,s.jsxs)("div",{className:"max-w-lg mx-auto text-left",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700 mb-3 text-sm",children:"Cevaplarƒ±nƒ±z:"}),(0,s.jsx)("div",{className:"space-y-2",children:eS.map(e=>{let a=aA[e.id];return a?(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.question}),(0,s.jsx)("p",{className:"text-gray-800 font-medium text-sm",children:Array.isArray(a)?a.join(", "):a})]},e.id):null})})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Anketimize Katƒ±lƒ±n"}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mt-1",children:"Tercihlerinizi \xf6ƒürenmemize yardƒ±mcƒ± olun"}),(0,s.jsx)("div",{className:"mt-4 bg-gray-300 rounded-full h-2",children:(0,s.jsx)("div",{className:"gradient-frozen h-2 rounded-full transition-all duration-300",style:{width:`${(aE+1)/eS.length*100}%`}})}),(0,s.jsxs)("p",{className:"text-sm text-gray-700 mt-2 font-medium",children:[aE+1," / ",eS.length," soru"]})]}),(0,s.jsx)("div",{className:"min-h-[280px]",children:(0,s.jsx)(d.M,{mode:"wait",children:(0,s.jsxs)(c.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-800 mb-4",children:eS[aE].question}),(0,s.jsx)("div",{className:"space-y-2",children:eS[aE].options.map(e=>{let a="multiple"===eS[aE].type,t=eS[aE].id,r=a?(aA[t]||[]).includes(e):aA[t]===e;return(0,s.jsx)("button",{type:"button",onClick:()=>sJ(t,e,a),className:`w-full text-left px-4 py-3 rounded-xl border-2 transition-all text-sm ${r?"border-frozen-500 bg-frozen-50 text-frozen-700 font-medium":"border-gray-400 hover:border-gray-500 hover:bg-gray-50 text-gray-800"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:`w-5 h-5 rounded-${a?"md":"full"} border-2 flex items-center justify-center ${r?"border-frozen-500 bg-frozen-500":"border-gray-500"}`,children:r&&(0,s.jsx)(y.Z,{className:"w-3 h-3 text-white"})}),(0,s.jsx)("span",{className:"font-medium",children:e})]})},e)})}),"multiple"===eS[aE].type&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"* Birden fazla se\xe7ebilirsiniz"})]},aE)})}),(0,s.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,s.jsx)(Q.z,{variant:"outline",onClick:()=>aT(e=>e-1),disabled:0===aE,size:"sm",children:"\xd6nceki"}),aE<eS.length-1?(0,s.jsx)(Q.z,{onClick:()=>aT(e=>e+1),disabled:!aA[eS[aE].id],size:"sm",children:"Sonraki"}):(0,s.jsx)(Q.z,{onClick:sW,disabled:aP||!aA[eS[aE].id],className:"gradient-frozen",size:"sm",children:aP?"G\xf6nderiliyor...":"Anketi Tamamla"})]})]})},"survey")]})]}),(0,s.jsx)(d.M,{children:a6&&(0,s.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>a7(!1),children:(0,s.jsxs)(c.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"p-4 border-b bg-gradient-to-r from-orange-500 to-amber-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.Z,{className:"w-5 h-5"}),(0,s.jsx)("h3",{className:"font-semibold",children:"\xc7oklu Mesaj Grubu Olu≈ütur"})]}),(0,s.jsx)("button",{onClick:()=>a7(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,s.jsx)(v.Z,{className:"w-5 h-5"})})]})}),(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grup Adƒ± (ƒ∞steƒüe Baƒülƒ±)"}),(0,s.jsx)(ee.I,{value:a9,onChange:e=>te(e.target.value),placeholder:"\xd6rn: Elektronik Takasƒ±"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kullanƒ±cƒ± Davet Et"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(ee.I,{value:ta,onChange:e=>tt(e.target.value),placeholder:"Kullanƒ±cƒ± adƒ± veya takma ad...",onKeyDown:async e=>{if("Enter"===e.key&&ta.trim()){td(!0);try{let e=await fetch(`/api/messages/search-users?q=${encodeURIComponent(ta)}`);if(e.ok){let a=await e.json();tr(a)}}catch(e){console.error(e)}td(!1)}}}),(0,s.jsx)(Q.z,{onClick:async()=>{if(ta.trim()){td(!0);try{let e=await fetch(`/api/messages/search-users?q=${encodeURIComponent(ta)}`);if(e.ok){let a=await e.json();tr(a)}}catch(e){console.error(e)}td(!1)}},disabled:tn||!ta.trim(),size:"icon",children:tn?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(H.Z,{className:"w-4 h-4"})})]})]}),ts.length>0&&(0,s.jsxs)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Arama Sonu\xe7larƒ±:"}),ts.map(e=>(0,s.jsxs)("div",{className:`flex items-center justify-between p-2 rounded-lg border ${ti.find(a=>a.id===e.id)?"border-orange-300 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.image?(0,s.jsx)(o.default,{src:e.image,alt:"",width:32,height:32,className:"object-cover"}):(0,s.jsx)(w.Z,{className:"w-4 h-4 text-gray-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.nickname||e.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.name})]})]}),(0,s.jsx)(Q.z,{size:"sm",variant:ti.find(a=>a.id===e.id)?"default":"outline",onClick:()=>{ti.find(a=>a.id===e.id)?tl(a=>a.filter(a=>a.id!==e.id)):tl(a=>[...a,e])},children:ti.find(a=>a.id===e.id)?(0,s.jsx)(y.Z,{className:"w-4 h-4"}):(0,s.jsx)(X.Z,{className:"w-4 h-4"})})]},e.id))]}),ti.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Se\xe7ili \xdcyeler (",ti.length,"):"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:ti.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs",children:[(0,s.jsx)("span",{children:e.nickname||e.name}),(0,s.jsx)("button",{onClick:()=>tl(a=>a.filter(a=>a.id!==e.id)),className:"hover:bg-orange-200 rounded-full p-0.5",children:(0,s.jsx)(v.Z,{className:"w-3 h-3"})})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-xs text-amber-800",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"\uD83D\uDCA1 \xc7oklu Takas Grubu Hakkƒ±nda"}),(0,s.jsx)("p",{children:"Bu grup, \xe7oklu takas yapmak isteyen kullanƒ±cƒ±larƒ± bir araya getirir. Grup \xfcyeleri birlikte takas fƒ±rsatlarƒ±nƒ± g\xf6r\xfc≈üebilir."})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t flex gap-2",children:[(0,s.jsx)(Q.z,{variant:"outline",className:"flex-1",onClick:()=>{a7(!1),te(""),tt(""),tr([]),tl([])},children:"ƒ∞ptal"}),(0,s.jsxs)(Q.z,{className:"flex-1 bg-gradient-to-r from-orange-500 to-amber-500",disabled:0===ti.length||tc,onClick:async()=>{if(0!==ti.length){to(!0);try{let e=await fetch("/api/messages/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a9||void 0,memberIds:ti.map(e=>e.id)})});if(e.ok){let a=await e.json();a5(e=>[a,...e]),a7(!1),te(""),tt(""),tr([]),tl([]),a0("group"),eO({message:"Grup ba≈üarƒ±yla olu≈üturuldu!",type:"success"})}else{let a=await e.json();eO({message:a.error||"Grup olu≈üturulamadƒ±",type:"error"})}}catch(e){eO({message:"Bir hata olu≈ütu",type:"error"})}to(!1)}},children:[tc?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin mr-2"}):(0,s.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"Grup Olu≈ütur"]})]})]})})}),(0,s.jsx)(d.M,{children:se&&(0,s.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>sa(!1),children:(0,s.jsxs)(c.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(k.Z,{className:"w-5 h-5"}),"≈ûifre Deƒüi≈ütir"]}),(0,s.jsx)("button",{onClick:()=>sa(!1),className:"text-white/80 hover:text-white",children:(0,s.jsx)(v.Z,{className:"w-5 h-5"})})]})}),(0,s.jsxs)("form",{onSubmit:sA,className:"p-6 space-y-4",children:[so&&(0,s.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 flex-shrink-0"}),so]}),sx&&(0,s.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm flex items-center gap-2",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 flex-shrink-0"}),sx]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mevcut ≈ûifre"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ee.I,{type:sr?"text":"password",value:st.currentPassword,onChange:e=>ss(a=>({...a,currentPassword:e.target.value})),placeholder:"Mevcut ≈üifrenizi girin",className:"pr-10"}),(0,s.jsx)("button",{type:"button",onClick:()=>si(!sr),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:sr?(0,s.jsx)(W.Z,{className:"w-4 h-4"}):(0,s.jsx)(Y.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yeni ≈ûifre"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ee.I,{type:sl?"text":"password",value:st.newPassword,onChange:e=>ss(a=>({...a,newPassword:e.target.value})),placeholder:"En az 8 karakter",className:"pr-10"}),(0,s.jsx)("button",{type:"button",onClick:()=>sn(!sl),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:sl?(0,s.jsx)(W.Z,{className:"w-4 h-4"}):(0,s.jsx)(Y.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"En az 8 karakter, 1 b\xfcy\xfck harf, 1 k\xfc\xe7\xfck harf ve 1 rakam i\xe7ermeli"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yeni ≈ûifre (Tekrar)"}),(0,s.jsx)(ee.I,{type:"password",value:st.confirmPassword,onChange:e=>ss(a=>({...a,confirmPassword:e.target.value})),placeholder:"Yeni ≈üifrenizi tekrar girin"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsx)(Q.z,{type:"submit",disabled:sd,className:"flex-1 bg-amber-500 hover:bg-amber-600",children:sd?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Deƒüi≈ütiriliyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{className:"w-4 h-4 mr-2"}),"≈ûifreyi Deƒüi≈ütir"]})}),(0,s.jsx)(Q.z,{type:"button",variant:"outline",onClick:()=>{sa(!1),ss({currentPassword:"",newPassword:"",confirmPassword:""}),sm(""),su("")},className:"border-gray-300",children:"ƒ∞ptal"})]})]})]})})}),sh&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center z-50",onClick:()=>sg(!1),children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl w-full max-w-lg max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-4 border-b dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCB0 Valor Ge\xe7mi≈üi"}),(0,s.jsx)("button",{onClick:()=>sg(!1),className:"text-gray-400 hover:text-gray-600 text-xl",children:"‚úï"})]}),sp&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[(0,s.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded-lg text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold text-purple-700 dark:text-purple-300",children:sp.balance}),(0,s.jsx)("p",{className:"text-[10px] text-purple-500",children:"Toplam"})]}),(0,s.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-2 rounded-lg text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold text-amber-700 dark:text-amber-300",children:sp.locked}),(0,s.jsx)("p",{className:"text-[10px] text-amber-500",children:"Kilitli"})]}),(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded-lg text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:sp.available}),(0,s.jsx)("p",{className:"text-[10px] text-green-500",children:"Kullanƒ±labilir"})]})]})]}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-[50vh] p-4",children:sb?(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Y\xfckleniyor..."}):sp?.history?.length>0?(0,s.jsx)("div",{className:"space-y-2",children:sp.history.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("span",{className:`text-lg ${"in"===e.direction?"text-green-500":"text-red-500"}`,children:"in"===e.direction?"\uD83D\uDCE5":"\uD83D\uDCE4"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.productTitle||e.description}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("tr-TR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("span",{className:`text-sm font-bold ${"in"===e.direction?"text-green-600":"text-red-600"}`,children:["in"===e.direction?"+":"-",e.amount]})]},e.id))}):(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Hen\xfcz hareket yok"})})]})}),t5&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center",onClick:()=>t2(!1),children:(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-sm p-6 pb-8 sm:pb-6",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:"Profil Fotoƒürafƒ±"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("button",{onClick:sS,className:"w-full flex items-center gap-4 p-4 bg-frozen-50 hover:bg-frozen-100 rounded-xl transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-frozen-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(S.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-800",children:"Fotoƒüraf \xc7ek"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"\xd6n kamera ile selfie \xe7ek"})]})]}),(0,s.jsxs)("button",{onClick:()=>{t2(!1),t1.current?.click()},className:"w-full flex items-center gap-4 p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-500 rounded-full flex items-center justify-center",children:(0,s.jsx)($.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-800",children:"Galeriden Se\xe7"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Mevcut fotoƒüraflardan se\xe7"})]})]})]}),(0,s.jsx)("button",{onClick:()=>t2(!1),className:"w-full mt-4 py-3 text-gray-600 font-medium hover:bg-gray-100 rounded-xl transition-colors",children:"ƒ∞ptal"})]})}),t4&&(0,s.jsxs)("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-black/50",children:[(0,s.jsx)("button",{onClick:sC,className:"p-2 text-white hover:bg-white/10 rounded-full",children:(0,s.jsx)(v.Z,{className:"w-6 h-6"})}),(0,s.jsx)("span",{className:"text-white font-medium",children:"Profil Fotoƒürafƒ±"}),(0,s.jsx)("div",{className:"w-10"})]}),(0,s.jsxs)("div",{className:"flex-1 flex items-center justify-center bg-black relative",children:[tQ?(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("img",{src:tQ,alt:"\xd6nizleme",className:"max-w-[300px] max-h-[300px] rounded-full object-cover"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("video",{ref:t7,autoPlay:!0,playsInline:!0,muted:!0,className:"max-w-full max-h-full object-contain",style:{transform:"scaleX(-1)"}}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsx)("div",{className:"w-64 h-64 sm:w-80 sm:h-80 border-4 border-white/50 rounded-full"})}),!t8&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"w-12 h-12 text-white animate-spin"})})]}),(0,s.jsx)("canvas",{ref:t9,className:"hidden"})]}),(0,s.jsx)("div",{className:"p-6 bg-black/50",children:tQ?(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>{t0(null),sS()},className:"px-6 py-3 bg-gray-600 text-white rounded-full font-medium hover:bg-gray-700 transition-colors",children:"Tekrar \xc7ek"}),(0,s.jsx)("button",{onClick:sE,disabled:tW,className:"px-6 py-3 bg-frozen-500 text-white rounded-full font-medium hover:bg-frozen-600 transition-colors disabled:opacity-50 flex items-center gap-2",children:tW?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}),"Y\xfckleniyor..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.Z,{className:"w-5 h-5"}),"Kullan"]})})]}):(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{onClick:()=>{if(console.log("[ProfileCamera] Fotoƒüraf \xe7ekiliyor..."),!t7.current||!t9.current)return;let e=t7.current,a=t9.current,t=a.getContext("2d");if(!t)return;let s=Math.min(e.videoWidth,e.videoHeight);a.width=s,a.height=s,t.translate(s,0),t.scale(-1,1);let r=(e.videoWidth-s)/2,i=(e.videoHeight-s)/2;t.drawImage(e,r,i,s,s,0,0,s,s);let l=a.toDataURL("image/jpeg",.9);console.log("[ProfileCamera] Fotoƒüraf \xe7ekildi"),t0(l),t8&&(t8.getTracks().forEach(e=>e.stop()),t6(null))},disabled:!t8,className:"w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-lg active:scale-95 transition-transform disabled:opacity-50",children:(0,s.jsx)("div",{className:"w-16 h-16 bg-frozen-500 rounded-full"})})})})]})]})}function eE(){let[e,a]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l()},[]);let l=async()=>{try{let e=await fetch("/api/favorites");if(e.ok){let t=await e.json();a(t.favorites||[])}}catch(e){console.error("Favorites fetch error:",e)}finally{i(!1)}};return t?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{className:"animate-pulse bg-gray-100 h-48 rounded-xl"},e))}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(h.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Hen\xfcz Favoriniz Yok"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Beƒüendiƒüiniz \xfcr\xfcnleri favorilere ekleyin"}),(0,s.jsx)(m.default,{href:"/urunler",children:(0,s.jsx)(Q.z,{children:"\xdcr\xfcnleri Ke≈üfet"})})]}):(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(e=>(0,s.jsx)(m.default,{href:`/urun/${e.id}`,children:(0,s.jsxs)("div",{className:"group bg-white border rounded-xl overflow-hidden hover:shadow-lg transition-all",children:[(0,s.jsxs)("div",{className:"relative aspect-square bg-gray-100",children:[e.images?.[0]&&(0,s.jsx)(o.default,{src:e.images[0],alt:e.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform"}),(0,s.jsx)("div",{className:"absolute top-2 right-2",children:(0,s.jsx)(ei._,{productId:e.id,initialCount:e.favoriteCount,size:"sm"})})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-800 text-sm truncate",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,s.jsxs)("span",{className:"text-frozen-600 font-bold text-sm",children:[e.valorPrice," V"]}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:[e.favoriteCount," ‚ù§Ô∏è"]})]})]})]})},e.id))})}function eT(){let[e,a]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/reviews?checkPending=true");if(e.ok){let t=await e.json();a(t.pendingReviews||[])}}catch(e){console.error("Pending reviews fetch error:",e)}finally{i(!1)}};return t||0===e.length?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl shadow-sm p-4 sm:p-6 border border-amber-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-amber-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800",children:"Deƒüerlendirme Bekliyor"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.length," takas deƒüerlendirmenizi bekliyor"]})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-xl p-3 border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gray-100 overflow-hidden",children:e.product?.images?.[0]&&(0,s.jsx)(o.default,{src:e.product.images[0],alt:"",width:48,height:48,className:"object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:e.product?.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.otherUser?.name," ile takas"]})]})]}),(0,s.jsx)(Q.z,{size:"sm",onClick:()=>n(e),className:"bg-amber-500 hover:bg-amber-600",children:"Deƒüerlendir"})]},e.swapId))})]}),l&&(0,s.jsx)(ez,{isOpen:!!l,onClose:()=>n(null),swapId:l.swapId,otherUser:l.otherUser,productTitle:l.product?.title||"\xdcr\xfcn",onSuccess:()=>{d(),n(null)}})]})}},39291:function(e,a,t){"use strict";t.d(a,{_:function(){return c}});var s=t(15444),r=t(89300),i=t(65407),l=t(75762),n=t(79047),d=t(65522);function c({productId:e,initialCount:a=0,size:t="md",showCount:c=!1,className:o}){let{data:m}=(0,l.useSession)(),x=(0,n.useRouter)(),[u,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(a),[f,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m?.user&&v()},[m,e]);let v=async()=>{try{let a=await fetch(`/api/favorites?productId=${e}`);if(a.ok){let e=await a.json();h(e.isFavorite)}}catch(e){console.error("Favorite check error:",e)}},w=async a=>{if(a.preventDefault(),a.stopPropagation(),!m?.user){x.push("/giris");return}if(!f){b(!0),j(!0),h(!u),p(e=>u?e-1:e+1);try{let a=await fetch("/api/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})});if(a.ok){let e=await a.json();h(e.isFavorite),p(e.favoriteCount)}else h(u),p(e=>u?e+1:e-1)}catch(e){console.error("Favorite toggle error:",e),h(u),p(e=>u?e+1:e-1)}finally{b(!1),setTimeout(()=>j(!1),300)}}};return(0,s.jsxs)("div",{className:(0,d.cn)("flex items-center gap-1",o),children:[(0,s.jsx)("button",{onClick:w,disabled:f,className:(0,d.cn)("rounded-full flex items-center justify-center transition-all duration-200","hover:scale-110 active:scale-95","bg-white/90 backdrop-blur-sm shadow-md hover:shadow-lg",{sm:"w-7 h-7",md:"w-9 h-9",lg:"w-11 h-11"}[t],y&&"animate-pulse"),title:u?"Favorilerden \xe7ƒ±kar":"Favorilere ekle",children:(0,s.jsx)(i.Z,{className:(0,d.cn)({sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[t],"transition-all duration-200",u?"fill-red-500 text-red-500":"text-gray-500 hover:text-red-400")})}),c&&g>0&&(0,s.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:g})]})}},35879:function(e,a,t){"use strict";t.d(a,{$:function(){return d},l:function(){return c}});var s=t(15444),r=t(89300),i=t(74385),l=t(22379),n=t(32611);function d(){let[e,a]=(0,r.useState)(!0),[t,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{d(!0),a((0,n.rH)())},[]),t)?(0,s.jsx)("button",{onClick:()=>{let t=!e;a(t),(0,n.KB)(t),t&&(0,n.s_)()},className:`p-2 rounded-lg transition-colors ${e?"text-purple-600 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-gray-700":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:e?"Sesi kapat":"Sesi a\xe7",children:e?(0,s.jsx)(i.Z,{className:"w-5 h-5"}):(0,s.jsx)(l.Z,{className:"w-5 h-5"})}):null}function c(){let[e,a]=(0,r.useState)(!0),[t,d]=(0,r.useState)(.5),[c,o]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{o(!0),a((0,n.rH)()),d((0,n.FC)())},[]),c)?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e?(0,s.jsx)(i.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}):(0,s.jsx)(l.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"Bildirim Sesleri"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mesaj ve takas bildirimleri i\xe7in ses \xe7al"})]})]}),(0,s.jsx)("button",{onClick:()=>{let t=!e;a(t),(0,n.KB)(t),t&&(0,n.s_)()},className:`relative w-12 h-6 rounded-full transition-colors ${e?"bg-purple-600":"bg-gray-300 dark:bg-gray-600"}`,children:(0,s.jsx)("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${e?"translate-x-6":"translate-x-0"}`})})]}),e&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ses Seviyesi"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Math.round(100*t),"%"]})]}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:t,onChange:e=>{let a=parseFloat(e.target.value);d(a),(0,n.jA)(a)},onMouseUp:()=>(0,n.s_)(),onTouchEnd:()=>(0,n.s_)(),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-600"})]}),e&&(0,s.jsx)("button",{onClick:()=>(0,n.s_)(),className:"w-full px-4 py-2 text-sm font-medium text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/20 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors",children:"\uD83D\uDD14 Test Sesi \xc7al"})]}):null}},2422:function(e,a,t){"use strict";t.d(a,{z:function(){return c}});var s=t(15444),r=t(89300),i=t(21030),l=t(2371),n=t(65522);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(({className:e,variant:a,size:t,asChild:r=!1,...l},c)=>{let o=r?i.g7:"button";return(0,s.jsx)(o,{className:(0,n.cn)(d({variant:a,size:t,className:e})),ref:c,...l})});c.displayName="Button"},74678:function(e,a,t){"use strict";t.d(a,{I:function(){return l}});var s=t(15444),r=t(89300),i=t(65522);let l=r.forwardRef(({className:e,type:a,...t},r)=>(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));l.displayName="Input"},67012:function(e,a,t){"use strict";t.d(a,{g:function(){return l}});var s=t(15444),r=t(89300),i=t(65522);let l=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));l.displayName="Textarea"},32611:function(e,a,t){"use strict";t.d(a,{FC:function(){return n},JE:function(){return u},KB:function(){return l},Ue:function(){return m},hh:function(){return o},jA:function(){return d},rH:function(){return i},s_:function(){return c},wk:function(){return x}});let s=null;function r(){return s||(s=new(window.AudioContext||window.webkitAudioContext)),s}function i(){try{return"off"!==localStorage.getItem("takas-a-sound")}catch{return!0}}function l(e){try{localStorage.setItem("takas-a-sound",e?"on":"off")}catch{}}function n(){try{let e=localStorage.getItem("takas-a-volume");return e?parseFloat(e):.5}catch{return .5}}function d(e){try{localStorage.setItem("takas-a-volume",Math.min(1,Math.max(0,e)).toString())}catch{}}function c(){if(i())try{let e=r(),a=n(),t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.setValueAtTime(880,e.currentTime),t.frequency.setValueAtTime(1108,e.currentTime+.1),t.type="sine",s.gain.setValueAtTime(.3*a,e.currentTime),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.3),t.start(e.currentTime),t.stop(e.currentTime+.3)}catch{}}function o(){if(i())try{let e=r(),a=n(),t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.setValueAtTime(523,e.currentTime),t.frequency.setValueAtTime(659,e.currentTime+.08),t.type="sine",s.gain.setValueAtTime(.25*a,e.currentTime),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2),t.start(e.currentTime),t.stop(e.currentTime+.2)}catch{}}function m(){if(i())try{let e=r(),a=n();[{freq:523,start:0,dur:.15},{freq:659,start:.15,dur:.15},{freq:784,start:.3,dur:.3}].forEach(({freq:t,start:s,dur:r})=>{let i=e.createOscillator(),l=e.createGain();i.connect(l),l.connect(e.destination),i.frequency.value=t,i.type="sine",l.gain.setValueAtTime(.3*a,e.currentTime+s),l.gain.exponentialRampToValueAtTime(.001,e.currentTime+s+r),i.start(e.currentTime+s),i.stop(e.currentTime+s+r)})}catch{}}function x(){if(i())try{let e=r(),a=n();[523,659,784,1047].forEach((t,s)=>{let r=e.createOscillator(),i=e.createGain();r.connect(i),i.connect(e.destination),r.frequency.value=t,r.type="sine";let l=e.currentTime+.12*s;i.gain.setValueAtTime(.25*a,l),i.gain.exponentialRampToValueAtTime(.001,l+.2),r.start(l),r.stop(l+.2)})}catch{}}function u(){if(i())try{let e=r(),a=n(),t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.setValueAtTime(440,e.currentTime),t.frequency.setValueAtTime(550,e.currentTime+.05),t.type="sine",s.gain.setValueAtTime(.15*a,e.currentTime),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.15),t.start(e.currentTime),t.stop(e.currentTime+.15)}catch{}}},10839:function(e,a,t){"use strict";async function s(e){try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.type,message:e.message,severity:e.severity||"error",userId:e.userId,url:window.location.href,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,metadata:e.metadata?JSON.stringify(e.metadata):void 0})})}catch{console.error("Error reporter failed:",e.message)}}function r(){return!navigator.onLine}t.d(a,{s9:function(){return r},wz:function(){return n},DV:function(){return d},Pe:function(){return c}});let i={OFFLINE:"ƒ∞nternet baƒülantƒ±nƒ±z yok. L\xfctfen baƒülantƒ±nƒ±zƒ± kontrol edin.",TIMEOUT:"Sunucu yanƒ±t vermedi. L\xfctfen tekrar deneyin.",SERVER_ERROR:"Sunucu hatasƒ± olu≈ütu. L\xfctfen daha sonra tekrar deneyin.",NETWORK_ERROR:"Baƒülantƒ± hatasƒ±. L\xfctfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.",UNAUTHORIZED:"Oturum s\xfcreniz doldu. L\xfctfen tekrar giri≈ü yapƒ±n.",FORBIDDEN:"Bu i≈ülem i\xe7in yetkiniz yok.",NOT_FOUND:"ƒ∞stenen kaynak bulunamadƒ±.",RATE_LIMITED:"\xc7ok fazla istek g\xf6nderdiniz. L\xfctfen biraz bekleyin.",UNKNOWN:"Beklenmeyen bir hata olu≈ütu."};async function l(e,a,t){let l=new AbortController,n=setTimeout(()=>l.abort(),t);try{let t=await fetch(e,{...a,signal:l.signal,headers:{"Content-Type":"application/json",...a.headers}});clearTimeout(n);let r=null,d=t.headers.get("content-type");if(d?.includes("application/json"))try{r=await t.json()}catch{r=null}if(!t.ok){let a=r?.error||r?.message||function(e,a){switch(e){case 401:return i.UNAUTHORIZED;case 403:return i.FORBIDDEN;case 404:return i.NOT_FOUND;case 429:return i.RATE_LIMITED;case 500:case 502:case 503:case 504:return i.SERVER_ERROR;default:return i.UNKNOWN}}(t.status);return t.status>=500&&s({type:"api_error",message:`API ${t.status}: ${e}`,severity:"error",metadata:{url:e,status:t.status,errorMsg:a}}),{data:null,error:a,status:t.status,ok:!1,isOffline:!1,isTimeout:!1}}return{data:r,error:null,status:t.status,ok:!0,isOffline:!1,isTimeout:!1}}catch(e){if(clearTimeout(n),"AbortError"===e.name)return{data:null,error:i.TIMEOUT,status:0,ok:!1,isOffline:!1,isTimeout:!0};return{data:null,error:i.NETWORK_ERROR,status:0,ok:!1,isOffline:r(),isTimeout:!1}}}async function n(e,a={}){let{timeout:t=1e4,retries:s=2,retryDelay:n=1e3,...d}=a;if(r())return{data:null,error:i.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};let c=null;for(let a=0;a<=s;a++){if(a>0&&(await new Promise(e=>setTimeout(e,n)),r()))return{data:null,error:i.OFFLINE,status:0,ok:!1,isOffline:!0,isTimeout:!1};if((c=await l(e,d,t)).ok||401===c.status||403===c.status||404===c.status||429===c.status)break}return c}async function d(e,a){return n(e,{...a,method:"GET"})}async function c(e,a,t){return n(e,{...t,method:"POST",body:a?JSON.stringify(a):void 0})}},65522:function(e,a,t){"use strict";t.d(a,{cn:function(){return i}});var s=t(32191),r=t(23607);function i(...e){return(0,r.m6)((0,s.W)(e))}}},function(e){e.O(0,[1791,5558,0,8001,6470,496,7246,2717,8392,2386,7156,1744],function(){return e(e.s=46176)}),_N_E=e.O()}]);