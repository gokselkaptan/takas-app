"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4671],{4671:function(e,t,s){s.r(t),s.d(t,{FloatingActionButton:function(){return M},MobileBottomNavigation:function(){return S},MobileTopNavigation:function(){return D},useBodyScrollLock:function(){return A}});var a=s(15444),r=s(79047),l=s(75762),i=s(25076),n=s(39429),o=s(25422),d=s(4693),c=s(78503),u=s(63144),m=s(63751),p=s(97480),h=s(65407),f=s(88913),x=s(25020),g=s(30199),b=s(53492),v=s(41084),w=s(48001),k=s(82717),y=s(89300);let j={tr:"T\xfcrk\xe7e",en:"English",es:"Espa\xf1ol",ca:"Catal\xe0"},N={tr:{flag:"/images/flags/tr.svg",code:"TR"},en:{flag:"/images/flags/gb.svg",code:"EN"},es:{flag:"/images/flags/es.svg",code:"ES"},ca:{flag:"/images/flags/ca.svg",code:"CA"}},C={tr:{home:"Anasayfa",offers:"Sana \xd6zel",messages:"Mesajlar",profile:"Profilim",forYou:"\xd6neriler",addProduct:"Ekle",search:"Ara",favorites:"Favorilerim",swaps:"TakaslarÄ±m",products:"\xdcr\xfcnler"},en:{home:"Home",offers:"Offers",messages:"Messages",profile:"Profile",forYou:"For You",addProduct:"Add",search:"Search",favorites:"Favorites",swaps:"My Swaps",products:"Products"},es:{home:"Inicio",offers:"Ofertas",messages:"Mensajes",profile:"Perfil",forYou:"Para Ti",addProduct:"A\xf1adir",search:"Buscar",favorites:"Favoritos",swaps:"Intercambios",products:"Productos"},ca:{home:"Inici",offers:"Ofertes",messages:"Missatges",profile:"Perfil",forYou:"Per a Tu",addProduct:"Afegir",search:"Cerca",favorites:"Favorits",swaps:"Intercanvis",products:"Productes"}};function E({className:e=""}){return(0,a.jsxs)("svg",{viewBox:"0 0 32 32",className:e,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M26 18 Q16 8, 6 14",stroke:"#8B5CF6",strokeWidth:"3",strokeLinecap:"round",fill:"none"}),(0,a.jsx)("path",{d:"M6 14 L10 12 M6 14 L9 18",stroke:"#8B5CF6",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,a.jsx)("path",{d:"M6 20 Q16 28, 26 22",stroke:"#F59E0B",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"})]})}function D(){let e=(0,r.useRouter)(),t=(0,r.usePathname)(),{data:s,status:h}=(0,l.useSession)(),{t:f,language:x,setLanguage:g}=(0,k.Z)(),[b,C]=(0,y.useState)(!1),[D,M]=(0,y.useState)(!1),[S,A]=(0,y.useState)(!1);(0,y.useEffect)(()=>{C(window.history.length>1)},[t]),(0,y.useEffect)(()=>{M(!1)},[t]),(0,y.useEffect)(()=>{let e=()=>M(!1);return window.addEventListener("closeMobileMenu",e),()=>window.removeEventListener("closeMobileMenu",e)},[]);let P="/"===t,F="authenticated"===h&&s,I=[{label:f("mySwaps"),href:"/takaslarim",icon:"\uD83D\uDD04",requiresAuth:!0},{label:f("serviceSwap"),href:"/hizmet-takasi",icon:"\uD83E\uDD1D"},{label:f("wishBoard"),href:"/istek-panosu",icon:"\uD83D\uDCCB"},{label:f("communities"),href:"/topluluk",icon:"\uD83D\uDC65"},{label:f("profile"),href:"/profil",icon:"\uD83D\uDC64",requiresAuth:!0},{label:f("products"),href:"/urunler",icon:"\uD83D\uDCE6"},{label:`ðŸŒ ${f("exploreGlobal")}`,href:"/global",icon:"\uD83C\uDF0D"},{label:f("exploreHowItWorks"),href:"/nasil-calisir",icon:"\uD83D\uDCD6"},{label:f("exploreFaq"),href:"/sss",icon:"â“"},{label:f("exploreContact"),href:"/iletisim",icon:"\uD83D\uDCE7"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[60] bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-b border-gray-100 dark:border-slate-700 safe-area-top",children:(0,a.jsx)("div",{className:"flex items-center justify-between px-4 h-12",children:P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-lg font-black",children:[(0,a.jsx)("span",{className:"bg-gradient-to-r from-purple-600 via-blue-500 to-cyan-400 bg-clip-text text-transparent",children:"TAKAS"}),(0,a.jsx)("span",{className:"text-purple-700",children:"-"}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent",children:"A"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,a.jsx)("button",{onClick:()=>e.push("/urunler"),className:"p-2 rounded-lg hover:bg-purple-50 active:bg-purple-100 text-purple-500",title:"\xdcr\xfcn Ara","aria-label":"\xdcr\xfcn Ara",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsx)(v.default,{href:F?"/urun-ekle":"/giris",className:"p-2 rounded-lg hover:bg-green-50 active:bg-green-100 text-emerald-600",title:"\xdcr\xfcn Ekle",children:(0,a.jsx)(n.Z,{className:"w-6 h-6"})}),(0,a.jsx)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("openVisualSearch")),className:"p-2 rounded-lg hover:bg-indigo-50 active:bg-indigo-100 text-indigo-500",title:"G\xf6rsel Arama",children:(0,a.jsx)(o.Z,{className:"w-6 h-6"})}),(0,a.jsx)(v.default,{href:F?"/profil":"/giris",className:"p-2 rounded-lg hover:bg-purple-50 active:bg-purple-100 text-purple-600",title:f(F?"profile":"login"),children:(0,a.jsx)(d.Z,{className:"w-6 h-6"})}),(0,a.jsx)("button",{onClick:()=>M(!D),className:"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200 text-gray-700",title:"tr"===x?"Men\xfc":"Menu","aria-label":"tr"===x?"Men\xfc":"Menu",children:(0,a.jsx)(c.Z,{className:"w-6 h-6"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-1 px-2 py-1.5 rounded-lg hover:bg-purple-50 active:bg-purple-100 transition-colors","aria-label":f("back"),children:[(0,a.jsx)(E,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm font-medium text-purple-600",children:f("back")})]}),(0,a.jsx)("div",{className:"flex-1 flex justify-center",children:(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-800 dark:text-white truncate max-w-[180px]",children:function(e,t="tr"){if(e.startsWith("/urun/")){let e={tr:"\xdcr\xfcn DetayÄ±",en:"Product Details",es:"Detalles del Producto",ca:"Detalls del Producte"};return e[t]||e.tr}let s={"/urunler":{tr:"\xdcr\xfcnler",en:"Products",es:"Productos",ca:"Productes"},"/profil":{tr:"Profilim",en:"My Profile",es:"Mi Perfil",ca:"El Meu Perfil"},"/urun-ekle":{tr:"\xdcr\xfcn Ekle",en:"Add Product",es:"A\xf1adir Producto",ca:"Afegir Producte"},"/harita":{tr:"Harita",en:"Map",es:"Mapa",ca:"Mapa"},"/teslim-noktalari":{tr:"Teslim NoktalarÄ±",en:"Delivery Points",es:"Puntos de Entrega",ca:"Punts de Lliurament"},"/hakkimizda":{tr:"HakkÄ±mÄ±zda",en:"About Us",es:"Sobre Nosotros",ca:"Sobre Nosaltres"},"/iletisim":{tr:"Ä°letiÅŸim",en:"Contact",es:"Contacto",ca:"Contacte"},"/nasil-calisir":{tr:"NasÄ±l \xc7alÄ±ÅŸÄ±r",en:"How It Works",es:"C\xf3mo Funciona",ca:"Com Funciona"},"/sss":{tr:"SSS",en:"FAQ",es:"FAQ",ca:"FAQ"},"/barcelona":{tr:"Barcelona",en:"Barcelona",es:"Barcelona",ca:"Barcelona"},"/kurumsal":{tr:"Kurumsal",en:"Business",es:"Empresas",ca:"Empreses"},"/takas-firsatlari":{tr:"Takas FÄ±rsatlarÄ±",en:"Swap Opportunities",es:"Oportunidades de Intercambio",ca:"Oportunitats d'Intercanvi"},"/davet":{tr:"Davet Et",en:"Invite Friends",es:"Invitar Amigos",ca:"Convidar Amics"},"/giris":{tr:"GiriÅŸ",en:"Login",es:"Iniciar Sesi\xf3n",ca:"Iniciar Sessi\xf3"},"/kayit":{tr:"KayÄ±t",en:"Register",es:"Registrarse",ca:"Registrar-se"},"/global":{tr:"Global",en:"Global",es:"Global",ca:"Global"},"/admin":{tr:"Admin",en:"Admin",es:"Admin",ca:"Admin"},"/ambassador":{tr:"El\xe7i",en:"Ambassador",es:"Embajador",ca:"Ambaixador"},"/favoriler":{tr:"Favorilerim",en:"My Favorites",es:"Mis Favoritos",ca:"Els Meus Favorits"},"/mesajlar":{tr:"MesajlarÄ±m",en:"My Messages",es:"Mis Mensajes",ca:"Els Meus Missatges"},"/takaslarim":{tr:"TakaslarÄ±m",en:"My Swaps",es:"Mis Intercambios",ca:"Els Meus Intercanvis"},"/teklifler":{tr:"Teklifler",en:"Offers",es:"Ofertas",ca:"Ofertes"},"/sifremi-unuttum":{tr:"Åžifremi Unuttum",en:"Forgot Password",es:"Olvid\xe9 mi Contrase\xf1a",ca:"He Oblidat la Contrasenya"},"/hizmet-takasi":{tr:"Hizmet TakasÄ±",en:"Service Swap",es:"Intercambio de Servicios",ca:"Intercanvi de Serveis"},"/istek-panosu":{tr:"Ä°stek Panosu",en:"Wish Board",es:"Tabl\xf3n de Deseos",ca:"Tauler de Desitjos"},"/topluluk":{tr:"Topluluk",en:"Community",es:"Comunidad",ca:"Comunitat"},"/topluluklar":{tr:"Topluluklar",en:"Communities",es:"Comunidades",ca:"Comunitats"},"/premium":{tr:"Premium",en:"Premium",es:"Premium",ca:"Premium"}}[e];return s?s[t]||s.tr:"TAKAS-A"}(t,x)})}),(0,a.jsx)("button",{onClick:()=>M(!D),className:"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200 text-gray-700",title:"Men\xfc","aria-label":"Men\xfc",children:(0,a.jsx)(c.Z,{className:"w-6 h-6"})})]})})}),D&&(0,a.jsx)("div",{className:"md:hidden fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm",onClick:()=>M(!1),children:(0,a.jsx)("div",{className:"absolute top-12 right-0 w-64 max-h-[calc(100vh-60px)] bg-white dark:bg-slate-800 rounded-bl-2xl shadow-xl overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"py-2",children:[I.map(e=>(0,a.jsxs)(v.default,{href:e.requiresAuth&&!F?"/giris":e.href,className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>M(!1),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-200 font-medium",children:e.label})]},e.href)),(0,a.jsx)("div",{className:"border-t border-gray-100 dark:border-slate-700 my-2"}),(0,a.jsxs)("div",{className:"px-4 py-2",children:[(0,a.jsxs)("button",{onClick:()=>A(!S),className:"flex items-center justify-between w-full py-2 px-3 rounded-lg bg-purple-50 dark:bg-slate-700 hover:bg-purple-100 dark:hover:bg-slate-600 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),(0,a.jsx)("div",{className:"w-5 h-3.5 relative overflow-hidden rounded-sm shadow-sm",children:(0,a.jsx)(w.default,{src:N[x].flag,alt:x,fill:!0,className:"object-cover",onError:e=>{e.target.style.display="none"}})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-purple-800 dark:text-purple-300",children:j[x]})]}),(0,a.jsx)(m.Z,{className:`w-4 h-4 text-purple-600 dark:text-purple-400 transition-transform ${S?"rotate-180":""}`})]}),S&&(0,a.jsx)("div",{className:"mt-2 space-y-1",children:Object.keys(j).map(e=>(0,a.jsxs)("button",{onClick:()=>{g(e),A(!1)},className:`flex items-center gap-3 w-full px-3 py-2 rounded-lg text-sm font-medium transition-all ${x===e?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200"}`,children:[(0,a.jsx)("div",{className:"w-6 h-4 relative overflow-hidden rounded shadow-sm border dark:border-slate-600",children:(0,a.jsx)(w.default,{src:N[e].flag,alt:e,fill:!0,className:"object-cover",onError:e=>{e.target.style.display="none"}})}),(0,a.jsx)("span",{children:j[e]}),x===e&&(0,a.jsx)("span",{className:"ml-auto text-purple-500",children:"âœ“"})]},e))})]}),(0,a.jsx)("div",{className:"border-t border-gray-100 dark:border-slate-700 my-2"}),F?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("button",{onClick:()=>{M(!1),(0,l.signOut)({callbackUrl:"/"})},className:"flex items-center gap-3 px-4 py-3 w-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-red-500"}),(0,a.jsx)("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"tr"===x?"\xc7Ä±kÄ±ÅŸ Yap":"en"===x?"Log Out":"es"===x?"Cerrar Sesi\xf3n":"Tancar Sessi\xf3"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.default,{href:"/giris",className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>M(!1),children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDD11"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-200 font-medium",children:f("login")})]}),(0,a.jsxs)(v.default,{href:"/kayit",className:"flex items-center gap-3 px-4 py-3 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",onClick:()=>M(!1),children:[(0,a.jsx)("span",{className:"text-xl",children:"âœ¨"}),(0,a.jsx)("span",{className:"text-purple-600 dark:text-purple-400 font-semibold",children:f("register")})]})]})]})})})]})}function M(){return null}function S(){let e=(0,r.usePathname)(),t=(0,r.useRouter)(),{data:s}=(0,l.useSession)(),{language:i}=(0,k.Z)(),n=C[i],[o,d]=(0,y.useState)(0),[c,u]=(0,y.useState)(0),[m,p]=(0,y.useState)(!1),[v,w]=(0,y.useState)(!0),[j,N]=(0,y.useState)(!1),E=(0,y.useRef)(0);(0,y.useEffect)(()=>{let e=()=>N(!0),t=()=>N(!1);return window.addEventListener("hideBottomNav",e),window.addEventListener("showBottomNav",t),()=>{window.removeEventListener("hideBottomNav",e),window.removeEventListener("showBottomNav",t)}},[]),(0,y.useEffect)(()=>{let e=()=>{if(j)return;let e=window.scrollY,t=e-E.current;if(!(10>Math.abs(t))){if(e<50){w(!0),E.current=e;return}t>0&&v?w(!1):t<0&&!v&&w(!0),E.current=e}};return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[v,j]),(0,y.useEffect)(()=>{let e=()=>{p(!0)},t=()=>{p(!1)};return window.addEventListener("pwaInstallStarted",e),window.addEventListener("pwaInstallEnded",t),()=>{window.removeEventListener("pwaInstallStarted",e),window.removeEventListener("pwaInstallEnded",t)}},[]);let[D,M]=(0,y.useState)(0),[S,A]=(0,y.useState)(0);(0,y.useEffect)(()=>{if(!s?.user?.email)return;let e=setTimeout(P,1e3),t=setInterval(P,6e4);return()=>{clearTimeout(e),clearInterval(t)}},[s]),(0,y.useEffect)(()=>{s?.user?.email&&e.includes("/profil")&&P()},[e,s]);let P=async()=>{try{let e=await fetch("/api/messages?unreadOnly=true");if(e.ok){let t=await e.json();d(t.unreadCount||0)}let t=await fetch("/api/swap-requests?status=pending");if(t.ok){let e=await t.json();u(e.requests?.length||0)}let s=await fetch("/api/swap-requests?status=pending&role=owner&count=true");if(s.ok){let e=await s.json();M(e.count||0)}let a=await fetch("/api/swap-requests?status=active_count");if(a.ok){let e=await a.json();A(e.count||0)}}catch(e){console.error("Notification fetch error:",e)}},F=[{id:"favorites",label:n.favorites,icon:h.Z,path:"/favoriler",requiresAuth:!0},{id:"takas",label:"tr"===i?"Takas Merkezi":"Swap Center",icon:f.Z,path:"/takas-firsatlari",requiresAuth:!0,badge:D>0?D:null},{id:"home",label:n.home,icon:x.Z,path:"/",requiresAuth:!1,isCenter:!0},{id:"messages",label:n.messages,icon:g.Z,path:"/profil?tab=messages",requiresAuth:!0,badge:o>0?o:null},{id:"foryou",label:n.forYou,icon:b.Z,path:"/oneriler",requiresAuth:!0}],I=e=>{"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(30),window.dispatchEvent(new CustomEvent("closeMobileMenu")),e.requiresAuth&&!s?.user?t.push("/giris"):t.push(e.path)},T=t=>{if("/"===t)return"/"===e;if(t.includes("?")){let s=t.split("?")[0];return e===s||e.startsWith(s)}return e===t||e.startsWith(t)};return m?null:(0,a.jsxs)(a.Fragment,{children:[s?.user&&S>0&&v&&!j&&(0,a.jsx)("div",{onClick:()=>t.push("/takaslarim"),className:"md:hidden fixed bottom-[76px] left-3 right-3 z-[55] cursor-pointer active:scale-[0.98] transition-transform",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl px-4 py-2.5 flex items-center justify-between shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-base animate-pulse",children:"\uD83D\uDD04"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-sm font-bold",children:[S," Aktif Takas"]}),(0,a.jsx)("span",{className:"text-[10px] text-white/70 ml-2",children:"Ä°ÅŸlem bekliyor"})]})]}),(0,a.jsx)("span",{className:"text-xs bg-white/20 px-2.5 py-1 rounded-full font-medium",children:"Devam Et â†’"})]})}),(0,a.jsxs)("nav",{className:`md:hidden fixed bottom-0 left-0 right-0 z-[60] safe-area-bottom transition-transform duration-300 ease-out ${v&&!j?"translate-y-0":"translate-y-full"}`,style:{background:"linear-gradient(135deg, #F97316 0%, #EA580C 50%, #C2410C 100%)",boxShadow:v?"0 -4px 20px rgba(249, 115, 22, 0.3)":"none"},children:[(0,a.jsx)("div",{className:"absolute top-0 left-4 right-4 h-[1px] bg-gradient-to-r from-transparent via-white/30 to-transparent"}),(0,a.jsx)("div",{className:"flex items-center justify-around h-[72px] px-1 pb-1",children:F.map(e=>{let t=e.icon,s=T(e.path),r=!0===e.isCenter;return(0,a.jsxs)("button",{onClick:()=>I(e),className:`
                  flex flex-col items-center justify-center flex-1 h-full relative 
                  transition-all duration-200 rounded-xl mx-0.5
                  ${s?"text-white":"text-white/70 active:text-white active:bg-white/10"}
                `,children:[s&&!r&&(0,a.jsx)("div",{className:"absolute inset-1 rounded-xl bg-white/20",style:{boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2)"}}),r?(0,a.jsx)("div",{className:`relative z-10 -mt-5 w-14 h-14 rounded-full flex items-center justify-center ${s?"bg-white shadow-lg":"bg-white/90 shadow-md"}`,style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15), 0 0 0 3px rgba(249, 115, 22, 0.5)"},children:(0,a.jsx)(t,{className:`w-7 h-7 ${s?"text-orange-600":"text-orange-500"}`,strokeWidth:2.5})}):(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(t,{className:`w-6 h-6 transition-all ${s?"stroke-[2.5] scale-110":"stroke-[1.8]"}`}),e.badge&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 min-w-[20px] h-[20px] bg-white text-orange-600 text-[11px] font-bold rounded-full flex items-center justify-center px-1 shadow-lg",children:e.badge>99?"99+":e.badge})]}),(0,a.jsx)("span",{className:`text-xs relative z-10 transition-all ${r?"mt-1":"mt-1.5"} ${s?"font-bold text-white":"font-medium text-white/80"}`,children:e.label})]},e.id)})})]})]})}function A(e){(0,y.useEffect)(()=>{if(e){let e=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${e}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden",document.body.style.width="100%"}else{let e=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",document.body.style.width="",e&&window.scrollTo(0,-1*parseInt(e||"0"))}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",document.body.style.width=""}},[e])}}}]);