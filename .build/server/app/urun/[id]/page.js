(()=>{var e={};e.id=7699,e.ids=[7699],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},54401:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(46586),t(32314),t(9126),t(84131),t(24450);var r=t(36576),s=t(72007),l=t(21818),i=t.n(l),n=t(88897),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(a,d);let o=["",{children:["urun",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,46586)),"/home/ubuntu/takas-a-kodlar/nextjs_space/app/urun/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32314)),"/home/ubuntu/takas-a-kodlar/nextjs_space/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,9126)),"/home/ubuntu/takas-a-kodlar/nextjs_space/app/error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,84131)),"/home/ubuntu/takas-a-kodlar/nextjs_space/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,24450)),"/home/ubuntu/takas-a-kodlar/nextjs_space/app/not-found.tsx"]}],c=["/home/ubuntu/takas-a-kodlar/nextjs_space/app/urun/[id]/page.tsx"],x="/urun/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/urun/[id]/page",pathname:"/urun/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},36922:(e,a,t)=>{Promise.resolve().then(t.bind(t,97342))},97342:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>$});var r=t(62901),s=t(24383),l=t(84374),i=t(84700),n=t(75115),d=t(62392),o=t(80412),c=t(13943),x=t(35825),m=t(75909),u=t(83545),p=t(96527),g=t(60004),h=t(97107),b=t(23422),f=t(70818),y=t(76021),j=t(91334),k=t(9233),N=t(15934),v=t(59458),w=t(21391),D=t(62451),C=t(5619),S=t(16501),P=t(23094),V=t(42594),z=t(32614),T=t(10333),A=t(26482),E=t(91464),Z=t(79046),M=t(54936);t(66596);var B=t(76008),R=t(68391),O=t(48015),_=t(5702),F=t(40140);let G={new:{tr:"Sƒ±fƒ±r",en:"New",es:"Nuevo",ca:"Nou"},like_new:{tr:"Sƒ±fƒ±r Gibi",en:"Like New",es:"Como nuevo",ca:"Com nou"},good:{tr:"ƒ∞yi",en:"Good",es:"Bueno",ca:"Bo"},fair:{tr:"Orta",en:"Fair",es:"Regular",ca:"Regular"}};function $(){(0,l.useParams)();let e=(0,l.useRouter)(),{data:a}=(0,i.useSession)(),{t,language:$}=(0,M.Z)(),[I,q]=(0,s.useState)(null),[K,L]=(0,s.useState)(!0),[H,U]=(0,s.useState)(""),[Y,J]=(0,s.useState)(0),[W,Q]=(0,s.useState)(!1),[X,ee]=(0,s.useState)([]),[ea,et]=(0,s.useState)(""),[er,es]=(0,s.useState)(!1),[el,ei]=(0,s.useState)(!1),[en,ed]=(0,s.useState)(""),[eo,ec]=(0,s.useState)("swap"),[ex,em]=(0,s.useState)(!1),[eu,ep]=(0,s.useState)(!1),[eg,eh]=(0,s.useState)(!1),[eb,ef]=(0,s.useState)([]),[ey,ej]=(0,s.useState)([]),[ek,eN]=(0,s.useState)(!1),[ev,ew]=(0,s.useState)(0),[eD,eC]=(0,s.useState)("valor_diff"),[eS,eP]=(0,s.useState)(0),eV=e=>{ej(a=>{let t=a.includes(e)?a.filter(a=>a!==e):[...a,e];if(I){let e=eb.filter(e=>t.includes(e.id)).reduce((e,a)=>e+a.valorPrice,0)-I.valorPrice;eC("valor_diff"),e>0?(ew(0),eP(e)):(e<0?ew(Math.abs(e)):ew(0),eP(0))}return t})},ez=eb.filter(e=>ey.includes(e.id)).reduce((e,a)=>e+a.valorPrice,0),eT=()=>{if(!I)return null;let e=I.valorPrice,a=""===ev?0:Number(ev),t=ez+a,r=e-t,s=Math.round(.04*t);return{targetPrice:e,myProductsValue:ez,myValorOffer:a,totalOffer:t,difference:r,estimatedFee:s,netToSeller:t-s,isBalanced:Math.abs(r)<=.05*e,isExceeding:r<0,isShort:r>0}},eA=(0,s.useRef)(null),[eE,eZ]=(0,s.useState)(!1),[eM,eB]=(0,s.useState)(null),[eR,eO]=(0,s.useState)(null),[e_,eF]=(0,s.useState)(0),[eG,e$]=(0,s.useState)(!1),[eI,eq]=(0,s.useState)(null),[eK,eL]=(0,s.useState)(null),[eH,eU]=(0,s.useState)(!1),[eY,eJ]=(0,s.useState)(!1),[eW,eQ]=(0,s.useState)(3),[eX,e0]=(0,s.useState)(!1),[e1,e2]=(0,s.useState)(!1),[e5,e3]=(0,s.useState)({title:"",description:"",condition:"",editReason:""}),[e4,e6]=(0,s.useState)(!1),[e8,e7]=(0,s.useState)(""),[e9,ae]=(0,s.useState)(null),[aa,at]=(0,s.useState)(""),[ar,as]=(0,s.useState)(""),[al,ai]=(0,s.useState)(!1),[an,ad]=(0,s.useState)(""),[ao,ac]=(0,s.useState)(""),[ax,am]=(0,s.useState)(null),au=(0,s.useRef)(null);(0,_.useBodyScrollLock)(el||W||eY||eE);let ap=async()=>{if(I){if(!e9&&!ar.trim()){ac("L\xfctfen oda fotoƒürafƒ± y\xfckleyin veya oda a\xe7ƒ±klamasƒ± girin");return}ai(!0),ac(""),ad("");try{let e=new FormData;e9&&e.append("environmentImage",e9),e.append("productImage",I.images[0]),e.append("productTitle",I.title),e.append("category",I.category.name.toLowerCase()),ar&&e.append("roomDescription",ar);let a=await fetch("/api/ai-visualize",{method:"POST",body:e}),t=await a.json();if(!a.ok){ac(t.error||"G\xf6rselle≈ütirme olu≈üturulamadƒ±");return}ad(t.imageUrl),eQ(t.remainingCredits)}catch(e){ac("Bir hata olu≈ütu, l\xfctfen tekrar deneyin")}finally{ai(!1)}}},ag=()=>{ae(null),at(""),as(""),ad(""),ac("")},ah=async()=>{eN(!0);try{let e=await fetch("/api/products?mine=true");if(e.ok){let a=await e.json();ef(a.products||[])}}catch(e){console.error("My products fetch error:",e)}finally{eN(!1)}},ab=async()=>{if(I)try{let e=await fetch(`/api/messages?userId=${I.user.id}&productId=${I.id}`);if(e.ok){let a=await e.json();ee(a)}}catch(e){console.error("Messages fetch error:",e)}},af=async()=>{if(ea.trim()&&I&&!er){es(!0);try{let e=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:I.user.id,content:ea,productId:I.id})});if(e.ok){let a=await e.json();ee(e=>[...e,a]),et("")}}catch(e){console.error("Send message error:",e)}finally{es(!1)}}},ay=async()=>{if(I&&!ex){if("question"===eo){em(!0),U("");try{let e=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiverId:I.user.id,content:en,productId:I.id})});if(e.ok)eh(!0),setTimeout(()=>{ei(!1),eh(!1),ed(""),Q(!0),ab()},2e3);else{let a=await e.json();U(a.error||"Mesaj g\xf6nderilemedi")}}catch(e){console.error("Send question error:",e),U("Bir hata olu≈ütu")}finally{em(!1)}return}if(eK&&!eK.canAfford){U(`Yetersiz bakiye. Teminat i\xe7in ${eK.depositRequired} Valor gerekli.`);return}em(!0),U("");try{let e=await fetch("/api/swap-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:I.id,message:(()=>{let e=en||"";if(ey&&ey.length>0){let a=eb.filter(e=>ey.includes(e.id)).reduce((e,a)=>e+a.valorPrice,0),t=a-I.valorPrice;if(e+=`

---
üì¶ Teklif edilen \xfcr\xfcnler (${ey.length} adet, toplam ${a}V):
`+eb.filter(e=>ey.includes(e.id)).map(e=>`‚Ä¢ ${e.title} (${e.valorPrice}V)`).join("\n"),"direct_swap"===eD)e+=`

ü§ù Birebir takas teklifi ‚Äî deƒüer farkƒ± g\xf6zetilmeden \xfcr\xfcnlerin deƒüi≈üimi isteniyor.`;else if("valor_diff"===eD&&t>0)e+=`

üí∞ Benim \xfcr\xfcnlerim ${t}V daha deƒüerli. Bu farkƒ±n Valor olarak \xf6denmesini talep ediyorum.`;else if("valor_diff"===eD&&t<0){let a=""===ev?Math.abs(t):Number(ev);e+=`

üí∞ Ek ${a}V Valor \xf6demeyi teklif ediyorum (fark kapatma).`}else"request_product"===eD&&(t>0?e+=`

üì¶ \xdcr\xfcnlerim ${t}V daha deƒüerli. Fark i\xe7in ek \xfcr\xfcn sunmanƒ±zƒ± rica ediyorum.`:t<0?e+=`

üì¶ Farkƒ± kapatmak i\xe7in ek \xfcr\xfcn eklemeyi d\xfc≈ü\xfcn\xfcyorum. Detaylarƒ± konu≈üalƒ±m.`:e+=`

üì¶ Teklifi zenginle≈ütirmek i\xe7in ek \xfcr\xfcn \xf6neriyorum.`)}return e.trim()})(),offeredProductId:ey[0]||null,offeredValor:"direct_swap"===eD?0:""===ev?I.valorPrice:Number(ev)})}),a=await e.json();e.ok?(ep(!0),setTimeout(()=>{ei(!1),ep(!1),ed(""),ej([]),eL(null)},2e3)):a.requiresPhoneVerification?U("Takas yapabilmek i\xe7in telefon numaranƒ±zƒ± doƒürulamanƒ±z gerekiyor. Profil sayfasƒ±ndan doƒürulama yapabilirsiniz."):U(a.error||"Bir hata olu≈ütu")}catch(e){U("Talep g\xf6nderilirken hata olu≈ütu")}finally{em(!1)}}},aj=async(e,a)=>{if(I){em(!0),U("");try{let{data:t,error:r}=await (0,F.wz)("/api/swap-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:I.id,offeredProductId:e,message:e?`\xdcr\xfcn\xfcmle takas teklifi (Valor fark: ${a})`:`${a} Valor ile takas teklifi`,pendingValorAmount:a>0?a:I.valorPrice,quickOffer:!0}),timeout:15e3});if(r){U(r),em(!1);return}t&&(t.requiresPhoneVerification?U("Takas yapabilmek i\xe7in telefon numaranƒ±zƒ± doƒürulamanƒ±z gerekiyor."):t.insufficientBalance?U(`Yetersiz bakiye. ${t.required} Valor gerekli.`):t.swapEligibility?.activeProducts===0?U("Takas teklifi verebilmek i\xe7in \xf6nce en az 1 \xfcr\xfcn eklemeniz gerekiyor."):(ep(!0),eB("success")))}catch(e){console.error("Quick swap error:",e),U("Baƒülantƒ± hatasƒ±. L\xfctfen tekrar deneyin.")}finally{em(!1)}}},ak=e=>{let a=new Date(e),t=Math.floor(Math.abs(new Date().getTime()-a.getTime())/864e5);return 0===t?"tr"===$?"Bug\xfcn":"Today":1===t?"tr"===$?"D\xfcn":"Yesterday":t<7?"tr"===$?`${t} g\xfcn \xf6nce`:`${t} days ago`:a.toLocaleDateString("tr"===$?"tr-TR":"en-US")};if(K)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-frozen-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"\xdcr\xfcn y\xfckleniyor..."})]})});if(H||!I)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(x.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-2",children:"\xdcr\xfcn Bulunamadƒ±"}),r.jsx("p",{className:"text-gray-600 mb-4",children:H||"Bu \xfcr\xfcn mevcut deƒüil veya kaldƒ±rƒ±lmƒ±≈ü olabilir."}),(0,r.jsxs)(d.default,{href:"/urunler",className:"inline-flex items-center gap-2 px-4 py-2 bg-frozen-500 text-white rounded-lg font-semibold hover:bg-frozen-600 transition-colors",children:[r.jsx(m.Z,{className:"w-4 h-4"}),"\xdcr\xfcnlere D\xf6n"]})]})});let aN=a?.user?.email&&I.user.id===a.user?.id;return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-50 pb-20 md:pb-12",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[(0,r.jsxs)("button",{onClick:()=>e.back(),className:"hidden md:flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[r.jsx(m.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Geri D\xf6n"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative aspect-square rounded-2xl overflow-hidden bg-white shadow-lg",children:[I.images.length>0?r.jsx(n.default,{src:I.images[Y],alt:I.title,fill:!0,className:"object-cover",priority:!0}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:r.jsx(u.Z,{className:"w-24 h-24 text-gray-300"})}),I.images.length>1&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:()=>J(e=>0===e?I.images.length-1:e-1),className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-gray-800/80 shadow-lg flex items-center justify-center hover:bg-gray-900/90 transition-colors",children:r.jsx(p.Z,{className:"w-6 h-6 text-white"})}),r.jsx("button",{onClick:()=>J(e=>e===I.images.length-1?0:e+1),className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-gray-800/80 shadow-lg flex items-center justify-center hover:bg-gray-900/90 transition-colors",children:r.jsx(g.Z,{className:"w-6 h-6 text-white"})})]}),I.images.length>1&&(0,r.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-3 py-1 rounded-full bg-black/60 text-white text-sm",children:[Y+1," / ",I.images.length]}),r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx(B._,{productId:I.id,initialCount:I._count?.favorites||0,size:"lg",showCount:!0})})]}),I.images.length>1&&r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:I.images.map((e,a)=>r.jsx("button",{onClick:()=>J(a),className:`relative w-20 h-20 rounded-lg overflow-hidden flex-shrink-0 border-2 transition-all ${a===Y?"border-frozen-500":"border-transparent"}`,children:r.jsx(n.default,{src:e,alt:"",fill:!0,className:"object-cover"})},a))})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:I.translatedTitle||I.title}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[a?.user&&(I.user?.id===a.user.id||eX)&&(0,r.jsxs)("button",{onClick:()=>e2(!e1),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"D\xfczenle"]}),r.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:r.jsx(h.Z,{className:"w-6 h-6 text-gray-500"})})]})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center flex-wrap gap-3",children:[I.isFreeAvailable?r.jsx("div",{className:"px-4 py-2 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:r.jsx("span",{className:"text-2xl font-bold",children:"\uD83C\uDF81 Bedelsiz"})}):(0,r.jsxs)("button",{onClick:()=>e$(!eG),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:from-purple-600 hover:to-blue-600 transition-colors",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold",children:["‚≠ê ",I.valorPrice]}),r.jsx("span",{className:"ml-1 text-sm",children:"Valor"}),r.jsx("span",{className:"text-xs ml-2 opacity-80",children:"‚ìò"})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"new"===I.condition?"bg-green-100 text-green-700":"like_new"===I.condition?"bg-blue-100 text-blue-700":"good"===I.condition?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:I.translatedCondition||G[I.condition]?.[$]||I.condition}),I.acceptsNegotiation&&!I.isFreeAvailable&&r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-700 flex items-center gap-1",children:"\uD83E\uDD1D Pazarlƒ±ƒüa A\xe7ƒ±k"})]}),eG&&eI&&(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border dark:border-gray-700 text-sm animate-in slide-in-from-top-2",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["\uD83D\uDCCD ",eI.city," b\xf6lge fiyatlarƒ±"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[r.jsx("span",{className:"text-xs",children:"\uD83C\uDDF9\uD83C\uDDF7"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-red-700 dark:text-red-300",children:["‚âà ",eI.localPrices.TRY.toLocaleString("tr-TR")," ‚Ç∫"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsx("span",{className:"text-xs",children:"\uD83C\uDDEA\uD83C\uDDFA"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-blue-700 dark:text-blue-300",children:["‚âà ",eI.localPrices.EUR," ‚Ç¨"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("span",{className:"text-xs",children:"\uD83C\uDDFA\uD83C\uDDF8"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-green-700 dark:text-green-300",children:["‚âà ",eI.localPrices.USD," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[r.jsx("span",{className:"text-xs",children:"\uD83C\uDDEC\uD83C\uDDE7"}),(0,r.jsxs)("span",{className:"font-bold text-xs text-yellow-700 dark:text-yellow-300",children:["‚âà ",eI.localPrices.GBP," \xa3"]})]})]}),r.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:eI.explanation})]}),I.aiValorPrice&&(0,r.jsxs)("div",{className:"p-3 rounded-xl bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(b.Z,{className:"w-4 h-4 text-purple-600"}),r.jsx("span",{className:"text-sm font-medium text-purple-800",children:"tr"===$?"AI Deƒüerlendirmesi":"AI Valuation"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-lg font-bold text-purple-700",children:[I.aiValorPrice," Valor"]}),I.valorPrice!==I.aiValorPrice&&(0,r.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded-full ${I.valorPrice>I.aiValorPrice?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:[I.valorPrice>I.aiValorPrice?"+":"",Math.round((I.valorPrice-I.aiValorPrice)/I.aiValorPrice*100),"%"]})]}),I.aiValorReason&&r.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:I.aiValorReason})]}),I.editCount>0&&(0,r.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:["‚úèÔ∏è Bu ilan ",I.editCount," kez d\xfczenlendi",I.lastEditedAt&&(0,r.jsxs)("span",{children:["‚Ä¢ Son: ",new Date(I.lastEditedAt).toLocaleDateString("tr-TR")]})]}),I.lastEditReason&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:['\uD83D\uDCDD "',I.lastEditReason,'"']}),I.editHistory&&I.editHistory.length>0&&(0,r.jsxs)("details",{className:"mt-2",children:[r.jsx("summary",{className:"text-[10px] text-blue-500 cursor-pointer",children:"D\xfczenleme ge\xe7mi≈üi"}),r.jsx("div",{className:"mt-1 space-y-1",children:I.editHistory.map((e,a)=>(0,r.jsxs)("div",{className:"text-[10px] text-gray-500 flex items-center gap-2 flex-wrap",children:[r.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("tr-TR")}),e.reason&&(0,r.jsxs)("span",{children:['‚Äî "',e.reason,'"']}),e.oldValor!==e.newValor&&(0,r.jsxs)("span",{className:e.newValor>e.oldValor?"text-green-600":"text-red-600",children:[e.oldValor,"V ‚Üí ",e.newValor,"V"]})]},a))})]})]})]})]}),e1&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold text-blue-800",children:"\uD83D\uDCDD ƒ∞lanƒ± D\xfczenle"}),r.jsx("button",{onClick:()=>e2(!1),className:"text-gray-400 hover:text-gray-600 text-xl",children:"‚úï"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:"Ba≈ülƒ±k"}),r.jsx("input",{type:"text",value:e5.title,onChange:e=>e3(a=>({...a,title:e.target.value})),className:"w-full p-2 border rounded-lg text-sm",maxLength:100})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:"A\xe7ƒ±klama"}),r.jsx("textarea",{value:e5.description,onChange:e=>e3(a=>({...a,description:e.target.value})),className:"w-full p-2 border rounded-lg text-sm h-24 resize-none",maxLength:2e3})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:"Durum"}),(0,r.jsxs)("select",{value:e5.condition,onChange:e=>e3(a=>({...a,condition:e.target.value})),className:"w-full p-2 border rounded-lg text-sm",children:[r.jsx("option",{value:"new",children:"Sƒ±fƒ±r/Yeni"}),r.jsx("option",{value:"likeNew",children:"Yeni Gibi"}),r.jsx("option",{value:"good",children:"ƒ∞yi"}),r.jsx("option",{value:"fair",children:"Orta"}),r.jsx("option",{value:"poor",children:"K\xf6t\xfc"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"text-xs font-semibold text-gray-600 block mb-1",children:["D\xfczenleme Nedeni ",r.jsx("span",{className:"text-gray-400",children:"(opsiyonel)"})]}),r.jsx("input",{type:"text",value:e5.editReason,onChange:e=>e3(a=>({...a,editReason:e.target.value})),placeholder:"\xd6r: A\xe7ƒ±klama g\xfcncellendi, fotoƒüraf eklendi...",className:"w-full p-2 border rounded-lg text-sm",maxLength:200})]}),e5.condition!==I.condition&&r.jsx("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsx("p",{className:"text-xs text-yellow-700",children:"‚ö†Ô∏è \xdcr\xfcn durumunu deƒüi≈ütirdiƒüiniz i\xe7in Valor deƒüeri yeniden hesaplanacaktƒ±r."})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:async()=>{e6(!0),e7("");try{let e=await fetch(`/api/products/${I.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"edit",title:e5.title,description:e5.description,condition:e5.condition,editReason:e5.editReason})}),a=await e.json();e.ok?(e7(a.valorChanged?`‚úÖ G\xfcncellendi! Valor: ${a.oldValor} ‚Üí ${a.newValor}`:"‚úÖ G\xfcncellendi!"),e2(!1),window.location.reload()):alert(a.error||"Hata olu≈ütu")}catch{alert("Baƒülantƒ± hatasƒ±")}e6(!1)},disabled:e4,className:"flex-1 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold hover:bg-blue-600 disabled:opacity-50",children:e4?"‚è≥ Kaydediliyor...":"\uD83D\uDCBE Deƒüi≈üiklikleri Kaydet"}),r.jsx("button",{onClick:()=>e2(!1),className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200",children:"ƒ∞ptal"})]}),e8&&r.jsx("p",{className:"text-sm text-green-600 font-medium",children:e8})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(f.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[I.district?`${I.district}, `:"",I.city]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(y.Z,{className:"w-4 h-4"}),r.jsx("span",{children:ak(I.createdAt)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(j.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[I.views," ","tr"===$?"g\xf6r\xfcnt\xfclenme":"es"===$?"vistas":"ca"===$?"visualitzacions":"views"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(k.Z,{className:"w-4 h-4"}),r.jsx("span",{children:I.translatedCategory||I.category.translatedName||I.category.name})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(N.Z,{className:"w-5 h-5 text-frozen-500"}),"tr"===$?"\xdcr\xfcn A\xe7ƒ±klamasƒ±":"es"===$?"Descripci\xf3n del Producto":"ca"===$?"Descripci\xf3 del Producte":"Product Description"]}),r.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:I.translatedDescription||I.description})]}),r.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 my-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-xl mt-0.5",children:"\uD83D\uDEE1Ô∏è"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-bold text-green-800 dark:text-green-200 mb-1.5",children:"G\xfcvenli Teslimat Garantisi"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-[11px] text-green-700 dark:text-green-300",children:[r.jsx("span",{className:"flex items-center gap-1",children:"\uD83D\uDD32 QR Kod Doƒürulama"}),r.jsx("span",{className:"flex items-center gap-1",children:"\uD83D\uDD10 6 Haneli Onay Kodu"}),r.jsx("span",{className:"flex items-center gap-1",children:"\uD83D\uDCB0 Valor Teminat Kilidi"}),r.jsx("span",{className:"flex items-center gap-1",children:"\uD83D\uDCF8 Fotoƒüraflƒ± Kanƒ±t"})]})]})]})}),a?.user&&r.jsx(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{ag(),eJ(!0)},className:"w-full bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[r.jsx(b.Z,{className:"w-6 h-6"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("p",{className:"font-bold text-lg",children:"tr"===$?"TAKAS-A Aldƒ±ƒüƒ±m \xdcr\xfcn Nasƒ±l G\xf6r\xfcn\xfcr?":"How Will This Product Look?"}),r.jsx("p",{className:"text-sm opacity-90",children:eX?"‚ú® Admin: Sƒ±nƒ±rsƒ±z kullanƒ±m":eW>0?`üéÅ ${eW} \xfccretsiz hak kaldƒ±`:"\uD83D\uDCB3 Yakƒ±nda TL ile satƒ±n alma!"})]}),r.jsx(v.Z,{className:"w-6 h-6"})]})}),I.usageInfo&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(w.Z,{className:"w-5 h-5 text-frozen-500"}),"tr"===$?"Kullanƒ±m Bilgisi":"es"===$?"Informaci\xf3n de Uso":"ca"===$?"Informaci\xf3 d'\xdas":"Usage Info"]}),r.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:I.usageInfo})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Satƒ±cƒ± Bilgileri"}),void 0!==I.user.trustScore&&r.jsx(R.VB,{trustScore:I.user.trustScore,size:"sm"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white text-xl font-bold",children:(0,O.Gf)(I.user).charAt(0)}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:(0,O.Gf)(I.user)}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(u.Z,{className:"w-4 h-4"}),I.user._count.products," \xfcr\xfcn"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(y.Z,{className:"w-4 h-4"}),ak(I.user.createdAt)," \xfcye"]})]})]})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsx(R.qJ,{userId:I.user.id})})]}),I._count&&I._count.favorites>0&&(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-sm",children:[r.jsx(D.Z,{className:"w-4 h-4 fill-red-100 text-red-400"}),(0,r.jsxs)("span",{children:[I._count.favorites," ki≈üi bu \xfcr\xfcn\xfc favoriledi"]})]}),!aN&&(0,r.jsxs)(r.Fragment,{children:[ax&&ax.completedSwaps<3&&a?.user&&(0,r.jsxs)("div",{className:"mb-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-700",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-lg",children:"‚ö†Ô∏è"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs font-bold text-amber-800 dark:text-amber-200",children:"ƒ∞lk Takas Koruma Kuralƒ±"}),(0,r.jsxs)("p",{className:"text-[11px] text-amber-700 dark:text-amber-300 mt-1",children:["ƒ∞lk ",3-ax.completedSwaps," takasƒ±nƒ±zda toplam"," ",(0,r.jsxs)("strong",{children:[ax.maxAllowedGain,"V"]}),"'den fazla net kazan\xe7 elde edemezsiniz."]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-3 text-[11px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-amber-600",children:"\uD83D\uDCCA"}),(0,r.jsxs)("span",{className:"text-amber-700 dark:text-amber-300",children:["Mevcut: ",(0,r.jsxs)("strong",{children:[ax.currentNetGain,"V"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-green-600",children:"‚úÖ"}),(0,r.jsxs)("span",{className:"text-green-700 dark:text-green-300",children:["Kalan: ",(0,r.jsxs)("strong",{children:[ax.remainingAllowance,"V"]})]})]})]}),r.jsx("div",{className:"mt-2 h-1.5 bg-amber-200 dark:bg-amber-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-amber-500 rounded-full transition-all",style:{width:`${Math.min(100,ax.currentNetGain/ax.maxAllowedGain*100)}%`}})})]})]}),ax.lockedBonus>0&&(0,r.jsxs)("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 mt-2 ml-7",children:["\uD83D\uDD12 ",ax.lockedBonus,"V bonus kilitli ‚Äî ilk takasƒ±nƒ±zƒ± tamamlayƒ±nca a\xe7ƒ±lƒ±r"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{onClick:()=>{if(!a){e.push("/giris");return}eZ(!0),eB(null),eO(null),eF(0),ah()},className:"w-full py-4 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg hover:opacity-90 transition-all flex items-center justify-center gap-3 shadow-lg hover:shadow-xl",children:[r.jsx(C.Z,{className:"w-6 h-6"}),"Takas Teklif Et",(0,r.jsxs)("span",{className:"text-sm font-normal opacity-90",children:["(",I.valorPrice," V)"]})]}),r.jsx("div",{className:"p-3 bg-purple-50 rounded-xl border border-purple-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs font-bold text-purple-800",children:"\xc7oklu Takas Fƒ±rsatƒ±"}),r.jsx("p",{className:"text-xs text-purple-600",children:"Bu \xfcr\xfcne ilgi bildirirseniz, algoritmamƒ±z sizin i\xe7in 3+ ki≈üilik takas d\xf6ng\xfcleri arayacak. Direkt takas olmasa bile \xe7oklu takas ile bu \xfcr\xfcne sahip olabilirsiniz!"})]})]})}),I.acceptsNegotiation&&(0,r.jsxs)("button",{onClick:()=>{if(!a){e.push("/giris");return}ed(""),ec("swap"),eh(!1),ep(!1),ew(I?.valorPrice||0),ei(!0)},className:"w-full py-3 rounded-xl border-2 border-orange-400 bg-orange-50 text-orange-700 font-semibold hover:bg-orange-100 transition-all flex items-center justify-center gap-2",children:[r.jsx(k.Z,{className:"w-5 h-5"}),"Pazarlƒ±klƒ± Teklif Ver"]}),(0,r.jsxs)("button",{onClick:()=>{if(!a){e.push("/giris");return}ec("question"),ed(""),ei(!0)},className:"w-full py-3 rounded-xl border-2 border-blue-400 bg-blue-50 text-blue-700 font-semibold hover:bg-blue-100 transition-all flex items-center justify-center gap-2",children:[r.jsx(S.Z,{className:"w-5 h-5"}),"Satƒ±cƒ±ya Soru Sor"]})]})]})]})]})]}),r.jsx(c.M,{children:el&&r.jsx(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center z-[70] modal-backdrop",style:{overscrollBehavior:"contain"},onClick:()=>ei(!1),children:(0,r.jsxs)(o.E.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-900 rounded-t-3xl md:rounded-2xl p-6 w-full md:max-w-md max-h-[90vh] overflow-y-auto modal-content safe-area-bottom",style:{overscrollBehavior:"none",touchAction:"pan-y"},"data-scrollable":"true",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"md:hidden flex justify-center mb-4",children:r.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),eu?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(P.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Teklifiniz G\xf6nderildi! \uD83C\uDF89"}),r.jsx("p",{className:"text-gray-600 mb-2",children:"\xdcr\xfcn sahibi en kƒ±sa s\xfcrede deƒüerlendirecektir."}),r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Takaslarƒ±m sayfasƒ±ndan takip edebilirsiniz."}),r.jsx("div",{className:"p-3 bg-purple-50 rounded-xl border border-purple-200 text-left mb-4 max-w-sm mx-auto",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,r.jsxs)("p",{className:"text-xs text-purple-700",children:[r.jsx("span",{className:"font-bold",children:"Bonus:"})," \xc7oklu takas algoritmamƒ±z da sizin i\xe7in uygun d\xf6ng\xfcler arayacak!"]})]})}),r.jsx("button",{onClick:()=>e.push("/takaslarim"),className:"px-6 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:"Takaslarƒ±ma Git"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(C.Z,{className:"w-5 h-5 text-purple-500"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Takas Teklif Et"})]}),r.jsx("button",{onClick:()=>ei(!1),className:"p-2 rounded-full hover:bg-gray-100",children:r.jsx(V.Z,{className:"w-5 h-5"})})]}),I&&r.jsx("div",{className:"mb-4",children:ey&&ey.length>0?(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-purple-900/20 rounded-xl border-2 border-indigo-200 dark:border-indigo-800",children:[r.jsx("h4",{className:"text-sm font-bold text-indigo-800 dark:text-indigo-200 mb-3 flex items-center gap-2",children:"\uD83D\uDCCA \xdcr\xfcne Kar≈üƒ± \xdcr\xfcn ‚Äî Deƒüer Kar≈üƒ±la≈ütƒ±rmasƒ±"}),(()=>{let e=eb.filter(e=>ey.includes(e.id)).reduce((e,a)=>e+a.valorPrice,0),a=I.valorPrice,t=e-a;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[r.jsx("p",{className:"text-[10px] uppercase font-bold text-blue-600 dark:text-blue-400 mb-1",children:"\uD83E\uDDD1 Senin teklifin"}),(0,r.jsxs)("p",{className:"text-lg font-black text-blue-800 dark:text-blue-200",children:[e," V"]}),(0,r.jsxs)("p",{className:"text-[10px] text-blue-600 dark:text-blue-400",children:[ey.length," \xfcr\xfcn"]})]}),(0,r.jsxs)("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-700",children:[(0,r.jsxs)("p",{className:"text-[10px] uppercase font-bold text-orange-600 dark:text-orange-400 mb-1",children:["\uD83D\uDC64 ",I.user?.name||"Kar≈üƒ± taraf"]}),(0,r.jsxs)("p",{className:"text-lg font-black text-orange-800 dark:text-orange-200",children:[a," V"]}),r.jsx("p",{className:"text-[10px] text-orange-600 dark:text-orange-400 truncate",children:I.title})]})]}),r.jsx("div",{className:`p-3 rounded-lg border-2 text-center ${Math.abs(t)<=.05*a?"bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700":t>0?"bg-blue-50 border-blue-300 dark:bg-blue-900/20 dark:border-blue-700":"bg-orange-50 border-orange-300 dark:bg-orange-900/20 dark:border-orange-700"}`,children:Math.abs(t)<=.05*a?r.jsx("p",{className:"font-bold text-green-700 dark:text-green-300",children:"‚úÖ Deƒüerler yakla≈üƒ±k e≈üit ‚Äî birebir takas yapƒ±labilir"}):t>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-blue-700 dark:text-blue-300",children:["\uD83D\uDCB0 Senin \xfcr\xfcnlerin ",t," Valor daha deƒüerli"]}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Bu farkƒ± kar≈üƒ± taraftan Valor olarak talep edebilirsin"})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-orange-700 dark:text-orange-300",children:["‚ö†Ô∏è Kar≈üƒ± tarafƒ±n \xfcr\xfcn\xfc ",Math.abs(t)," Valor daha deƒüerli"]}),r.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Farkƒ± kapatmak i\xe7in ek Valor \xf6deyebilir veya ek \xfcr\xfcn ekleyebilirsin"})]})}),(()=>{let e=t>0,a=t<0;return(0,r.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-1.5",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Nasƒ±l devam etmek istersin?"}),(0,r.jsxs)("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-gray-700 cursor-pointer text-xs",children:[r.jsx("input",{type:"radio",name:"swapMode",checked:"valor_diff"===eD,onChange:()=>{eC("valor_diff"),a?ew(Math.abs(t)):ew(0)},className:"mt-0.5 text-purple-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e?`üí∞ Farkƒ± kar≈üƒ± taraftan Valor olarak talep et (+${t}V)`:a?`üí∞ Farkƒ± Valor olarak \xf6de (${Math.abs(t)}V)`:"\uD83D\uDCB0 Valor farkƒ± yok ‚Äî tam denk"}),r.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:e?"Kar≈üƒ± taraf sana eksik kalan Valor'u \xf6desin":a?"Eksik kalan deƒüeri Valor ile tamamla":"Ek \xf6deme gerekmez"})]})]}),(0,r.jsxs)("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-gray-700 cursor-pointer text-xs",children:[r.jsx("input",{type:"radio",name:"swapMode",checked:"request_product"===eD,onChange:()=>{eC("request_product"),ew(0)},className:"mt-0.5 text-purple-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e?"\uD83D\uDCE6 Kar≈üƒ± taraftan ek \xfcr\xfcn iste":a?"\uD83D\uDCE6 Farkƒ± kapatmak i\xe7in ek \xfcr\xfcn ekle":"\uD83D\uDCE6 Ek \xfcr\xfcn ekle veya iste"}),r.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:e?`Kar≈üƒ± taraf ~${t}V deƒüerinde ek \xfcr\xfcn sunsun`:a?`~${Math.abs(t)}V deƒüerinde ek \xfcr\xfcn se\xe7erek farkƒ± kapat`:"Teklifi zenginle≈ütirmek i\xe7in ek \xfcr\xfcn ekleyebilirsin"})]})]}),(0,r.jsxs)("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-gray-700 cursor-pointer text-xs",children:[r.jsx("input",{type:"radio",name:"swapMode",checked:"direct_swap"===eD,onChange:()=>{eC("direct_swap"),ew(0)},className:"mt-0.5 text-purple-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"\uD83E\uDD1D Birebir takas ‚Äî fark \xf6nemli deƒüil"}),r.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:"Anla≈ütƒ±k, \xfcr\xfcnleri olduƒüu gibi deƒüi≈ütirelim, ek \xf6deme yok"})]})]}),"request_product"===eD&&a&&r.jsx("div",{className:"p-2 bg-yellow-50 dark:bg-yellow-900/10 rounded-lg border border-yellow-200 dark:border-yellow-800",children:(0,r.jsxs)("p",{className:"text-[11px] text-yellow-700 dark:text-yellow-400",children:["\uD83D\uDCA1 Yukarƒ±daki \xfcr\xfcn listesinden ~",Math.abs(t),"V deƒüerinde ek \xfcr\xfcn se\xe7erek farkƒ± kapatabilirsin. Veya mesaj alanƒ±na detay yazabilirsin."]})}),"request_product"===eD&&e&&r.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/10 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,r.jsxs)("p",{className:"text-[11px] text-blue-700 dark:text-blue-400",children:["\uD83D\uDCA1 Mesaj alanƒ±na hangi t\xfcr \xfcr\xfcn istediƒüini yazabilirsin. Kar≈üƒ± taraf ~",t,"V deƒüerinde ek \xfcr\xfcn sunmalƒ±."]})}),"valor_diff"===eD&&a&&(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx("label",{className:"block text-xs font-bold text-purple-700 dark:text-purple-300 mb-1",children:"\xd6deyeceƒüin ek Valor:"}),r.jsx("input",{type:"number",min:"0",max:2*Math.abs(t),value:ev,onChange:e=>ew(""===e.target.value?"":parseInt(e.target.value)),placeholder:`${Math.abs(t)}`,className:"w-full px-4 py-2 rounded-xl border-2 border-purple-300 dark:border-purple-700 text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800"})]})]})})()]})})()]}):(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 rounded-xl border-2 border-purple-300 dark:border-purple-700 shadow-sm",children:[r.jsx("label",{className:"block text-sm font-bold text-purple-800 dark:text-purple-300 mb-2",children:"\uD83D\uDCB0 Valor Teklifiniz"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"number",min:"1",max:2*I.valorPrice,value:ev,onChange:e=>ew(""===e.target.value?"":parseInt(e.target.value)),placeholder:`${I.valorPrice}`,className:"w-full px-4 py-3 pr-24 rounded-xl border-2 border-purple-400 focus:ring-2 focus:ring-purple-600 focus:border-purple-600 text-xl font-black text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 placeholder:text-purple-400"}),r.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-purple-700 dark:text-purple-300 font-black text-base",children:"Valor"})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-purple-700 dark:text-purple-300 font-medium",children:["ƒ∞stenen: ",(0,r.jsxs)("strong",{className:"text-purple-900 dark:text-white",children:[I.valorPrice," Valor"]})]}),""!==ev&&ev<I.valorPrice&&(0,r.jsxs)("span",{className:"text-orange-700 font-bold bg-orange-100 dark:bg-orange-900/30 px-2 py-0.5 rounded-full",children:["%",Math.round((I.valorPrice-("number"==typeof ev?ev:0))/I.valorPrice*100)," pazarlƒ±k"]}),""!==ev&&"number"==typeof ev&&ev>I.valorPrice&&(0,r.jsxs)("span",{className:"text-green-700 font-bold bg-green-100 dark:bg-green-900/30 px-2 py-0.5 rounded-full",children:["%",Math.round((ev-I.valorPrice)/I.valorPrice*100)," \xfcst\xfc teklif ‚≠ê"]}),""!==ev&&ev===I.valorPrice&&r.jsx("span",{className:"text-blue-700 font-bold bg-blue-100 dark:bg-blue-900/30 px-2 py-0.5 rounded-full",children:"Tam fiyat ‚úì"})]})]})}),I&&(""!==ev||ey?.length>0)&&(0,r.jsxs)("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"\uD83D\uDCB8 TAHMƒ∞Nƒ∞ KESƒ∞NTƒ∞ DETAYI"}),(()=>{let e=ey?.length>0?""===ev?ez:Number(ev)+ez:""===ev?0:Number(ev);if(e<=0)return r.jsx("p",{className:"text-xs text-gray-500 text-center py-2",children:"Valor miktarƒ± girin"});let a=e,t=0,s=0,l=[];for(let e of[{min:0,limit:200,rate:.005},{min:200,limit:500,rate:.01},{min:500,limit:1e3,rate:.015},{min:1e3,limit:2500,rate:.02},{min:2500,limit:5e3,rate:.025},{min:5e3,limit:1/0,rate:.03}]){let r=e.limit===1/0?a:e.limit-e.min,i=Math.min(a,r);if(i<=0)break;let n=Math.round(i*e.rate*100)/100,d=s,o=s+i;l.push({start:d,end:o,rate:`%${100*e.rate}`,fee:n}),t+=n,a-=i,s+=i}t=Math.max(1,Math.round(t));let i=e>0?(t/e*100).toFixed(1):"0";return(0,r.jsxs)("div",{className:"space-y-1",children:[l.filter(e=>e.fee>0).map((e,a)=>(0,r.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:[0===e.start?"0":e.start.toLocaleString(),"-",e.end.toLocaleString(),"V (",e.rate,")"]}),(0,r.jsxs)("span",{children:[e.fee.toFixed(1),"V"]})]},a)),(0,r.jsxs)("div",{className:"flex justify-between text-xs font-bold text-gray-800 dark:text-gray-200 pt-1 border-t border-gray-200 dark:border-gray-600",children:[(0,r.jsxs)("span",{children:["Toplam kesinti (efektif %",i,")"]}),(0,r.jsxs)("span",{children:[t,"V"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-xs font-bold text-green-700 dark:text-green-400",children:[r.jsx("span",{children:"Satƒ±cƒ±ya gidecek (net)"}),(0,r.jsxs)("span",{children:[e-t,"V"]})]})]})})()]}),r.jsx(r.Fragment,{children:eH?(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-xl animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}):eK&&(0,r.jsxs)("div",{className:`mb-4 p-4 rounded-xl border ${eK.canAfford?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gerekli Teminat"}),(0,r.jsxs)("span",{className:`text-lg font-bold ${eK.canAfford?"text-green-600":"text-red-600"}`,children:[eK.depositRequired," Valor"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Mevcut Bakiye"}),(0,r.jsxs)("span",{className:"font-medium text-gray-800",children:[eK.availableBalance," Valor"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-500",children:"Teminat Oranƒ±"}),(0,r.jsxs)("span",{className:"font-medium text-purple-600",children:[eK.depositRate,"unverified"!==eK.trustLevel&&(0,r.jsxs)("span",{className:"text-xs ml-1",children:["(",eK.trustBadge,")"]})]})]}),!eK.canAfford&&(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-red-600",children:[r.jsx(x.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:["Yetersiz bakiye! ",eK.depositRequired-eK.availableBalance," Valor daha gerekli."]})]}),eK.canAfford&&(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-green-600",children:[r.jsx(P.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Teminat i\xe7in yeterli bakiyeniz var!"})]})]})}),ek?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"})}):eb.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["\uD83D\uDCE6 Kar≈üƒ±lƒ±ƒüƒ±nda \xdcr\xfcn Teklif Et ",r.jsx("span",{className:"text-gray-400 font-normal",children:"(birden fazla se\xe7ebilirsiniz)"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"\xdcr\xfcn se\xe7erek Valor \xf6demesini azaltabilirsiniz"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-48 overflow-y-auto p-1",children:eb.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>eV(e.id),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition-all ${ey.includes(e.id)?"border-purple-500 ring-2 ring-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:[e.images?.[0]?r.jsx(n.default,{src:e.images[0],alt:e.title,fill:!0,className:"object-cover"}):r.jsx("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:r.jsx(u.Z,{className:"w-4 h-4 text-gray-300"})}),ey.includes(e.id)&&r.jsx("div",{className:"absolute inset-0 bg-purple-500/30 flex items-center justify-center",children:r.jsx(P.Z,{className:"w-6 h-6 text-white"})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-0.5",children:(0,r.jsxs)("p",{className:"text-[10px] text-white font-medium",children:[e.valorPrice,"V"]})})]},e.id))}),ey.length>0&&(0,r.jsxs)("div",{className:"mt-2 p-2.5 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[(0,r.jsxs)("p",{className:"text-xs text-purple-700 dark:text-purple-300 font-semibold",children:["‚úÖ ",ey.length," \xfcr\xfcn se\xe7ildi ‚Äî Toplam: ",ez," Valor"]}),ez<(I?.valorPrice||0)&&(0,r.jsxs)("p",{className:"text-[11px] text-orange-600 dark:text-orange-400 mt-1",children:["‚ö†Ô∏è ",(I?.valorPrice||0)-ez," Valor fark kaldƒ± (Valor alanƒ±na yazƒ±labilir)"]})]})]}),I&&(""!==ev||ey.length>0)&&(()=>{let e=eT();if(!e)return null;let a=e.myProductsValue-e.targetPrice;return(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-purple-900/20 rounded-xl border-2 border-indigo-200 dark:border-indigo-800",children:[(0,r.jsxs)("h4",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:["\uD83D\uDCCA ",ey.length>0?"\xdcr\xfcne Kar≈üƒ± \xdcr\xfcn ‚Äî Deƒüer Kar≈üƒ±la≈ütƒ±rmasƒ±":"Takas \xd6zeti"]}),ey.length>0?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"p-2.5 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[r.jsx("p",{className:"text-[10px] uppercase font-bold text-blue-600 dark:text-blue-400 mb-0.5",children:"\uD83E\uDDD1 Senin \xfcr\xfcnlerin"}),(0,r.jsxs)("p",{className:"text-lg font-black text-blue-800 dark:text-blue-200",children:[e.myProductsValue," V"]}),(0,r.jsxs)("p",{className:"text-[10px] text-blue-500",children:[ey.length," \xfcr\xfcn"]})]}),(0,r.jsxs)("div",{className:"p-2.5 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-700",children:[(0,r.jsxs)("p",{className:"text-[10px] uppercase font-bold text-orange-600 dark:text-orange-400 mb-0.5",children:["\uD83D\uDC64 ",I.user?.name||"Kar≈üƒ± taraf"]}),(0,r.jsxs)("p",{className:"text-lg font-black text-orange-800 dark:text-orange-200",children:[e.targetPrice," V"]}),r.jsx("p",{className:"text-[10px] text-orange-500 truncate",children:I.title})]})]}),r.jsx("div",{className:`p-3 rounded-lg border-2 text-center ${Math.abs(a)<=.05*e.targetPrice?"bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700":a>0?"bg-blue-50 border-blue-300 dark:bg-blue-900/20 dark:border-blue-700":"bg-orange-50 border-orange-300 dark:bg-orange-900/20 dark:border-orange-700"}`,children:Math.abs(a)<=.05*e.targetPrice?r.jsx("p",{className:"font-bold text-green-700 dark:text-green-300",children:"‚úÖ Deƒüerler yakla≈üƒ±k e≈üit ‚Äî birebir takas yapƒ±labilir"}):a>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-blue-700 dark:text-blue-300",children:["\uD83D\uDCB0 Senin \xfcr\xfcnlerin ",a," Valor daha deƒüerli"]}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Bu farkƒ± kar≈üƒ± taraftan Valor olarak talep edebilirsin"})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-orange-700 dark:text-orange-300",children:["‚ö†Ô∏è Kar≈üƒ± tarafƒ±n \xfcr\xfcn\xfc ",Math.abs(a)," Valor daha deƒüerli"]}),r.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Farkƒ± kapatmak i\xe7in ek Valor \xf6deyebilir veya ek \xfcr\xfcn ekleyebilirsin"})]})}),e.myValorOffer>0&&(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[r.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm",children:"\uD83D\uDCB0 Ek Valor \xf6demen"}),(0,r.jsxs)("span",{className:"font-bold text-purple-700 dark:text-purple-300",children:[e.myValorOffer," V"]})]})]}):(0,r.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"\uD83C\uDFAF ƒ∞stediƒüin \xfcr\xfcn"}),(0,r.jsxs)("span",{className:"font-bold text-gray-900 dark:text-white",children:[e.targetPrice," V"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[r.jsx("span",{className:"text-purple-700 dark:text-purple-300",children:"\uD83D\uDCB0 Valor teklifin"}),(0,r.jsxs)("span",{className:"font-bold text-purple-700 dark:text-purple-300",children:[e.myValorOffer||e.targetPrice," V"]})]}),e.myValorOffer>0&&e.myValorOffer<e.targetPrice&&r.jsx("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/10 rounded-lg",children:(0,r.jsxs)("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:["‚ö†Ô∏è %",Math.round((1-e.myValorOffer/e.targetPrice)*100)," pazarlƒ±k teklifi"]})})]}),0===ey.length&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-indigo-200 dark:border-indigo-700 space-y-1",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Takas Sonrasƒ± Tahmini:"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["\uD83D\uDC64 ",I.user?.name||"Satƒ±cƒ±"," alacak:"]}),(0,r.jsxs)("span",{className:"font-bold text-green-600",children:["+",e.netToSeller," V"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"\uD83C\uDFE6 Topluluk katkƒ±sƒ±:"}),(0,r.jsxs)("span",{className:"font-bold text-yellow-600",children:["~",e.estimatedFee," V"]})]}),r.jsx("p",{className:"text-[9px] text-gray-400 text-center mt-1",children:"* Tahmini. Ger\xe7ek kesinti progresif sisteme g\xf6re belirlenir."})]})]})})(),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[I?.isFreeAvailable&&(0,r.jsxs)("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center gap-2 text-green-700 dark:text-green-300",children:[r.jsx("span",{children:"\uD83C\uDF81"}),r.jsx("p",{className:"text-xs font-medium",children:"Bu \xfcr\xfcn bedelsiz de verilebilir!"})]}),I?.acceptsNegotiation&&!I?.isFreeAvailable&&(0,r.jsxs)("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[r.jsx("span",{children:"\uD83E\uDD1D"}),r.jsx("p",{className:"text-xs font-medium",children:"Satƒ±cƒ± pazarlƒ±ƒüa a\xe7ƒ±k"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uD83D\uDCAC Satƒ±cƒ±ya Not ",r.jsx("span",{className:"text-gray-400 font-normal",children:"(opsiyonel)"})]}),r.jsx("textarea",{value:en,onChange:e=>ed(e.target.value),placeholder:"\xd6rn: Merhaba, \xfcr\xfcn\xfcn\xfczle ilgileniyorum. Pazarlƒ±k yapabilir miyiz?",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none text-sm",rows:2})]}),H&&r.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 p-4 rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx(x.Z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-red-700",children:H}),H.includes("telefon")&&(0,r.jsxs)("a",{href:"/profil",className:"inline-flex items-center gap-2 mt-3 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg text-sm font-medium transition-colors",children:[r.jsx(z.Z,{className:"w-4 h-4"}),"Profil Sayfasƒ±na Git"]})]})]})}),r.jsx("button",{onClick:ay,disabled:ex||"swap"===eo&&null!==eK&&!1===eK.canAfford,className:`w-full mt-4 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${"swap"===eo&&eK&&!1===eK.canAfford?"bg-gray-300 text-gray-500 cursor-not-allowed":"question"===eo?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:opacity-90 disabled:opacity-50":"bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:opacity-90 disabled:opacity-50"}`,children:ex?(0,r.jsxs)(r.Fragment,{children:[r.jsx(T.Z,{className:"w-5 h-5 animate-spin"}),"G\xf6nderiliyor..."]}):"swap"===eo&&eK&&!1===eK.canAfford?"Yetersiz Bakiye":"question"===eo?(0,r.jsxs)(r.Fragment,{children:[r.jsx(S.Z,{className:"w-5 h-5"}),"Soru G\xf6nder"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(D.Z,{className:"w-5 h-5"}),"Takas Talebi G\xf6nder"]})})]})]})})}),r.jsx(c.M,{children:eE&&I&&r.jsx(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center z-[70]",onClick:()=>{eZ(!1),eB(null),eO(null),eF(0)},children:(0,r.jsxs)(o.E.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-2xl w-full md:max-w-md max-h-[85vh] overflow-y-auto safe-area-bottom",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"md:hidden flex justify-center pt-3 pb-2",children:r.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),!eM&&(0,r.jsxs)("div",{className:"p-5 space-y-3",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white text-center mb-4",children:"Nasƒ±l takas yapmak istersiniz?"}),r.jsx("button",{onClick:()=>{eB("product")},className:"w-full p-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/30 dark:to-blue-900/30 border-2 border-purple-200 dark:border-purple-700 rounded-xl text-left hover:border-purple-400 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:"\uD83D\uDD04"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"\xdcr\xfcn\xfcmle Takas Et"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Kendi \xfcr\xfcn\xfcn\xfcz\xfc kar≈üƒ±lƒ±k olarak teklif edin"})]})]})}),r.jsx("button",{onClick:()=>eB("valor"),className:"w-full p-4 bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 border-2 border-amber-200 dark:border-amber-700 rounded-xl text-left hover:border-amber-400 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:"\uD83D\uDCB0"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Valor ile Al"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[I.valorPrice," Valor \xf6deyerek direkt alƒ±n"]})]})]})})]}),"product"===eM&&!eR&&(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Hangi \xfcr\xfcn\xfcn\xfcz\xfc teklif edeceksiniz?"}),r.jsx("button",{onClick:()=>eB(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"‚Üê Geri"})]}),ek?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(T.Z,{className:"w-8 h-8 animate-spin text-purple-500 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"\xdcr\xfcnleriniz y\xfckleniyor..."})]}):0===eb.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(u.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 mb-3",children:"Aktif \xfcr\xfcn\xfcn\xfcz yok"}),r.jsx("button",{onClick:()=>e.push("/urun-ekle"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-bold",children:"+ \xdcr\xfcn Ekle"})]}):r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:eb.map(e=>(0,r.jsxs)("button",{onClick:()=>{eO(e),eF(I.valorPrice-e.valorPrice)},className:"w-full flex items-center gap-3 p-3 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-xl hover:border-purple-400 transition-colors text-left",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.images?.[0]?r.jsx("img",{src:e.images[0],alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-xl",children:"\uD83D\uDCE6"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-purple-600",children:["‚≠ê ",e.valorPrice," Valor"]})]})]},e.id))})]}),"product"===eM&&eR&&(0,r.jsxs)("div",{className:"p-5 space-y-4",children:[r.jsx("button",{onClick:()=>eO(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"‚Üê \xdcr\xfcn Deƒüi≈ütir"}),r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white text-center",children:"Takas \xd6zeti"}),(0,r.jsxs)("div",{className:"flex items-center gap-3 justify-center",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-gray-100 mx-auto mb-1",children:eR.images?.[0]?r.jsx("img",{src:eR.images[0],alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"\uD83D\uDCE6"})}),r.jsx("p",{className:"text-xs font-medium truncate max-w-[100px] text-gray-700 dark:text-gray-300",children:eR.title}),(0,r.jsxs)("p",{className:"text-xs text-purple-600 font-bold",children:["‚≠ê ",eR.valorPrice]})]}),r.jsx("div",{className:"text-2xl",children:"\uD83D\uDD04"}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-gray-100 mx-auto mb-1",children:I.images?.[0]?r.jsx("img",{src:I.images[0],alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"\uD83D\uDCE6"})}),r.jsx("p",{className:"text-xs font-medium truncate max-w-[100px] text-gray-700 dark:text-gray-300",children:I.title}),(0,r.jsxs)("p",{className:"text-xs text-purple-600 font-bold",children:["‚≠ê ",I.valorPrice]})]})]}),0!==e_&&r.jsx("div",{className:`p-3 rounded-xl text-center ${e_>0?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200":"bg-green-50 dark:bg-green-900/20 border border-green-200"}`,children:e_>0?(0,r.jsxs)("p",{className:"text-sm font-bold text-amber-800 dark:text-amber-200",children:["\uD83D\uDCB0 ",e_," Valor fark \xf6demeniz gerekecek"]}):(0,r.jsxs)("p",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:["\uD83D\uDCB0 ",Math.abs(e_)," Valor fark size \xf6denecek"]})}),0===e_&&r.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl text-center border border-green-200",children:r.jsx("p",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:"‚úÖ Deƒüerler e≈üit ‚Äî doƒürudan takas!"})}),H&&(0,r.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:["‚ö†Ô∏è ",H]}),r.jsx("button",{onClick:()=>{aj(eR.id,e_>0?e_:0)},disabled:ex,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-lg disabled:opacity-50",children:ex?"‚è≥ G\xf6nderiliyor...":"\uD83D\uDD04 Takas Teklifi G\xf6nder"})]}),"valor"===eM&&(0,r.jsxs)("div",{className:"p-5 space-y-4",children:[r.jsx("button",{onClick:()=>eB(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"‚Üê Geri"}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("span",{className:"text-4xl",children:"\uD83D\uDCB0"}),(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mt-2",children:[I.valorPrice," Valor \xf6deyeceksiniz"]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:I.title})]}),H&&(0,r.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:["‚ö†Ô∏è ",H]}),r.jsx("button",{onClick:()=>{aj(null,I.valorPrice)},disabled:ex,className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-bold text-lg disabled:opacity-50",children:ex?"‚è≥ G\xf6nderiliyor...":"\uD83D\uDCB0 Valor ile Teklif G\xf6nder"})]}),"success"===eM&&(0,r.jsxs)("div",{className:"p-6 text-center",children:[r.jsx(o.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:15},className:"mb-4",children:r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(P.Z,{className:"w-12 h-12 text-green-500"})})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"\uD83C\uDF89 Takas Teklifi G\xf6nderildi!"}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:[I?.user?.name||"\xdcr\xfcn sahibi"," en kƒ±sa s\xfcrede deƒüerlendirecektir."]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>{eZ(!1),eB(null),ep(!1),e.push("/takaslarim")},className:"w-full py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold",children:"\uD83D\uDCCB Tekliflerimi G\xf6r\xfcnt\xfcle"}),r.jsx("button",{onClick:()=>{eZ(!1),eB(null),ep(!1),eO(null)},className:"w-full py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-medium",children:"\xdcr\xfcne Geri D\xf6n"})]})]})]})})}),(0,r.jsxs)(c.M,{children:[W&&(0,r.jsxs)(o.E.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-2xl z-[70] flex flex-col safe-area-top safe-area-bottom",style:{overscrollBehavior:"contain"},children:[(0,r.jsxs)("div",{className:"p-4 border-b flex items-center gap-4",children:[r.jsx("button",{onClick:()=>Q(!1),className:"p-2 rounded-full hover:bg-gray-100",children:r.jsx(V.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-blue-400 flex items-center justify-center text-white font-bold",children:(0,O.Gf)(I.user).charAt(0)}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:(0,O.Gf)(I.user)}),r.jsx("p",{className:"text-sm text-gray-500",children:I.title})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===X.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(S.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Hen\xfcz mesaj yok"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"\xdcr\xfcn hakkƒ±nda soru sormaya ba≈ülayƒ±n"})]}):X.map(e=>{let a=e.sender.id!==I.user.id;return r.jsx("div",{className:`flex ${a?"justify-end":"justify-start"}`,children:(0,r.jsxs)("div",{className:`max-w-[80%] px-4 py-3 rounded-2xl ${a?"bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-br-md":"bg-gray-100 text-gray-800 rounded-bl-md"}`,children:[r.jsx("p",{children:e.content}),r.jsx("p",{className:`text-xs mt-1 ${a?"text-white/70":"text-gray-400"}`,children:new Date(e.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})},e.id)}),r.jsx("div",{ref:eA})]}),r.jsx("div",{className:"p-4 border-t",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:ea,onChange:e=>et(e.target.value),onKeyDown:e=>"Enter"===e.key&&af(),placeholder:"Mesajƒ±nƒ±zƒ± yazƒ±n...",className:"flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-frozen-500 focus:border-transparent"}),r.jsx("button",{onClick:af,disabled:!ea.trim()||er,className:"px-4 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 text-white disabled:opacity-50 transition-all",children:r.jsx(A.Z,{className:"w-5 h-5"})})]})})]}),eY&&r.jsx(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/60 flex items-end md:items-center justify-center modal-backdrop",style:{overscrollBehavior:"contain"},onClick:()=>!al&&eJ(!1),children:(0,r.jsxs)(o.E.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},onClick:e=>e.stopPropagation(),className:"bg-white rounded-t-3xl md:rounded-3xl w-full md:max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl modal-content safe-area-bottom",children:[r.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white rounded-t-3xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(b.Z,{className:"w-7 h-7"}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:"AI G\xf6rselle≈ütirme"}),r.jsx("p",{className:"text-sm opacity-90",children:eX?"Sƒ±nƒ±rsƒ±z kullanƒ±m":`${eW} hak kaldƒ±`})]})]}),r.jsx("button",{onClick:()=>!al&&eJ(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",disabled:al,children:r.jsx(V.Z,{className:"w-6 h-6"})})]})}),r.jsx("div",{className:"p-6 space-y-6",children:an?(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"relative rounded-xl overflow-hidden shadow-lg",children:r.jsx("img",{src:an,alt:"AI Visualization",className:"w-full"})}),(0,r.jsxs)("div",{className:"p-4 bg-green-50 text-green-700 rounded-xl flex items-center gap-2",children:[r.jsx(P.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsxs)("p",{className:"text-sm",children:["G\xf6rselle≈ütirme ba≈üarƒ±yla olu≈üturuldu!",!eX&&` (Kalan hak: ${eW})`]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("a",{href:an,download:"takas-a-visualization.png",target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold text-center hover:bg-gray-200 transition-colors",children:"\uD83D\uDCE5 ƒ∞ndir"}),r.jsx("button",{onClick:ag,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold hover:shadow-lg transition-all",children:"\uD83D\uDD04 Yeni G\xf6rsel"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[I&&I.images[0]&&r.jsx("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(n.default,{src:I.images[0],alt:I.title,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:I?.translatedTitle||I?.title}),r.jsx("p",{className:"text-sm text-gray-500",children:I?.translatedCategory||I?.category?.name})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\uD83D\uDCF8 Oda/Ortam Fotoƒürafƒ± Y\xfckle"}),r.jsx("input",{ref:au,type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];if(a){ae(a);let e=new FileReader;e.onload=e=>{at(e.target?.result)},e.readAsDataURL(a)}},className:"hidden"}),r.jsx("div",{onClick:()=>au.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center cursor-pointer hover:border-purple-400 hover:bg-purple-50 transition-all",children:aa?(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{src:aa,alt:"Environment",className:"w-full h-48 object-cover rounded-lg"}),r.jsx("button",{onClick:e=>{e.stopPropagation(),ae(null),at("")},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full",children:r.jsx(V.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(E.Z,{className:"w-10 h-10 mx-auto text-gray-400"}),r.jsx("p",{className:"text-gray-600",children:"Oda fotoƒürafƒ± y\xfcklemek i\xe7in tƒ±klayƒ±n"}),r.jsx("p",{className:"text-xs text-gray-400",children:"JPG, PNG - Max 10MB"})]})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex-1 h-px bg-gray-200"}),r.jsx("span",{className:"text-sm text-gray-400 font-medium",children:"VEYA"}),r.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"‚úçÔ∏è Odanƒ± Tanƒ±mla (AI hayal etsin)"}),r.jsx("textarea",{value:ar,onChange:e=>as(e.target.value),placeholder:"\xd6rn: Modern bir salon, beyaz duvarlar, ah≈üap zemin, b\xfcy\xfck pencere, minimalist dekorasyon...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:3})]}),ao&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 text-red-600 rounded-xl flex items-center gap-2",children:[r.jsx(x.Z,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("p",{className:"text-sm",children:ao})]}),r.jsx("button",{onClick:ap,disabled:al||!e9&&!ar.trim()||!eX&&eW<=0,className:"w-full py-4 rounded-xl bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:shadow-lg",children:al?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(T.Z,{className:"w-5 h-5 animate-spin"}),"Olu≈üturuluyor... (10-30 sn)"]}):eW<=0&&!eX?"Hakkƒ±nƒ±z Kalmadƒ± \uD83D\uDE22":(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(b.Z,{className:"w-5 h-5"}),"G\xf6rselle≈ütir!"]})}),r.jsx("p",{className:"text-xs text-gray-400 text-center",children:"\uD83E\uDD16 AI tarafƒ±ndan olu≈üturulan g\xf6rsel tamamen hayal \xfcr\xfcn\xfcd\xfcr ve ger\xe7ek \xfcr\xfcn\xfcn g\xf6r\xfcn\xfcm\xfcn\xfc garanti etmez."})]})})]})})]}),I&&r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-gray-900 border-t dark:border-gray-700 p-3 safe-area-bottom shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 max-w-lg mx-auto",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(Z.Z,{className:"w-4 h-4 text-purple-500 fill-current"}),(0,r.jsxs)("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:[I.valorPrice," Valor"]})]}),r.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 truncate",children:I.title})]}),a?aN?r.jsx("span",{className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-xl text-sm font-medium",children:"Sizin \xfcr\xfcn\xfcn\xfcz"}):r.jsx("button",{onClick:()=>eZ(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-sm hover:shadow-lg transition-all flex items-center gap-2 whitespace-nowrap",children:"\uD83D\uDD04 Takas Yap"}):r.jsx(d.default,{href:"/giris",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-sm flex items-center gap-2 whitespace-nowrap",children:"Giri≈ü Yap"})]})})]})}},76008:(e,a,t)=>{"use strict";t.d(a,{_:()=>o});var r=t(62901),s=t(24383),l=t(62451),i=t(84700),n=t(84374),d=t(68637);function o({productId:e,initialCount:a=0,size:t="md",showCount:o=!1,className:c}){let{data:x}=(0,i.useSession)(),m=(0,n.useRouter)(),[u,p]=(0,s.useState)(!1),[g,h]=(0,s.useState)(a),[b,f]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),k=async a=>{if(a.preventDefault(),a.stopPropagation(),!x?.user){m.push("/giris");return}if(!b){f(!0),j(!0),p(!u),h(e=>u?e-1:e+1);try{let a=await fetch("/api/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})});if(a.ok){let e=await a.json();p(e.isFavorite),h(e.favoriteCount)}else p(u),h(e=>u?e+1:e-1)}catch(e){console.error("Favorite toggle error:",e),p(u),h(e=>u?e+1:e-1)}finally{f(!1),setTimeout(()=>j(!1),300)}}};return(0,r.jsxs)("div",{className:(0,d.cn)("flex items-center gap-1",c),children:[r.jsx("button",{onClick:k,disabled:b,className:(0,d.cn)("rounded-full flex items-center justify-center transition-all duration-200","hover:scale-110 active:scale-95","bg-white/90 backdrop-blur-sm shadow-md hover:shadow-lg",{sm:"w-7 h-7",md:"w-9 h-9",lg:"w-11 h-11"}[t],y&&"animate-pulse"),title:u?"Favorilerden \xe7ƒ±kar":"Favorilere ekle",children:r.jsx(l.Z,{className:(0,d.cn)({sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[t],"transition-all duration-200",u?"fill-red-500 text-red-500":"text-gray-500 hover:text-red-400")})}),o&&g>0&&r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g})]})}},66596:(e,a,t)=>{"use strict";t.r(a),t.d(a,{RecentViews:()=>m,addToRecentViews:()=>x});var r=t(62901),s=t(24383),l=t(80412),i=t(21391),n=t(96527),d=t(60004),o=t(62392),c=t(75115);function x(e){}function m(){let[e,a]=(0,s.useState)([]),[t,x]=(0,s.useState)(0),[m,u]=(0,s.useState)(0);if(0===e.length)return null;let p=e=>{"left"===e?x(Math.max(0,t-360)):x(Math.min(m,t+360))},g=e=>{let a=Date.now()-e,t=Math.floor(a/6e4),r=Math.floor(a/36e5),s=Math.floor(a/864e5);return s>0?`${s} g\xfcn \xf6nce`:r>0?`${r} saat \xf6nce`:t>0?`${t} dk \xf6nce`:"Az \xf6nce"};return r.jsx("section",{className:"py-12 bg-white dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:r.jsx(i.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Son G\xf6r\xfcnt\xfclenenler"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ƒ∞ncelediƒüin \xfcr\xfcnlere hƒ±zlƒ±ca eri≈ü"})]})]}),e.length>4&&(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>p("left"),disabled:0===t,className:"w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:r.jsx(n.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),r.jsx("button",{onClick:()=>p("right"),disabled:t>=m,className:"w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:r.jsx(d.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]}),r.jsx("div",{className:"overflow-hidden",children:r.jsx(l.E.div,{className:"flex gap-4",animate:{x:-t},transition:{type:"spring",stiffness:300,damping:30},children:e.map((e,a)=>r.jsx(o.default,{href:`/urun/${e.id}`,className:"flex-shrink-0 w-[170px] group",children:(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"bg-gray-50 dark:bg-gray-800 rounded-xl overflow-hidden hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"relative aspect-square",children:[r.jsx(c.default,{src:e.image,alt:e.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),r.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-lg bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm",children:(0,r.jsxs)("span",{className:"text-xs font-semibold text-frozen-600 dark:text-frozen-400",children:[e.valorPrice," V"]})})]}),(0,r.jsxs)("div",{className:"p-3",children:[r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm line-clamp-1 group-hover:text-frozen-600 dark:group-hover:text-frozen-400 transition-colors",children:e.title}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:g(e.viewedAt)})]})]})},e.id))})})]})})}},68391:(e,a,t)=>{"use strict";t.d(a,{VB:()=>u,qJ:()=>p});var r=t(62901),s=t(24383),l=t(79046),i=t(23094),n=t(94437);let d=(0,t(71945).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var o=t(68637),c=t(54936);let x={fast_delivery:{tr:"Hƒ±zlƒ± Teslimat",en:"Fast Delivery",es:"Entrega R\xe1pida",ca:"Lliurament R\xe0pid"},accurate_description:{tr:"Doƒüru A\xe7ƒ±klama",en:"Accurate Description",es:"Descripci\xf3n Precisa",ca:"Descripci\xf3 Precisa"},good_communication:{tr:"ƒ∞yi ƒ∞leti≈üim",en:"Good Communication",es:"Buena Comunicaci\xf3n",ca:"Bona Comunicaci\xf3"},friendly:{tr:"Samimi",en:"Friendly",es:"Amigable",ca:"Amigable"},professional:{tr:"Profesyonel",en:"Professional",es:"Profesional",ca:"Professional"},punctual:{tr:"Dakik",en:"Punctual",es:"Puntual",ca:"Puntual"}};function m({rating:e,size:a="md",showValue:t=!1}){let s={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(t=>r.jsx(l.Z,{className:(0,o.cn)(s[a],t<=e?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},t)),t&&r.jsx("span",{className:"ml-1 text-sm font-medium text-gray-700",children:e.toFixed(1)})]})}function u({trustScore:e,reviewCount:a,size:t="md"}){let{language:s}=(0,c.Z)(),l=e>=90?{label:{tr:"\xc7ok G\xfcvenilir",en:"Very Trusted",es:"Muy Confiable",ca:"Molt Fiable"},color:"bg-green-100 text-green-700 border-green-300"}:e>=75?{label:{tr:"G\xfcvenilir",en:"Trusted",es:"Confiable",ca:"Fiable"},color:"bg-blue-100 text-blue-700 border-blue-300"}:e>=60?{label:{tr:"ƒ∞yi",en:"Good",es:"Bueno",ca:"Bo"},color:"bg-yellow-100 text-yellow-700 border-yellow-300"}:{label:{tr:"Yeni",en:"New",es:"Nuevo",ca:"Nou"},color:"bg-gray-100 text-gray-600 border-gray-300"};return(0,r.jsxs)("div",{className:(0,o.cn)("inline-flex items-center gap-1.5 rounded-full border font-medium",l.color,{sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"}[t]),children:[r.jsx(i.Z,{className:"sm"===t?"w-3 h-3":"w-4 h-4"}),r.jsx("span",{children:l.label[s]||l.label.tr}),void 0!==a&&a>0&&(0,r.jsxs)("span",{className:"opacity-70",children:["(",a,")"]})]})}function p({userId:e}){let{language:a}=(0,c.Z)(),[t,l]=(0,s.useState)(null),[i,o]=(0,s.useState)(!0);if(i)return r.jsx("div",{className:"animate-pulse h-20 bg-gray-100 rounded-lg"});if(!t||0===t.totalReviews)return(0,r.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[r.jsx(n.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"tr"===a?"Hen\xfcz deƒüerlendirme yok":"No reviews yet"})]});let u={tr:{reviews:"deƒüerlendirme",basedOn:"\xfczerinden"},en:{reviews:"reviews",basedOn:"based on"},es:{reviews:"rese\xf1as",basedOn:"basado en"},ca:{reviews:"ressenyes",basedOn:"basat en"}},p=u[a]||u.tr;return(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-4 border",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.averageRating.toFixed(1)}),r.jsx(m,{rating:Math.round(t.averageRating),size:"sm"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[t.totalReviews," ",p.reviews]})]}),r.jsx("div",{className:"flex-1 space-y-1",children:[5,4,3,2,1].map(e=>{let a=t.ratingDistribution[e]||0,s=t.totalReviews>0?a/t.totalReviews*100:0;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500 w-3",children:e}),r.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-yellow-400 transition-all duration-500",style:{width:`${s}%`}})}),r.jsx("span",{className:"text-xs text-gray-400 w-6",children:a})]},e)})})]}),t.topTags.length>0&&r.jsx("div",{className:"mt-3 pt-3 border-t",children:r.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.topTags.map(({tag:e,count:t})=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-50 text-green-700 text-xs rounded-full",children:[r.jsx(d,{className:"w-3 h-3"}),x[e]?.[a]||e,(0,r.jsxs)("span",{className:"opacity-60",children:["(",t,")"]})]},e))})})]})}},48015:(e,a,t)=>{"use strict";function r(e){if(!e)return"Anonim";if(e.nickname&&e.nickname.trim())return e.nickname.trim();if(e.name&&e.name.trim()){let a=e.name.trim().split(" ").filter(e=>e.length>0);if(1===a.length)return a[0];if(a.length>=2){let e=a[0],t=a[a.length-1].charAt(0).toUpperCase();return`${e} ${t}.`}}if(e.email){let a=e.email.split("@")[0];return a.length>15?a.substring(0,15)+"...":a}return"Anonim"}t.d(a,{Gf:()=>r})},40140:(e,a,t)=>{"use strict";async function r(e){try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.type,message:e.message,severity:e.severity||"error",userId:e.userId,url:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,metadata:e.metadata?JSON.stringify(e.metadata):void 0})})}catch{console.error("Error reporter failed:",e.message)}}function s(){return!1}t.d(a,{s9:()=>s,wz:()=>n,DV:()=>d,Pe:()=>o});let l={TIMEOUT:"Sunucu yanƒ±t vermedi. L\xfctfen tekrar deneyin.",SERVER_ERROR:"Sunucu hatasƒ± olu≈ütu. L\xfctfen daha sonra tekrar deneyin.",NETWORK_ERROR:"Baƒülantƒ± hatasƒ±. L\xfctfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.",UNAUTHORIZED:"Oturum s\xfcreniz doldu. L\xfctfen tekrar giri≈ü yapƒ±n.",FORBIDDEN:"Bu i≈ülem i\xe7in yetkiniz yok.",NOT_FOUND:"ƒ∞stenen kaynak bulunamadƒ±.",RATE_LIMITED:"\xc7ok fazla istek g\xf6nderdiniz. L\xfctfen biraz bekleyin.",UNKNOWN:"Beklenmeyen bir hata olu≈ütu."};async function i(e,a,t){let s=new AbortController,i=setTimeout(()=>s.abort(),t);try{let t=await fetch(e,{...a,signal:s.signal,headers:{"Content-Type":"application/json",...a.headers}});clearTimeout(i);let n=null,d=t.headers.get("content-type");if(d?.includes("application/json"))try{n=await t.json()}catch{n=null}if(!t.ok){let a=n?.error||n?.message||function(e,a){switch(e){case 401:return l.UNAUTHORIZED;case 403:return l.FORBIDDEN;case 404:return l.NOT_FOUND;case 429:return l.RATE_LIMITED;case 500:case 502:case 503:case 504:return l.SERVER_ERROR;default:return l.UNKNOWN}}(t.status);return t.status>=500&&r({type:"api_error",message:`API ${t.status}: ${e}`,severity:"error",metadata:{url:e,status:t.status,errorMsg:a}}),{data:null,error:a,status:t.status,ok:!1,isOffline:!1,isTimeout:!1}}return{data:n,error:null,status:t.status,ok:!0,isOffline:!1,isTimeout:!1}}catch(e){if(clearTimeout(i),"AbortError"===e.name)return{data:null,error:l.TIMEOUT,status:0,ok:!1,isOffline:!1,isTimeout:!0};return{data:null,error:l.NETWORK_ERROR,status:0,ok:!1,isOffline:!1,isTimeout:!1}}}async function n(e,a={}){let{timeout:t=1e4,retries:r=2,retryDelay:s=1e3,...l}=a,n=null;for(let a=0;a<=r&&(a>0&&await new Promise(e=>setTimeout(e,s)),!(n=await i(e,l,t)).ok&&401!==n.status&&403!==n.status&&404!==n.status&&429!==n.status);a++);return n}async function d(e,a){return n(e,{...a,method:"GET"})}async function o(e,a,t){return n(e,{...t,method:"POST",body:a?JSON.stringify(a):void 0})}},68637:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l});var r=t(84330),s=t(77189);function l(...e){return(0,s.m6)((0,r.W)(e))}},75909:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(71945).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},76021:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(71945).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},96527:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(71945).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},35825:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(71945).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},26482:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(71945).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},97107:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(71945).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},79046:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(71945).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},46586:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(88895).createProxy)(String.raw`/home/ubuntu/takas-a-kodlar/nextjs_space/app/urun/[id]/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[8412,4674,6866,858],()=>t(54401));module.exports=r})();