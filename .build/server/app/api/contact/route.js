"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},26068:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>R,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var i={};a.r(i),a.d(i,{POST:()=>c,dynamic:()=>l});var r=a(79182),s=a(72007),n=a(56719),o=a(93442),u=a(83178),d=a(85698),w=a(92054);let l="force-dynamic";async function c(e){try{let t=e.headers.get("x-forwarded-for")?.split(",")[0]?.trim()||e.headers.get("x-real-ip")||"unknown";if(!(await (0,d.Dn)(t,"api/messages")).allowed)return o.NextResponse.json({error:"\xc7ok fazla mesaj g\xf6nderdiniz. L\xfctfen biraz bekleyin."},{status:429});let{name:a,email:i,phone:r,subject:s,message:n}=await e.json()??{};if(!a||!i||!n)return o.NextResponse.json({error:"Ad, email ve mesaj alanları gerekli"},{status:400});let l=await u.default.contact.create({data:{name:(0,w.oO)(a),email:i.toLowerCase().trim(),phone:r??null,subject:s?(0,w.oO)(s):null,message:(0,w.oO)(n)}});return o.NextResponse.json({success:!0,id:l.id,message:"Mesajınız başarıyla g\xf6nderildi"})}catch(e){return console.error("Contact form error:",e),o.NextResponse.json({error:"Mesaj g\xf6nderilirken bir hata oluştu"},{status:500})}}let p=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"/home/ubuntu/takas-a-kodlar/nextjs_space/app/api/contact/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:x}=p,f="/api/contact/route";function R(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}},85698:(e,t,a)=>{a.d(t,{Dn:()=>n,s$:()=>o});var i=a(83178),r=a(59521);let s={"api/products":{windowMs:6e4,maxRequests:100},"api/favorites":{windowMs:6e4,maxRequests:60},"api/messages":{windowMs:6e4,maxRequests:30},"api/signup":{windowMs:36e5,maxRequests:5},"api/swap-requests":{windowMs:6e4,maxRequests:20},"api/services":{windowMs:6e4,maxRequests:30},"api/wishboard":{windowMs:6e4,maxRequests:20},"api/profile/photo":{windowMs:3e5,maxRequests:10},"api/admin/backup":{windowMs:36e5,maxRequests:3},"api/auth/two-factor":{windowMs:3e5,maxRequests:5},"api/valor/calculate":{windowMs:6e4,maxRequests:5},"api/ai-visualize":{windowMs:6e4,maxRequests:5},"api/visual-search":{windowMs:6e4,maxRequests:5},"api/ai-moderation":{windowMs:6e4,maxRequests:10},"api/ai-translate":{windowMs:6e4,maxRequests:10},default:{windowMs:6e4,maxRequests:100}};async function n(e,t){if(["join@takas-a.com"].includes(e))return{allowed:!0,remaining:999,resetAt:new Date(Date.now()+6e4)};let a=s[t]||s.default,r=new Date,n=new Date(r.getTime()-a.windowMs);try{let s=await i.default.rateLimit.findUnique({where:{identifier_endpoint:{identifier:e,endpoint:t}}});if(!s)return await i.default.rateLimit.create({data:{identifier:e,endpoint:t,count:1,windowStart:r}}),{allowed:!0,remaining:a.maxRequests-1,resetAt:new Date(r.getTime()+a.windowMs)};if(s.windowStart<n)return await i.default.rateLimit.update({where:{id:s.id},data:{count:1,windowStart:r}}),{allowed:!0,remaining:a.maxRequests-1,resetAt:new Date(r.getTime()+a.windowMs)};if(s.count>=a.maxRequests){let e=new Date(s.windowStart.getTime()+a.windowMs);return{allowed:!1,remaining:0,resetAt:e}}return await i.default.rateLimit.update({where:{id:s.id},data:{count:s.count+1}}),{allowed:!0,remaining:a.maxRequests-s.count-1,resetAt:new Date(s.windowStart.getTime()+a.windowMs)}}catch(e){return console.error("Rate limit check error:",e),{allowed:!1,remaining:0,resetAt:new Date(r.getTime()+a.windowMs)}}}function o(e){return(0,r.H9)(e)}},92054:(e,t,a)=>{a.d(t,{oO:()=>i});function i(e){return e&&"string"==typeof e?e.trim().replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/on\w+\s*=\s*["'][^"']*["']/gi,"").replace(/javascript\s*:/gi,"").replace(/data\s*:\s*text\/html/gi,"").replace(/<iframe/gi,"&lt;iframe").replace(/<object/gi,"&lt;object").replace(/<embed/gi,"&lt;embed").replace(/<form/gi,"&lt;form"):""}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[8412,7609,9521],()=>a(26068));module.exports=i})();