"use strict";(()=>{var e={};e.id=5254,e.ids=[5254],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},86624:e=>{e.exports=require("querystring")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},80401:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>P,patchFetch:()=>S,requestAsyncStorage:()=>R,routeModule:()=>b,serverHooks:()=>_,staticGenerationAsyncStorage:()=>A});var a={};r.r(a),r.d(a,{GET:()=>h,PATCH:()=>z,POST:()=>v,dynamic:()=>y});var i=r(79182),n=r(72007),s=r(56719),o=r(93442),d=r(57978),l=r(83178),u=r(11826),c=r(59628),p=r(30855),m=r(68247),f=r(53184),g=r(81510);async function w(e){let t=new Date(Date.now()-36e5);try{let r=await l.default.swapRequest.count({where:{requesterId:e,createdAt:{gte:t}}});if(r>20)return{userId:e,type:"spam_swaps",details:`1 saatte ${r} takas teklifi (limit: 20)`,severity:"medium"}}catch(e){console.error("Spam swaps check failed:",e)}return null}async function x(e){try{let t=new Date(Date.now()-36e5);if(await l.default.errorLog.findFirst({where:{type:`suspicious_${e.type}`,userId:e.userId,createdAt:{gte:t}}}))return;await l.default.errorLog.create({data:{type:`suspicious_${e.type}`,message:e.details,severity:"critical"===e.severity?"critical":"warning",userId:e.userId,metadata:JSON.stringify(e)}})}catch(e){console.error("Failed to log suspicious activity:",e)}}let y="force-dynamic";async function k(e){try{let t=process.env.NEXTAUTH_URL||"https://takas-a.com",r=`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
        <h2 style="color: #7C3AED; border-bottom: 2px solid #7C3AED; padding-bottom: 10px;">
          ğŸ’œ Yeni \xdcr\xfcn Ä°lgi Bildirimi
        </h2>
        <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin: 20px 0;">
          <p style="margin: 10px 0;"><strong>KullanÄ±cÄ±:</strong> ${e.requesterName}</p>
          <p style="margin: 10px 0;"><strong>Email:</strong> <a href="mailto:${e.requesterEmail}">${e.requesterEmail}</a></p>
          <p style="margin: 10px 0;"><strong>\xdcr\xfcn:</strong> ${e.productTitle}</p>
          ${e.message?`
          <p style="margin: 10px 0;"><strong>Mesaj:</strong></p>
          <div style="background: white; padding: 15px; border-radius: 4px; border-left: 4px solid #7C3AED;">
            ${e.message}
          </div>
          `:""}
        </div>
        <p style="margin: 20px 0;">
          <a href="${t}/urun/${e.productId}" style="background: #7C3AED; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; display: inline-block;">
            \xdcr\xfcn\xfc G\xf6r\xfcnt\xfcle
          </a>
        </p>
        <p style="color: #666; font-size: 12px;">
          Tarih: ${new Date().toLocaleString("tr-TR")}
        </p>
      </div>
    `;await fetch("https://apps.abacus.ai/api/sendNotificationEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deployment_token:process.env.ABACUSAI_API_KEY,app_id:process.env.WEB_APP_ID,notification_id:process.env.NOTIF_ID_RN_LGI_BILDIRIMI,subject:`[TAKAS-A] Yeni Ä°lgi: ${e.productTitle}`,body:r,is_html:!0,recipient_email:"join@takas-a.com",sender_email:"noreply@takas-a.com",sender_alias:"TAKAS-A"})})}catch(e){console.error("Admin notification error:",e)}}async function q(e,t,r,a){try{let t=await fetch("https://apps.abacus.ai/api/sendNotificationEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deployment_token:process.env.ABACUSAI_API_KEY,app_id:process.env.WEB_APP_ID,notification_id:process.env.NOTIF_ID_EMAIL_DORULAMA_KODU,subject:r,body:a,is_html:!0,recipient_email:e,sender_email:"noreply@takas-a.com",sender_alias:"TAKAS-A"})});return(await t.json()).success}catch(e){return console.error("Swap email send error:",e),!1}}function I(e,t,r,a,i,n,s){return`
  <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8fafc; padding: 40px 20px;">
    <div style="background: white; border-radius: 16px; padding: 40px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
      <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: #7c3aed; margin: 0; font-size: 28px;">TAKAS-A</h1>
        <p style="color: #22c55e; margin-top: 8px; font-weight: bold;">âœ… Takas OnaylandÄ±!</p>
      </div>
      
      <p style="color: #334155; font-size: 16px;">Merhaba ${e},</p>
      
      <p style="color: #475569; font-size: 15px; line-height: 1.6;">
        <strong>${r}</strong> ile 
        <strong>${t}</strong>${n&&s?` â†” <strong>${s}</strong>`:""} 
        takasÄ± onaylandÄ±!
      </p>
      
      <div style="background: #f0fdf4; border: 2px solid #22c55e; border-radius: 12px; padding: 20px; margin: 20px 0;">
        <h3 style="color: #166534; margin: 0 0 10px;">ğŸ“‹ Sonraki AdÄ±mlar:</h3>
        <ol style="color: #166534; font-size: 14px; line-height: 1.8; padding-left: 20px;">
          <li>KarÅŸÄ± tarafla buluÅŸma noktasÄ± ve zamanÄ± belirleyin</li>
          <li>${i?'AlÄ±cÄ± "\xdcr\xfcn\xfc Almaya HazÄ±rÄ±m" dediÄŸinde 6 haneli doÄŸrulama kodu iletilecek':'\xdcr\xfcn\xfc teslim almaya hazÄ±r olduÄŸunuzda "\uD83D\uDCE6 \xdcr\xfcn\xfc Almaya HazÄ±rÄ±m" butonuna basÄ±n'}</li>
          <li>${i?"AlÄ±cÄ± size bu kodu s\xf6yleyecek â€” doÄŸrulayÄ±n":"6 haneli kodu satÄ±cÄ±ya s\xf6yleyin"}</li>
          <li>Kod doÄŸrulanÄ±nca takas tamamlanÄ±r ğŸ‰</li>
        </ol>
      </div>

      <div style="background: linear-gradient(135deg, #7c3aed 0%, #3b82f6 100%); border-radius: 12px; padding: 20px; text-align: center; margin: 20px 0;">
        <p style="color: white; font-size: 12px; margin: 0 0 5px; opacity: 0.8;">QR Kod ReferansÄ±</p>
        <p style="color: white; font-size: 14px; font-weight: bold; letter-spacing: 2px; margin: 0;">${a}</p>
      </div>

      <p style="color: #ef4444; font-size: 13px; text-align: center; font-weight: bold;">
        âš ï¸ 6 haneli doÄŸrulama kodunu kimseyle paylaÅŸmayÄ±n! 
        Kod sadece teslim anÄ±nda kullanÄ±lmalÄ±dÄ±r.
      </p>
      
      <div style="text-align: center; margin-top: 30px;">
        <a href="https://takas-a.com/takaslarim" style="background: #7c3aed; color: white; padding: 14px 30px; border-radius: 10px; text-decoration: none; font-weight: bold; font-size: 15px;">
          TakaslarÄ±ma Git
        </a>
      </div>

      <hr style="border: none; border-top: 1px solid #e2e8f0; margin: 30px 0;" />
      <p style="color: #94a3b8; font-size: 12px; text-align: center;">
        TAKAS-A â€” G\xfcvenli Takas Platformu
      </p>
    </div>
  </div>
  `}async function h(e){try{let t=await (0,d.getServerSession)(u.L);if(!t?.user?.email)return o.NextResponse.json({error:"GiriÅŸ yapmalÄ±sÄ±nÄ±z"},{status:401});let r=await l.default.user.findUnique({where:{email:t.user.email}});if(!r)return o.NextResponse.json({error:"KullanÄ±cÄ± bulunamadÄ±"},{status:404});let{searchParams:a}=new URL(e.url),i=a.get("type"),n=a.get("status"),s=a.get("role"),c="true"===a.get("count"),p="admin"===r.role;if("active_count"===n){let e=await l.default.swapRequest.count({where:{OR:[{requesterId:r.id},{ownerId:r.id}],status:{in:["negotiating","accepted","delivery_proposed","qr_generated","arrived","qr_scanned","dropped_off","inspection","code_sent","cancel_requested","in_delivery","delivered","delivery_agreed","awaiting_delivery","completed"]}}});return o.NextResponse.json({count:e})}if(p&&"true"===a.get("all")){let e=await l.default.swapRequest.findMany({include:{product:{include:{category:!0,user:{select:{id:!0,name:!0,nickname:!0,email:!0}}}},requester:{select:{id:!0,name:!0,nickname:!0,email:!0,image:!0}},owner:{select:{id:!0,name:!0,nickname:!0,email:!0,image:!0}}},orderBy:{createdAt:"desc"}});return o.NextResponse.json({requests:e})}let m={OR:[{requesterId:r.id},{ownerId:r.id}]};if("sent"===i?m={requesterId:r.id}:"received"===i&&(m={ownerId:r.id}),"owner"===s?m={ownerId:r.id}:"requester"===s&&(m={requesterId:r.id}),n&&(m.status=n),c){let e=await l.default.swapRequest.count({where:m});return o.NextResponse.json({count:e})}let f=await l.default.swapRequest.findMany({where:m,include:{product:{include:{category:!0,user:{select:{id:!0,name:!0,nickname:!0}}}},offeredProduct:{select:{id:!0,title:!0,images:!0,valorPrice:!0}},requester:{select:{id:!0,name:!0,nickname:!0,email:!0,image:!0}},owner:{select:{id:!0,name:!0,nickname:!0,email:!0,image:!0}},deliveryPoint:{select:{id:!0,name:!0,address:!0}}},orderBy:{createdAt:"desc"}}),g=f.filter(e=>"delivery_proposed"===e.status).map(e=>e.id),w={};if(g.length>0){for(let e of(await l.default.swapStatusLog.findMany({where:{swapRequestId:{in:g},reason:{startsWith:"DELIVERY_PROPOSAL|"}},orderBy:{createdAt:"desc"}})))if(!w[e.swapRequestId]&&e.reason)try{let t=e.reason.replace("DELIVERY_PROPOSAL|",""),r=JSON.parse(t);w[e.swapRequestId]=r.proposedBy}catch(e){}}let x=f.map(e=>({...e,lastProposedBy:w[e.id]||null}));return o.NextResponse.json({requests:x})}catch(e){return console.error("Swap requests fetch error:",e),o.NextResponse.json({error:"Talepler y\xfcklenirken hata oluÅŸtu"},{status:500})}}async function v(e){try{let t=await (0,d.getServerSession)(u.L);if(!t?.user?.email)return o.NextResponse.json({error:"GiriÅŸ yapmalÄ±sÄ±nÄ±z"},{status:401});let a=await l.default.user.findUnique({where:{email:t.user.email},select:{id:!0,name:!0,email:!0,valorBalance:!0,lockedValor:!0,isPhoneVerified:!0,pendingReviewSwapId:!0,trustScore:!0}});if(!a)return o.NextResponse.json({error:"KullanÄ±cÄ± bulunamadÄ±"},{status:404});if(a.pendingReviewSwapId)return o.NextResponse.json({error:"\xd6nce son takasÄ±nÄ±zÄ± deÄŸerlendirmeniz gerekiyor!",pendingReviewSwapId:a.pendingReviewSwapId,requiresReview:!0},{status:400});let i=await (0,f.kw)(a.id);if(!i.eligible)return o.NextResponse.json({error:i.reason,swapEligibility:{canSwap:!1,activeProducts:i.details?.activeProductCount||0,minProducts:i.details?.minProductsRequired||1,isNewUser:i.details?.isNewUser||!1,swapsUsed:i.details?.swapRequestCount||0,maxSwaps:i.details?.maxSwapRequestsForNewUser||3}},{status:403});let n=(0,p.hA)(a.trustScore??100);if(n.isSuspended)return o.NextResponse.json({error:n.message||"HesabÄ±nÄ±z askÄ±ya alÄ±nmÄ±ÅŸtÄ±r.",trustScore:a.trustScore,isSuspended:!0},{status:403});if(!n.canSwap)return o.NextResponse.json({error:"G\xfcven puanÄ±nÄ±z takas yapmanÄ±za izin vermiyor.",trustScore:a.trustScore},{status:403});let s=await l.default.swapRequest.count({where:{OR:[{requesterId:a.id},{ownerId:a.id}],status:{in:["pending","negotiating","accepted","delivery_proposed","qr_generated","arrived","qr_scanned","inspection","code_sent","dropped_off"]}}});if(s>=n.maxActiveSwaps)return o.NextResponse.json({error:`G\xfcven puanÄ±nÄ±za g\xf6re en fazla ${n.maxActiveSwaps} aktif takas yapabilirsiniz. Mevcut: ${s}`,trustScore:a.trustScore,limit:n.maxActiveSwaps,current:s},{status:400});let m=await e.json(),{success:y,error:q}=(0,g.Gu)(g.C$,m);if(!y)return o.NextResponse.json({error:q},{status:400});let{productId:I,message:h,offeredProductId:v,offeredValor:z,previewOnly:b}=m;if(!I)return o.NextResponse.json({error:"\xdcr\xfcn ID gerekli"},{status:400});let R=await l.default.product.findUnique({where:{id:I},include:{user:!0}});if(!R)return o.NextResponse.json({error:"\xdcr\xfcn bulunamadÄ±"},{status:404});if(R.userId===a.id)return o.NextResponse.json({error:"Kendi \xfcr\xfcn\xfcn\xfcze ilgi bildiremezsiniz"},{status:400});let A=0;if(v){let e=await l.default.product.findUnique({where:{id:v},select:{valorPrice:!0,userId:!0}});e&&e.userId===a.id&&(A=e.valorPrice)}let _=await (0,p.Jk)(a.id,R.userId,R.valorPrice,A||void 0);n.requiresHigherDeposit&&n.depositMultiplier>1&&(_.requesterDeposit=Math.ceil(_.requesterDeposit*n.depositMultiplier),_.ownerDeposit=Math.ceil(_.ownerDeposit*n.depositMultiplier),_.totalLocked=_.requesterDeposit+_.ownerDeposit);let P=await (0,p.P3)(a.id),S=(0,p._G)(P.trustLevel);if(b){let e=a.valorBalance-a.lockedValor,{checkFirstSwapGainLimit:t,getUsableBonusValor:i,getCompletedSwapCount:n}=await Promise.resolve().then(r.bind(r,53184)),s=await n(a.id),d=await i(a.id),l={completedSwaps:s,currentNetGain:0,remainingAllowance:400,maxAllowedGain:400,lockedBonus:d.lockedBonus};if(s<3){let e=await t(a.id,0);e.details&&(l.currentNetGain=e.details.currentNetGain,l.remainingAllowance=e.details.remainingAllowance,l.maxAllowedGain=e.details.maxAllowedGain)}return o.NextResponse.json({preview:!0,depositRequired:_.requesterDeposit,availableBalance:e,canAfford:e>=_.requesterDeposit,trustLevel:P.trustLevel,trustBadge:S.label,depositRate:`%${Math.round(100*P.depositRate)}`,completedSwaps:l.completedSwaps,currentNetGain:l.currentNetGain,remainingAllowance:l.remainingAllowance,maxAllowedGain:l.maxAllowedGain,lockedBonus:l.lockedBonus,message:`Takas talebi i\xe7in ${_.requesterDeposit} Valor teminat yatÄ±rmanÄ±z gerekiyor. BaÅŸarÄ±lÄ± takas sonrasÄ± iade edilecektir.`})}let j=R.valorPrice-(A||0)-(z||0),N=await (0,f.Hw)(a.id,_.requesterDeposit,j>0?j:0);if(!N.canSwap)return o.NextResponse.json({error:N.reason,capacityDetails:{usableBalance:N.usableBalance,lockedBonus:N.lockedBonus,gainLimitOk:N.gainLimitOk,depositRequired:_.requesterDeposit}},{status:403});let T=N.usableBalance;if(T<_.requesterDeposit)return o.NextResponse.json({error:`Yetersiz bakiye. Teminat i\xe7in ${_.requesterDeposit} Valor gerekli, mevcut: ${T} Valor`,depositRequired:_.requesterDeposit,availableBalance:T},{status:400});if(await l.default.swapRequest.findFirst({where:{productId:I,requesterId:a.id,status:"pending"}}))return o.NextResponse.json({error:"Bu \xfcr\xfcn i\xe7in zaten bekleyen bir talebiniz var"},{status:400});let D=null!=z&&""!==z?Number(z):R.valorPrice,$=await l.default.swapRequest.create({data:{requesterId:a.id,ownerId:R.userId,productId:I,offeredProductId:v,message:h,status:"pending",requesterDeposit:_.requesterDeposit,escrowStatus:"locked",agreedPriceRequester:D,pendingValorAmount:D,negotiationStatus:"price_proposed"},include:{product:!0,requester:{select:{id:!0,name:!0,email:!0}}}});return await (0,p.Eg)(a.id,_.requesterDeposit,$.id,"requester"),h&&h.trim()&&await l.default.message.create({data:{senderId:a.id,receiverId:R.userId,content:`ğŸ’œ Takas Talebi: ${h}`,productId:I,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"swap_request",swapRequestId:$.id})}}),await k({requesterName:a.name||"Anonim",requesterEmail:a.email,productTitle:R.title,productId:R.id,message:h}),(0,c.LX)(R.userId,c.j_.SWAP_REQUEST,{requesterName:a.name||"Birisi",productTitle:R.title,swapId:$.id}).catch(e=>console.error("Push notification error:",e)),w(a.id).then(e=>{e&&x(e)}).catch(e=>console.error("Fraud check error:",e)),o.NextResponse.json($)}catch(e){return console.error("Swap request create error:",e),o.NextResponse.json({error:"Talep oluÅŸturulurken hata oluÅŸtu"},{status:500})}}async function z(e){try{let t=await (0,d.getServerSession)(u.L);if(!t?.user?.email)return o.NextResponse.json({error:"GiriÅŸ yapmalÄ±sÄ±nÄ±z"},{status:401});let a=await l.default.user.findUnique({where:{email:t.user.email}});if(!a)return o.NextResponse.json({error:"KullanÄ±cÄ± bulunamadÄ±"},{status:404});let i=await e.json(),{id:n,requestId:s,status:f,action:g,proposedPrice:w}=i,x=n||s;if("propose_price"===g){if(!x||void 0===w)return o.NextResponse.json({error:"Talep ID ve fiyat gerekli"},{status:400});let e=await l.default.swapRequest.findUnique({where:{id:x},include:{product:!0,requester:!0,owner:!0}});if(!e)return o.NextResponse.json({error:"Talep bulunamadÄ±"},{status:404});let t=e.requesterId===a.id,r=e.ownerId===a.id;if(!t&&!r)return o.NextResponse.json({error:"Bu talep size ait deÄŸil"},{status:403});let i={negotiationStatus:"price_proposed"};t?i.agreedPriceRequester=w:i.agreedPriceOwner=w,await l.default.swapRequest.update({where:{id:x},data:i});let n=t?w:e.agreedPriceRequester,s=r?w:e.agreedPriceOwner;if(null!==n&&null!==s&&n===s){await l.default.swapRequest.update({where:{id:x},data:{negotiationStatus:"price_agreed",priceAgreedAt:new Date,pendingValorAmount:n}}),await l.default.message.create({data:{senderId:a.id,receiverId:t?e.ownerId:e.requesterId,content:`ğŸ¤ Fiyat anlaÅŸmasÄ± saÄŸlandÄ±: ${n} Valor! Åimdi takasÄ± onaylayabilirsiniz.`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"price_agreed",swapRequestId:x,agreedPrice:n})}});let r=t?e.ownerId:e.requesterId;return(0,c.LX)(r,c.j_.SWAP_REQUEST,{requesterName:a.name||"Birisi",productTitle:`${e.product.title} - Fiyat anlaÅŸmasÄ±: ${n} Valor`,swapId:x}).catch(e=>console.error("Push error:",e)),o.NextResponse.json({success:!0,priceAgreed:!0,agreedPrice:n,message:`Tebrikler! ${n} Valor fiyatÄ±nda anlaÅŸtÄ±nÄ±z.`})}let d=t?e.ownerId:e.requesterId;return await l.default.message.create({data:{senderId:a.id,receiverId:d,content:`ğŸ’° Fiyat \xf6nerisi: ${w} Valor. Kabul ediyorsanÄ±z siz de aynÄ± fiyatÄ± girin.`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"price_proposal",swapRequestId:x,proposedPrice:w})}}),(0,c.LX)(d,c.j_.SWAP_REQUEST,{requesterName:a.name||"Birisi",productTitle:`${e.product.title} i\xe7in ${w} Valor \xf6nerdi`,swapId:x}).catch(e=>console.error("Push error:",e)),o.NextResponse.json({success:!0,priceAgreed:!1,yourPrice:w,otherPrice:t?e.agreedPriceOwner:e.agreedPriceRequester,message:"Fiyat \xf6neriniz g\xf6nderildi. KarÅŸÄ± tarafÄ±n onayÄ± bekleniyor."})}if("accept_price"===g){let e=await l.default.swapRequest.findUnique({where:{id:x},include:{product:!0,requester:!0,owner:!0}});if(!e)return o.NextResponse.json({error:"Talep bulunamadÄ±"},{status:404});if(e.ownerId!==a.id)return o.NextResponse.json({error:"Sadece \xfcr\xfcn sahibi teklifi kabul edebilir"},{status:403});let t=e.agreedPriceRequester||e.pendingValorAmount||e.product.valorPrice;return await l.default.swapRequest.update({where:{id:x},data:{agreedPriceOwner:t,pendingValorAmount:t,negotiationStatus:"price_agreed",priceAgreedAt:new Date}}),await l.default.message.create({data:{senderId:a.id,receiverId:e.requesterId,content:`ğŸ¤ Fiyat teklifi kabul edildi: ${t} Valor! Åimdi takasÄ± baÅŸlatabilirsiniz.`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"price_accepted",swapRequestId:x,agreedPrice:t})}}),(0,c.LX)(e.requesterId,c.j_.SWAP_REQUEST,{requesterName:a.name||"\xdcr\xfcn sahibi",productTitle:`${e.product.title} - Fiyat kabul edildi: ${t} Valor`,swapId:x}).catch(e=>console.error("Push error:",e)),o.NextResponse.json({success:!0,priceAgreed:!0,agreedPrice:t,message:`Teklif kabul edildi! ${t} Valor \xfczerinden anlaÅŸÄ±ldÄ±.`})}if("confirm_swap"===g){let e=await l.default.swapRequest.findUnique({where:{id:x},include:{product:{include:{category:!0}},requester:!0,owner:!0}});if(!e)return o.NextResponse.json({error:"Talep bulunamadÄ±"},{status:404});if("price_agreed"!==e.negotiationStatus)return o.NextResponse.json({error:"\xd6nce fiyat anlaÅŸmasÄ± saÄŸlanmalÄ±"},{status:400});let t=e.requesterId===a.id,r=e.ownerId===a.id;if(!t&&!r)return o.NextResponse.json({error:"Bu talep size ait deÄŸil"},{status:403});let i=Date.now().toString(36).toUpperCase(),n=Math.random().toString(36).substring(2,10).toUpperCase(),s=`TAKAS-${i}-${n}`,d=Math.floor(1e5+9e5*Math.random()).toString(),u=null,f=null,g=!!e.offeredProductId;if(g){let e=(Date.now()+1).toString(36).toUpperCase(),t=Math.random().toString(36).substring(2,10).toUpperCase();u=`TAKAS-${e}-${t}`,f=Math.floor(1e5+9e5*Math.random()).toString()}let w=e.pendingValorAmount||e.agreedPriceRequester||0,y=await (0,p.Jk)(e.requesterId,e.ownerId,w,0),k=await l.default.user.findUnique({where:{id:e.requesterId},select:{valorBalance:!0,lockedValor:!0}});if(k&&k.valorBalance-k.lockedValor<y.requesterDeposit)return o.NextResponse.json({error:`Yetersiz bakiye. ${y.requesterDeposit} Valor teminat gerekli.`,depositRequired:y.requesterDeposit},{status:400});await (0,p.Eg)(e.requesterId,y.requesterDeposit,x,"requester");let h=(0,m.nk)(w,e.product.category?.name),v={status:"accepted",qrCode:s,qrCodeGeneratedAt:new Date,deliveryVerificationCode:d,verificationCodeSentAt:new Date,depositsLocked:!0,requesterDeposit:y.requesterDeposit,escrowStatus:"active",riskTier:h,autoCompleteEligible:"low"===h};g&&u&&f&&(v.qrCodeB=u,v.qrCodeBGeneratedAt=new Date,v.deliveryVerificationCodeB=f,v.verificationCodeBSentAt=new Date),await l.default.swapRequest.update({where:{id:x},data:v}),k&&await l.default.escrowLedger.create({data:{swapRequestId:x,userId:e.requesterId,type:"freeze",amount:y.requesterDeposit,balanceBefore:k.valorBalance,balanceAfter:k.valorBalance,reason:"Takas teminatÄ± kilitlendi"}});let z=g?`âœ… \xdcR\xdcNE KARÅI \xdcR\xdcN TAKASI ONAYLANDI!

ğŸ”„ Her iki taraf da hem satÄ±cÄ± hem alÄ±cÄ± konumundadÄ±r.

ğŸ“¦ Ä°KÄ° AYRI TESLÄ°MAT GEREKLÄ°:

1ï¸âƒ£ QR Kod A (${e.product.title}):
   â†’ AlÄ±cÄ±: Talep eden (requester) taratacak
   â†’ Kod: ${s?.slice(0,15)}...

2ï¸âƒ£ QR Kod B (${e.offeredProduct?.title||"Teklif edilen \xfcr\xfcn"}):
   â†’ AlÄ±cÄ±: \xdcr\xfcn sahibi (owner) taratacak
   â†’ Kod: ${u?.slice(0,15)}...

âš ï¸ Her iki QR kod taratÄ±lÄ±p onaylanÄ±nca takas tamamlanÄ±r.`:`âœ… Takas onaylandÄ±! QR Kod ve doÄŸrulama kodu oluÅŸturuldu. Teslim noktasÄ±nda buluÅŸabilirsiniz.`;await l.default.message.create({data:{senderId:a.id,receiverId:t?e.ownerId:e.requesterId,content:z,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:g?"product_swap_confirmed":"swap_confirmed",swapRequestId:x,isProductToProductSwap:g})}});let b=t?e.ownerId:e.requesterId;(0,c.LX)(b,c.j_.SWAP_ACCEPTED,{productTitle:e.product.title,productId:e.productId,swapId:x}).catch(e=>console.error("Push error:",e));let R=await l.default.user.findUnique({where:{id:e.ownerId},select:{email:!0,name:!0,nickname:!0}}),A=await l.default.user.findUnique({where:{id:e.requesterId},select:{email:!0,name:!0,nickname:!0}}),_=R?.nickname||R?.name||"KullanÄ±cÄ±",P=A?.nickname||A?.name||"KullanÄ±cÄ±",S=e.offeredProduct?.title;if(R?.email){let t=I(_,e.product.title,P,s,!0,g,S);q(R.email,_,`âœ… Takas OnaylandÄ±: ${e.product.title}`,t).catch(e=>console.error("Owner email error:",e))}if(A?.email){let t=I(P,e.product.title,_,s,!1,g,S);q(A.email,P,`âœ… Takas OnaylandÄ±: ${e.product.title}`,t).catch(e=>console.error("Requester email error:",e))}return await l.default.message.create({data:{senderId:a.id,receiverId:t?e.ownerId:e.requesterId,content:`ğŸ” QR Kod ReferansÄ±: ${s.slice(0,20)}...

ğŸ“§ DetaylÄ± bilgi e-posta adresinize g\xf6nderildi.

ğŸ“¦ \xdcr\xfcn\xfc teslim almaya hazÄ±r olduÄŸunuzda "\xdcr\xfcn\xfc Almaya HazÄ±rÄ±m" butonunu kullanÄ±n.

âš ï¸ 6 haneli doÄŸrulama kodu, alÄ±cÄ± hazÄ±r olduÄŸunda otomatik iletilecektir.`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"qr_code_info",swapRequestId:x,qrCodePreview:s.slice(0,15)})}}),o.NextResponse.json({success:!0,message:g?"\xdcr\xfcne karÅŸÄ± \xfcr\xfcn takasÄ± onaylandÄ±! Ä°ki ayrÄ± QR kod oluÅŸturuldu.":"Takas onaylandÄ±! QR kod ve doÄŸrulama kodu oluÅŸturuldu.",qrCode:s,verificationCode:d,qrCodeB:g?u:void 0,verificationCodeB:g?f:void 0,isProductToProductSwap:g,agreedPrice:w})}if("reject_product_offer"===g){let e=await l.default.swapRequest.findUnique({where:{id:x},include:{product:!0,offeredProduct:!0,owner:{select:{id:!0,name:!0}},requester:{select:{id:!0,name:!0,email:!0}}}});if(!e)return o.NextResponse.json({error:"Takas bulunamadÄ±"},{status:404});if(e.ownerId!==a.id)return o.NextResponse.json({error:"Bu iÅŸlemi sadece \xfcr\xfcn sahibi yapabilir"},{status:403});if(!e.offeredProductId)return o.NextResponse.json({error:"Bu talepte \xfcr\xfcn teklifi bulunmuyor"},{status:400});let t=await l.default.swapRequest.update({where:{id:x},data:{offeredProductId:null,negotiationStatus:"counter_proposed",pendingValorAmount:e.product.valorPrice,agreedPriceOwner:e.product.valorPrice},include:{product:!0,requester:{select:{id:!0,name:!0,email:!0}},owner:{select:{id:!0,name:!0,email:!0}}}}),r=i.message||"\xdcr\xfcn teklifiniz i\xe7in teÅŸekk\xfcrler, ancak Valor ile devam etmeyi tercih ediyorum. L\xfctfen tam Valor teklifi yapÄ±n.";return await l.default.message.create({data:{senderId:a.id,receiverId:e.requesterId,content:`ğŸ’° ${r}

ğŸ“Œ Ä°stenen Valor: ${e.product.valorPrice}V`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"product_offer_rejected",swapRequestId:x,requiredValor:e.product.valorPrice})}}),(0,c.LX)(e.requesterId,c.j_.PRODUCT_INTEREST,{productTitle:e.product.title,productId:e.productId,swapId:x,message:"\xdcr\xfcn teklifiniz kabul edilmedi, Valor ile devam edilmesi isteniyor."}).catch(e=>console.error("Push notification error:",e)),o.NextResponse.json({success:!0,swap:t,message:"Valor ile devam tercihi iletildi"})}if(!x||!f)return o.NextResponse.json({error:"Talep ID ve durum gerekli"},{status:400});let y=await l.default.swapRequest.findUnique({where:{id:x},include:{product:!0,offeredProduct:!0,requester:!0,owner:!0}});if(!y)return o.NextResponse.json({error:"Talep bulunamadÄ±"},{status:404});let k="admin"===a.role;if(y.ownerId!==a.id&&!k)return o.NextResponse.json({error:"Bu talebi g\xfcncelleme yetkiniz yok"},{status:403});if("completed"===f&&"accepted"===y.status){let{completeSwapWithFee:e,previewSwapFee:t}=await Promise.resolve().then(r.bind(r,53184)),a=await e(x,y.product.valorPrice,y.offeredProduct?.valorPrice||void 0);if(!a.success)return o.NextResponse.json({error:a.error||"Takas tamamlanamadÄ±"},{status:400});await (0,p.F1)(x),await l.default.message.create({data:{senderId:y.ownerId,receiverId:y.requesterId,content:`ğŸ‰ Takas baÅŸarÄ±yla tamamlandÄ±! DeÄŸerlendirme yapmayÄ± unutmayÄ±n.`,productId:y.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"swap_completed",swapRequestId:x})}});let i=a.netAmount||0;return(0,c.LX)(y.requesterId,c.j_.SWAP_COMPLETED,{productTitle:y.product.title,valorAmount:i,swapId:x}).catch(e=>console.error("Push notification error:",e)),(0,c.LX)(y.ownerId,c.j_.SWAP_COMPLETED,{productTitle:y.product.title,valorAmount:i,swapId:x}).catch(e=>console.error("Push notification error:",e)),await l.default.$transaction([l.default.user.update({where:{id:y.requesterId},data:{pendingReviewSwapId:x}}),l.default.user.update({where:{id:y.ownerId},data:{pendingReviewSwapId:x}})]).catch(e=>console.error("Pending review set error:",e)),o.NextResponse.json({success:!0,message:"Takas baÅŸarÄ±yla tamamlandÄ±! Teminatlar iade edildi.",valorDetails:{productValue:y.product.valorPrice,fee:a.fee,netAmount:a.netAmount,effectiveRate:a.breakdown.effectiveRate,feeBreakdown:a.breakdown}})}if("rejected"===f)return y.requesterDeposit&&y.requesterDeposit>0&&await l.default.user.update({where:{id:y.requesterId},data:{lockedValor:{decrement:y.requesterDeposit}}}),await l.default.swapRequest.update({where:{id:x},data:{status:"rejected",escrowStatus:"released"}}),await l.default.message.create({data:{senderId:y.ownerId,receiverId:y.requesterId,content:`âŒ Takas talebi reddedildi. TeminatÄ±nÄ±z iade edildi.`,productId:y.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"swap_rejected",swapRequestId:x})}}),(0,c.LX)(y.requesterId,c.j_.SWAP_REJECTED,{productTitle:y.product.title,swapId:x}).catch(e=>console.error("Push notification error:",e)),o.NextResponse.json({success:!0,message:"Talep reddedildi. Teminat iade edildi."});if("ready_for_pickup"===g){let e=await l.default.swapRequest.findUnique({where:{id:x},include:{product:!0,offeredProduct:!0,owner:{select:{id:!0,name:!0,nickname:!0,email:!0}},requester:{select:{id:!0,name:!0,nickname:!0,email:!0}}}});if(!e)return o.NextResponse.json({error:"Takas bulunamadÄ±"},{status:404});if("accepted"!==e.status)return o.NextResponse.json({error:"Takas hen\xfcz onaylanmamÄ±ÅŸ"},{status:400});let t=e.requesterId===a.id,r=e.ownerId===a.id;if(!t&&!r)return o.NextResponse.json({error:"Bu takas size ait deÄŸil"},{status:403});let i=t?e.deliveryVerificationCode:e.deliveryVerificationCodeB||e.deliveryVerificationCode;if(!i)return o.NextResponse.json({error:"DoÄŸrulama kodu bulunamadÄ±"},{status:400});let n=t?e.requester.nickname||e.requester.name:e.owner.nickname||e.owner.name,s=t?e.ownerId:e.requesterId;await l.default.message.create({data:{senderId:a.id,receiverId:a.id,content:`ğŸ”‘ DoÄŸrulama Kodunuz: ${i}

ğŸ“¦ Bu 6 haneli kodu teslim noktasÄ±nda satÄ±cÄ±ya s\xf6yleyin.
SatÄ±cÄ± bu kodu doÄŸruladÄ±ÄŸÄ±nda takas tamamlanÄ±r.

âš ï¸ Bu kodu sadece karÅŸÄ± tarafa y\xfcz y\xfcze s\xf6yleyin!`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"verification_code_sent",swapRequestId:x})}}),await l.default.message.create({data:{senderId:a.id,receiverId:s,content:`ğŸ“¦ ${n} \xfcr\xfcn\xfc teslim almaya hazÄ±r olduÄŸunu bildirdi!

ğŸ¤ BuluÅŸma noktasÄ±nda ${n} size 6 haneli doÄŸrulama kodunu s\xf6yleyecek.
âœ… Kodu doÄŸruladÄ±ÄŸÄ±nÄ±zda takas tamamlanÄ±r.`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"pickup_ready_notification",swapRequestId:x})}});let d=t?e.requester.email:e.owner.email;if(d){let t=`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8fafc; padding: 40px 20px;">
          <div style="background: white; border-radius: 16px; padding: 40px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="text-align: center; margin-bottom: 30px;">
              <h1 style="color: #7c3aed; margin: 0; font-size: 28px;">TAKAS-A</h1>
              <p style="color: #3b82f6; margin-top: 8px; font-weight: bold;">ğŸ“¦ Teslim DoÄŸrulama Kodu</p>
            </div>
            
            <p style="color: #334155; font-size: 16px;">Merhaba ${n},</p>
            
            <p style="color: #475569; font-size: 15px; line-height: 1.6;">
              <strong>${e.product.title}</strong> takasÄ± i\xe7in doÄŸrulama kodunuz:
            </p>
            
            <div style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 12px; padding: 24px; text-align: center; margin: 30px 0;">
              <span style="color: white; font-size: 42px; font-weight: bold; letter-spacing: 12px;">${i}</span>
            </div>
            
            <p style="color: #ef4444; font-size: 14px; text-align: center; font-weight: bold;">
              âš ï¸ Bu kodu SADECE teslim noktasÄ±nda karÅŸÄ± tarafa s\xf6yleyin!
            </p>
            
            <hr style="border: none; border-top: 1px solid #e2e8f0; margin: 30px 0;" />
            <p style="color: #94a3b8; font-size: 12px; text-align: center;">TAKAS-A â€” G\xfcvenli Takas Platformu</p>
          </div>
        </div>
        `;q(d,n||"KullanÄ±cÄ±",`ğŸ”‘ Teslim DoÄŸrulama Kodu: ${e.product.title}`,t).catch(e=>console.error("Verification code email error:",e))}return(0,c.LX)(s,c.j_.SWAP_ACCEPTED,{productTitle:e.product.title,productId:e.productId,swapId:x}).catch(e=>console.error("Push error:",e)),o.NextResponse.json({success:!0,message:"DoÄŸrulama kodu iletildi",verificationCode:i})}if("send_code_to_seller"===g){let e=await l.default.swapRequest.findUnique({where:{id:x},include:{product:!0,owner:{select:{id:!0,name:!0,nickname:!0}},requester:{select:{id:!0,name:!0,nickname:!0}}}});if(!e)return o.NextResponse.json({error:"Takas bulunamadÄ±"},{status:404});if("accepted"!==e.status)return o.NextResponse.json({error:"Takas hen\xfcz onaylanmamÄ±ÅŸ"},{status:400});let t=e.requesterId===a.id,r=e.ownerId===a.id;if(!t&&!r)return o.NextResponse.json({error:"Bu takas size ait deÄŸil"},{status:403});let i=t?e.deliveryVerificationCode:e.deliveryVerificationCodeB||e.deliveryVerificationCode;if(!i)return o.NextResponse.json({error:"DoÄŸrulama kodu bulunamadÄ±"},{status:400});let n=t?e.requester.nickname||e.requester.name:e.owner.nickname||e.owner.name,s=t?e.ownerId:e.requesterId;return await l.default.message.create({data:{senderId:a.id,receiverId:s,content:`ğŸ”‘ ${n} doÄŸrulama kodunu paylaÅŸtÄ±: **${i}**

âœ… Bu kodu sisteme girerek takasÄ± tamamlayabilirsiniz.

ğŸ“¦ \xdcr\xfcn: ${e.product.title}`,productId:e.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"verification_code_shared",swapRequestId:x,verificationCode:i})}}),(0,c.LX)(s,c.j_.SWAP_ACCEPTED,{productTitle:e.product.title,productId:e.productId,swapId:x}).catch(e=>console.error("Push error:",e)),o.NextResponse.json({success:!0,message:"Kod karÅŸÄ± tarafa mesajla g\xf6nderildi"})}if("accepted"===f){if(y.offeredProduct){let e=await (0,p.Jk)(y.requesterId,y.ownerId,y.product.valorPrice,y.offeredProduct.valorPrice),t=await l.default.user.findUnique({where:{id:y.ownerId},select:{valorBalance:!0,lockedValor:!0}});if(t){let r=t.valorBalance-t.lockedValor;if(r<e.ownerDeposit)return o.NextResponse.json({error:`Yetersiz bakiye. Teminat i\xe7in ${e.ownerDeposit} Valor gerekli, mevcut: ${r} Valor`,depositRequired:e.ownerDeposit,availableBalance:r},{status:400});await (0,p.Eg)(y.ownerId,e.ownerDeposit,x,"owner")}}await (0,p.DF)(x)}let h=await l.default.swapRequest.update({where:{id:x},data:{status:f}});return"accepted"===f&&(await l.default.message.create({data:{senderId:y.ownerId,receiverId:y.requesterId,content:`âœ… Takas talebiniz kabul edildi! Teslim noktasÄ±nda buluÅŸabilirsiniz.`,productId:y.productId,isModerated:!0,moderationResult:"approved",metadata:JSON.stringify({type:"swap_accepted",swapRequestId:x})}}),(0,c.LX)(y.requesterId,c.j_.SWAP_ACCEPTED,{productTitle:y.product.title,productId:y.productId,swapId:x}).catch(e=>console.error("Push notification error:",e))),o.NextResponse.json(h)}catch(e){return console.error("Swap request update error:",e),o.NextResponse.json({error:"Talep g\xfcncellenirken hata oluÅŸtu"},{status:500})}}let b=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/swap-requests/route",pathname:"/api/swap-requests",filename:"route",bundlePath:"app/api/swap-requests/route"},resolvedPagePath:"/home/ubuntu/takas-a-kodlar/nextjs_space/app/api/swap-requests/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:R,staticGenerationAsyncStorage:A,serverHooks:_}=b,P="/api/swap-requests/route";function S(){return(0,s.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:A})}},81510:(e,t,r)=>{r.d(t,{C$:()=>n,Gu:()=>l,QT:()=>d,if:()=>c,lw:()=>o,qi:()=>s,td:()=>i});var a=r(91209);let i=a.z.object({title:a.z.string().min(3,"BaÅŸlÄ±k en az 3 karakter").max(200,"BaÅŸlÄ±k en fazla 200 karakter").trim(),description:a.z.string().min(10,"A\xe7Ä±klama en az 10 karakter").max(5e3).trim(),valorPrice:a.z.number().int().min(1,"DeÄŸer en az 1 Valor").max(1e5,"DeÄŸer en fazla 100000 Valor"),condition:a.z.enum(["new","like_new","good","fair","poor"]).default("good"),categoryId:a.z.string().min(1,"Kategori se\xe7iniz"),city:a.z.string().default("Ä°zmir"),district:a.z.string().optional(),images:a.z.array(a.z.string()).max(10,"En fazla 10 g\xf6rsel").optional(),latitude:a.z.number().optional(),longitude:a.z.number().optional(),usageInfo:a.z.string().optional(),checklistData:a.z.string().optional(),userValorPrice:a.z.number().optional(),acceptsNegotiation:a.z.boolean().optional(),isFreeAvailable:a.z.boolean().optional()}),n=a.z.object({productId:a.z.string().min(1,"\xdcr\xfcn ID gerekli"),message:a.z.string().max(1e3,"Mesaj en fazla 1000 karakter").optional(),offeredProductId:a.z.string().nullable().optional(),offeredValor:a.z.number().int().min(0).max(1e5).optional(),quickOffer:a.z.boolean().optional(),smartMatch:a.z.boolean().optional()}),s=a.z.object({receiverId:a.z.string().min(1,"AlÄ±cÄ± ID gerekli"),content:a.z.string().min(1,"Mesaj boÅŸ olamaz").max(5e3,"Mesaj en fazla 5000 karakter").trim(),productId:a.z.string().optional(),image:a.z.string().optional()});a.z.object({name:a.z.string().min(2,"Ä°sim en az 2 karakter").max(100).trim().optional(),phone:a.z.string().regex(/^(\+90|0)?[0-9]{10}$/,"Ge\xe7ersiz telefon numarasÄ±").optional().nullable(),city:a.z.string().max(100).optional(),district:a.z.string().max(100).optional(),bio:a.z.string().max(500).optional()});let o=a.z.object({title:a.z.string().min(3,"BaÅŸlÄ±k en az 3 karakter").max(200).trim(),description:a.z.string().min(10,"A\xe7Ä±klama en az 10 karakter").max(5e3).trim(),category:a.z.enum(["cleaning","electrical","plumbing","beauty","education","cooking","repair","delivery","design","photography","other"]),duration:a.z.string().max(50),valorPrice:a.z.number().int().min(1,"DeÄŸer en az 1 Valor").max(1e5),city:a.z.string().default("Ä°zmir"),district:a.z.string().optional(),serviceArea:a.z.string().optional(),wantCategory:a.z.string().optional(),wantDescription:a.z.string().max(500).optional(),listingType:a.z.enum(["individual","business"]).default("individual"),businessName:a.z.string().max(200).optional(),businessType:a.z.string().optional(),unitType:a.z.string().optional(),unitCount:a.z.number().int().optional(),images:a.z.array(a.z.string()).optional()}),d=a.z.object({wantTitle:a.z.string().min(3,"BaÅŸlÄ±k en az 3 karakter").max(200).trim(),wantDescription:a.z.string().max(2e3).optional(),wantCategory:a.z.string().min(1,"Kategori gerekli"),wantMinValue:a.z.number().int().min(0).optional(),wantMaxValue:a.z.number().int().max(1e5).optional(),offerType:a.z.enum(["specific_product","category","any"]).default("any"),preferredCity:a.z.string().optional(),isUrgent:a.z.boolean().default(!1),offerProductId:a.z.string().optional(),offerCategory:a.z.string().optional(),offerTitle:a.z.string().optional(),offerDescription:a.z.string().optional(),offerMinValue:a.z.number().optional(),offerMaxValue:a.z.number().optional(),deadline:a.z.string().optional(),urgencyBonus:a.z.number().optional()});function l(e,t){try{let r=e.parse(t);return{success:!0,data:r}}catch(e){if(e instanceof a.z.ZodError)return{success:!1,error:e.errors.map(e=>e.message).join(", ")};return{success:!1,error:"Ge\xe7ersiz veri"}}}let u=a.z.string().min(8,"Åifre en az 8 karakter olmalÄ±").max(128,"Åifre en fazla 128 karakter olabilir").refine(e=>/[A-Z]/.test(e),"En az 1 b\xfcy\xfck harf gerekli").refine(e=>/[a-z]/.test(e),"En az 1 k\xfc\xe7\xfck harf gerekli").refine(e=>/[0-9]/.test(e),"En az 1 rakam gerekli"),c=a.z.object({email:a.z.string().email("Ge\xe7erli bir e-posta girin").trim().toLowerCase(),password:u,name:a.z.string().min(2,"Ä°sim en az 2 karakter").max(100).trim(),nickname:a.z.string().min(2).max(50).trim().optional()});a.z.object({currentPassword:a.z.string().min(1,"Mevcut ÅŸifre gerekli"),newPassword:u})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8412,7609,3390,1472,7853,1209,9521,9628,3184,8373],()=>r(80401));module.exports=a})();