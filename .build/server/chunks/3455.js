"use strict";exports.id=3455,exports.ids=[3455,4891],exports.modules={94891:(e,t,n)=>{n.d(t,{createS3Client:()=>s,getBucketConfig:()=>i});var o=n(21841);function i(){return{bucketName:process.env.AWS_BUCKET_NAME??"",folderPrefix:process.env.AWS_FOLDER_PREFIX??""}}function s(){return new o.S3Client({})}},43455:(e,t,n)=>{n.d(t,{RP:()=>u,getFileUrl:()=>c,hM:()=>r});var o=n(21841),i=n(44105),s=n(94891);let a=(0,s.createS3Client)();async function u(e,t,n=!1,u=!1){let{bucketName:c,folderPrefix:r}=(0,s.getBucketConfig)(),p=n?`${r}public/uploads/${Date.now()}-${e}`:`${r}uploads/${Date.now()}-${e}`,l=new o.PutObjectCommand({Bucket:c,Key:p,ContentType:t,...u?{ContentDisposition:"attachment"}:{}});return{uploadUrl:await (0,i.e)(a,l,{expiresIn:3600}),cloud_storage_path:p,requiresContentDisposition:u}}async function c(e,t=!1){let{bucketName:n}=(0,s.getBucketConfig)();if(t){let t=process.env.AWS_REGION||"us-east-1";return`https://${n}.s3.${t}.amazonaws.com/${e}`}let u=new o.GetObjectCommand({Bucket:n,Key:e,ResponseContentDisposition:"attachment"});return await (0,i.e)(a,u,{expiresIn:3600})}async function r(e,t,n,i=!1){let{bucketName:u,folderPrefix:c}=(0,s.getBucketConfig)(),r=i?`${c}public/uploads/${Date.now()}-${t}`:`${c}uploads/identity/${Date.now()}-${t}`,p=new o.PutObjectCommand({Bucket:u,Key:r,Body:e,ContentType:n,ContentDisposition:i?"attachment":void 0});return await a.send(p),r}}};